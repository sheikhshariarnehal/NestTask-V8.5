import{e as g,K as N,k as C,l as P,h as O,g as F,n as H,o as S,q as $,u as q,v as U}from"./App.De85lOwA.js";import"./index.Cwibt6lB.js";import"./useAuth.CSsrwBun.js";import"./dataCache.CcjqYMC_.js";import"./authErrors.D8KAnYp0.js";import"./useTasks.Ck1XYLJv.js";import"./telegram.service.B5vX6-Oo.js";import"./dateUtils.CaLFIf6y.js";import"./AuthPage.Bi3nM9Xh.js";import"./AuthSubmitButton.B2hI98pb.js";import"./createLucideIcon.CKe07pSy.js";import"./alert-circle.FXGUnTyR.js";import"./mail.BgoodDFY.js";import"./lock.jngXsypk.js";import"./eye-off.CXLDKAvk.js";import"./eye.CHeqQiZk.js";import"./loader-2.ChU40c6V.js";import"./user.CtJRPaY7.js";import"./book-open.alLU3eZL.js";import"./layers.C3xYdI7I.js";import"./users.CrI6b3lh.js";import"./check-circle-2.Dt-Pe_F8.js";import"./x.CA1x_-CA.js";import"./bell.DvneMeIE.js";import"./smartphone.DtDefUkp.js";import"./sun.vbLigPk9.js";import"./shield.C0CXa-KY.js";import"./chevron-right.Bfyu7Q9L.js";import"./calendar.Cfnc3LbZ.js";import"./clock.CoIZ0oKR.js";import"./search.DGQdSAcz.js";import"./ResetPasswordPage.EyusDBLi.js";import"./shield-check.DkjurcN9.js";import"./linkParser.BKY3c5ee.js";import"./googleDriveUtils.CyC_Vruu.js";import"./file-text.BPzc0GCr.js";import"./link.BNKWNt6t.js";import"./tag.vMAHZXpz.js";import"./copy.CJR17kT4.js";import"./download.CDw6AsND.js";import"./list-todo.B80-SJ6z.js";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const A=new WeakMap,D=(e,o,t,r=0,s=!1)=>{A.has(e)!==t&&(t?G(e,o,r,s):W(e,o))},Y=e=>e===e.getRootNode().activeElement,G=(e,o,t,r=!1)=>{const s=o.parentNode,i=o.cloneNode(!1);i.classList.add("cloned-input"),i.tabIndex=-1,r&&(i.disabled=!0),s.appendChild(i),A.set(e,i);const a=e.ownerDocument.dir==="rtl"?9999:-9999;e.style.pointerEvents="none",o.style.transform=`translate3d(${a}px,${t}px,0) scale(0)`},W=(e,o)=>{const t=A.get(e);t&&(A.delete(e),t.remove()),e.style.pointerEvents="",o.style.transform=""},k=50,z=(e,o,t)=>{if(!t||!o)return()=>{};const r=a=>{Y(o)&&D(e,o,a)},s=()=>D(e,o,!1),i=()=>r(!0),c=()=>r(!1);return C(t,"ionScrollStart",i),C(t,"ionScrollEnd",c),o.addEventListener("blur",s),()=>{P(t,"ionScrollStart",i),P(t,"ionScrollEnd",c),o.removeEventListener("blur",s)}},I="input, textarea, [no-blur], [contenteditable]",j=()=>{let e=!0,o=!1;const t=document,r=()=>{o=!0},s=()=>{e=!0},i=c=>{if(o){o=!1;return}const a=t.activeElement;if(!a||a.matches(I))return;const f=c.target;f!==a&&(f.matches(I)||f.closest(I)||(e=!1,setTimeout(()=>{e||a.blur()},50)))};return C(t,"ionScrollStart",r),t.addEventListener("focusin",s,!0),t.addEventListener("touchend",i,!1),()=>{P(t,"ionScrollStart",r,!0),t.removeEventListener("focusin",s,!0),t.removeEventListener("touchend",i,!1)}},J=.3,Q=(e,o,t,r)=>{var s;const i=(s=e.closest("ion-item,[ion-item]"))!==null&&s!==void 0?s:e;return V(i.getBoundingClientRect(),o.getBoundingClientRect(),t,r)},V=(e,o,t,r)=>{const s=e.top,i=e.bottom,c=o.top,a=Math.min(o.bottom,r-t),f=c+15,u=a-k-i,d=f-s,v=Math.round(u<0?-u:d>0?-d:0),m=Math.min(v,s-c),n=Math.abs(m)/J,p=Math.min(400,Math.max(150,n));return{scrollAmount:m,scrollDuration:p,scrollPadding:t,inputSafeY:-(s-f)+4}},x="$ionPaddingTimer",B=(e,o,t)=>{const r=e[x];r&&clearTimeout(r),o>0?e.style.setProperty("--keyboard-offset",`${o}px`):e[x]=setTimeout(()=>{e.style.setProperty("--keyboard-offset","0px"),t&&t()},120)},R=(e,o,t)=>{const r=()=>{o&&B(o,0,t)};e.addEventListener("focusout",r,{once:!0})};let w=0;const M="data-ionic-skip-scroll-assist",X=(e,o,t,r,s,i,c,a=!1)=>{const f=i&&(c===void 0||c.mode===H.None);let l=!1;const u=S!==void 0?S.innerHeight:0,d=h=>{if(l===!1){l=!0;return}_(e,o,t,r,h.detail.keyboardHeight,f,a,u,!1)},v=()=>{l=!1,S===null||S===void 0||S.removeEventListener("ionKeyboardDidShow",d),e.removeEventListener("focusout",v)},m=async()=>{if(o.hasAttribute(M)){o.removeAttribute(M);return}_(e,o,t,r,s,f,a,u),S===null||S===void 0||S.addEventListener("ionKeyboardDidShow",d),e.addEventListener("focusout",v)};return e.addEventListener("focusin",m),()=>{e.removeEventListener("focusin",m),S===null||S===void 0||S.removeEventListener("ionKeyboardDidShow",d),e.removeEventListener("focusout",v)}},T=e=>{var o;if(document.activeElement===e)return;const t=e.getAttribute("id"),r=e.closest(`label[for="${t}"]`),s=(o=document.activeElement)===null||o===void 0?void 0:o.closest(`label[for="${t}"]`);r!==null&&r===s||(e.setAttribute(M,"true"),e.focus())},_=async(e,o,t,r,s,i,c=!1,a=0,f=!0)=>{if(!t&&!r)return;const l=Q(e,t||r,s,a);if(t&&Math.abs(l.scrollAmount)<4){T(o),i&&t!==null&&(B(t,w),R(o,t,()=>w=0));return}if(D(e,o,!0,l.inputSafeY,c),T(o),$(()=>e.click()),i&&t&&(w=l.scrollPadding,B(t,w)),typeof window!="undefined"){let u;const d=async()=>{u!==void 0&&clearTimeout(u),window.removeEventListener("ionKeyboardDidShow",v),window.removeEventListener("ionKeyboardDidShow",d),t&&await U(t,0,l.scrollAmount,l.scrollDuration),D(e,o,!1,l.inputSafeY),T(o),i&&R(o,t,()=>w=0)},v=()=>{window.removeEventListener("ionKeyboardDidShow",v),window.addEventListener("ionKeyboardDidShow",d)};if(t){const m=await q(t),h=m.scrollHeight-m.clientHeight;if(f&&l.scrollAmount>h-m.scrollTop){o.type==="password"?(l.scrollAmount+=k,window.addEventListener("ionKeyboardDidShow",v)):window.addEventListener("ionKeyboardDidShow",d),u=setTimeout(d,1e3);return}}d()}},Z=!0,qe=async(e,o)=>{if(g===void 0)return;const t=o==="ios",r=o==="android",s=e.getNumber("keyboardHeight",290),i=e.getBoolean("scrollAssist",!0),c=e.getBoolean("hideCaretOnScroll",t),a=e.getBoolean("inputBlurring",!1),f=e.getBoolean("scrollPadding",!0),l=Array.from(g.querySelectorAll("ion-input, ion-textarea")),u=new WeakMap,d=new WeakMap,v=await N.getResizeMode(),m=async n=>{await new Promise(L=>O(n,L));const p=n.shadowRoot||n,y=p.querySelector("input")||p.querySelector("textarea"),b=F(n),K=b?null:n.closest("ion-footer");if(!y)return;if(b&&c&&!u.has(n)){const L=z(n,y,b);u.set(n,L)}if(!(y.type==="date"||y.type==="datetime-local")&&(b||K)&&i&&!d.has(n)){const L=X(n,y,b,K,s,f,v,r);d.set(n,L)}},h=n=>{if(c){const p=u.get(n);p&&p(),u.delete(n)}if(i){const p=d.get(n);p&&p(),d.delete(n)}};a&&Z&&j();for(const n of l)m(n);g.addEventListener("ionInputDidLoad",n=>{m(n.detail)}),g.addEventListener("ionInputDidUnload",n=>{h(n.detail)})};export{qe as startInputShims};
