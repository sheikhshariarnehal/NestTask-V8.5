import{r as e,j as t}from"./index.DUyEzeY1.js";import{M as r}from"./megaphone.BlzFN0u5.js";import{S as a}from"./send.92SPOMua.js";import{p as s}from"./linkParser.CRNpH1Sh.js";import{C as n}from"./calendar.C4R3huf5.js";import{T as l}from"./trash-2.DjbgN9JW.js";import"./createLucideIcon.DoJe9V_e.js";function o({onSubmit:s}){const[n,l]=e.useState({title:"",content:""}),[o,d]=e.useState(!1);return e.useEffect((()=>()=>{d(!1)}),[]),t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!o){d(!0);try{await s(n),l({title:"",content:""})}finally{d(!1)}}},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm p-4 sm:p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-xl",children:t.jsx(r,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white",children:"Create Announcement"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:"Send important updates to all users"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Title"}),t.jsx("input",{type:"text",value:n.title,onChange:e=>l((t=>({...t,title:e.target.value}))),className:"w-full px-4 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors",placeholder:"Enter announcement title",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Content"}),t.jsx("textarea",{value:n.content,onChange:e=>l((t=>({...t,content:e.target.value}))),className:"w-full px-4 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white h-32 resize-none transition-colors",placeholder:"Enter announcement content",required:!0})]}),t.jsxs("button",{type:"submit",disabled:o,className:`\n            w-full flex items-center justify-center gap-2 py-2.5 px-4 rounded-xl text-white\n            ${o?"bg-blue-400 dark:bg-blue-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600"}\n            transition-colors duration-200 shadow-sm hover:shadow-md\n          `,children:[t.jsx(a,{className:"w-4 h-4"}),o?"Sending...":"Send Announcement"]})]})]})}function d({announcements:e,onDelete:a}){return t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm p-4 sm:p-6 mt-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-xl",children:t.jsx(r,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white",children:"Recent Announcements"}),t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:[e.length," ",1===e.length?"announcement":"announcements"," sent"]})]})]}),0===e.length?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(r,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"No announcements yet"}),t.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Create your first announcement above"})]}):t.jsx("div",{className:"space-y-4",children:e.map((e=>{const r=s(e.content);return t.jsx("div",{className:"p-4 rounded-xl border border-gray-100 dark:border-gray-700 hover:border-gray-200 dark:hover:border-gray-600 transition-all duration-200 group hover:shadow-sm",children:t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex-grow space-y-2 min-w-0",children:[" ",t.jsx("h3",{className:"font-medium text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors break-words",children:e.title}),t.jsx("div",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base break-words",children:r.map(((e,r)=>"link"===e.type?t.jsx("a",{href:e.content,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline break-all",children:e.content},r):t.jsx("span",{children:e.content},r)))}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[t.jsx(n,{className:"w-4 h-4"}),t.jsx("span",{children:new Date(e.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),t.jsx("div",{className:"flex sm:flex-col items-center gap-2",children:t.jsx("button",{onClick:()=>a(e.id),className:"p-2 text-red-600 dark:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Delete announcement",children:t.jsx(l,{className:"w-4 h-4"})})})]})},e.id)}))})]})}function i({announcements:e,onCreateAnnouncement:r,onDeleteAnnouncement:a}){return t.jsxs("div",{children:[t.jsx(o,{onSubmit:r}),t.jsx(d,{announcements:e,onDelete:a})]})}export{i as AnnouncementManager};
