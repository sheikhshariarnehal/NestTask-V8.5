const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/App.Di7elako.js","assets/js/supabase.B4ywLuvY.js","assets/js/charts.BhfGaadd.js","assets/js/react-vendor.SP0LgxZM.js","assets/js/index.CxTf1Bti.js","assets/css/index.PdEsOd4T.css","assets/js/AuthSubmitButton.BLpJgFCP.js","assets/js/icons.BOUVRKPH.js","assets/js/AuthPage.D2ROb-ls.js","assets/js/ui-components.BjukC0cy.js","assets/js/date-utils.CKfbr2bM.js","assets/js/ResetPasswordPage.DDbEt0ky.js"])))=>i.map(i=>d[i]);
import{_ as e}from"./supabase.B4ywLuvY.js";import{r as a,R as r,j as t}from"./react-vendor.SP0LgxZM.js";import{a as s,b as d}from"./App.Di7elako.js";import{p as l,c as n,d as o,h as i,f as c,j as m}from"./date-utils.CKfbr2bM.js";import{Crown as g,LucidePaperclip as u,Calendar as x,CheckCircle2 as b,AlertCircle as h,Clock as p,BookOpen as k,LucidePenTool as y,Folder as f,FileText as w,FlaskConical as j,GraduationCap as v,Activity as N,Building as D,LucideUsers as S,LucideTag as T}from"./icons.BOUVRKPH.js";import"./charts.BhfGaadd.js";import"./index.CxTf1Bti.js";import"./AuthSubmitButton.BLpJgFCP.js";import"./AuthPage.D2ROb-ls.js";import"./ui-components.BjukC0cy.js";import"./ResetPasswordPage.DDbEt0ky.js";const M=new Map,C=(e,a)=>{const r=`${e.getTime()}_${a}`;if(!M.has(r)&&(M.set(r,c(e,a)),M.size>100)){const e=M.keys().next().value;e&&M.delete(e)}return M.get(r)},$=a.lazy((()=>e((()=>import("./App.Di7elako.js").then((e=>e.F))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then((e=>({default:e.TaskDetailsPopup}))))),A=a.lazy((()=>e((()=>import("./App.Di7elako.js").then((e=>e.M))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then((e=>({default:e.MonthlyCalendar}))))),E=r.memo((()=>t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 px-4 md:max-w-4xl lg:max-w-5xl md:mx-auto",children:Array.from({length:6}).map(((e,a)=>t.jsx("div",{className:"animate-pulse bg-white dark:bg-gray-800/90 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700/50 h-48",children:t.jsxs("div",{className:"p-4 h-full flex flex-col",children:[t.jsx("div",{className:"w-3/4 h-5 bg-gray-200 dark:bg-gray-700 rounded mb-3"}),t.jsx("div",{className:"w-full h-3 bg-gray-200 dark:bg-gray-700 rounded mb-2"}),t.jsx("div",{className:"w-4/5 h-3 bg-gray-200 dark:bg-gray-700 rounded mb-2"}),t.jsx("div",{className:"w-2/3 h-3 bg-gray-200 dark:bg-gray-700 rounded mb-6"}),t.jsxs("div",{className:"mt-auto pt-2 border-t border-gray-100 dark:border-gray-700/50 flex justify-between",children:[t.jsx("div",{className:"w-16 h-4 bg-gray-200 dark:bg-gray-700 rounded"}),t.jsx("div",{className:"w-20 h-4 bg-gray-200 dark:bg-gray-700 rounded"})]})]})},a)))})));a.memo((({day:e,onClick:a})=>t.jsxs("button",{onClick:a,className:`\n        relative group\n        flex flex-col items-center justify-center\n        w-full aspect-square\n        p-1 sm:p-1.5 md:p-3 lg:p-4 rounded-lg sm:rounded-xl \n        border transition-all duration-200\n        ${e.isSelected?"bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-600 border-blue-400/50 shadow-md shadow-blue-500/20 dark:shadow-blue-600/20 scale-[1.02] -translate-y-0.5 md:scale-105":e.isToday?"bg-gradient-to-br from-blue-100 via-indigo-50 to-purple-50 border-blue-200/70 dark:from-blue-900/50 dark:via-indigo-900/40 dark:to-purple-900/50 dark:border-blue-700/50":"bg-white/90 dark:bg-gray-800/90 border-gray-200/50 dark:border-gray-700/50"}\n        hover:shadow-md hover:-translate-y-0.5\n        hover:border-blue-300/70 dark:hover:border-blue-600/70\n        active:scale-95 touch-manipulation\n        md:hover:shadow-lg md:hover:-translate-y-1\n      `,children:[t.jsx("span",{className:`\n        text-[10px] sm:text-xs md:text-sm font-semibold tracking-wide\n        transition-colors duration-200\n        ${e.isSelected?"text-blue-100":e.isToday?"text-blue-600/90 dark:text-blue-400":"text-gray-500 group-hover:text-blue-500 dark:text-gray-400 dark:group-hover:text-blue-400"}\n        mb-0.5 sm:mb-1 md:mb-2\n      `,children:e.weekDay}),t.jsx("span",{className:`\n        text-base sm:text-lg md:text-3xl lg:text-4xl font-bold \n        transition-colors duration-200\n        ${e.isSelected?"text-white":e.isToday?"text-blue-600/90 dark:text-blue-400":"text-gray-700 group-hover:text-blue-600 dark:text-gray-300 dark:group-hover:text-blue-400"}\n      `,children:e.day}),e.isToday&&!e.isSelected&&t.jsx("div",{className:"absolute -bottom-0.5 left-1/2 transform -translate-x-1/2",children:t.jsx("div",{className:"w-1 h-1 sm:w-1.5 sm:h-1.5 md:w-2 md:h-2 rounded-full bg-gradient-to-r from-blue-500 to-indigo-500 dark:from-blue-400 dark:to-indigo-400 animate-pulse shadow-lg shadow-blue-500/50"})}),e.isSelected&&t.jsx("div",{className:"absolute inset-0 rounded-lg sm:rounded-xl ring-2 ring-blue-400/40 dark:ring-blue-500/40 animate-pulse"})]})));const L=a.memo((({task:e,status:a,categoryInfo:r,hasAttachments:s,cleanTaskDescription:d,onClick:m,preventTaskSelection:b})=>{const h=l(e.dueDate),p=new Date,k=n(i(h),o(p));return t.jsx("div",{onClick:m,className:`\n        group h-full bg-white dark:bg-gray-800/90 rounded-lg\n        shadow-sm hover:shadow-lg\n        border border-gray-100 dark:border-gray-700/50\n        hover:border-blue-200 dark:hover:border-blue-600/50\n        relative overflow-hidden ${b?"":"cursor-pointer"}\n        transition-all duration-200\n        transform ${b?"":"hover:-translate-y-1"}\n        flex flex-col\n        ${"completed"===e.status?"opacity-80 hover:opacity-95":k?"border-l-[3px] border-l-red-500":""}\n      `,children:t.jsxs("div",{className:"p-4 flex-grow flex flex-col",children:[t.jsx("div",{className:"flex items-start mb-3",children:t.jsxs("div",{className:"flex items-start gap-2 min-w-0",children:[t.jsx("h3",{className:`\n              text-base font-semibold leading-tight truncate\n              ${"completed"===e.status?"text-gray-500 dark:text-gray-400 line-through":k?"text-red-800 dark:text-red-300":"text-gray-800 dark:text-gray-100"}\n            `,children:e.name}),e.isAdminTask&&t.jsx("div",{className:"flex-shrink-0 p-0.5 mt-0.5",children:t.jsx(g,{className:"w-3.5 h-3.5 text-amber-500 dark:text-amber-400"})}),s&&t.jsx("div",{className:"flex-shrink-0 p-0.5 mt-0.5",children:t.jsx(u,{className:"w-3.5 h-3.5 text-gray-500 dark:text-gray-400"})})]})}),t.jsx("p",{className:`\n          text-sm leading-relaxed line-clamp-2 mb-4 flex-grow\n          ${"completed"===e.status?"text-gray-500 dark:text-gray-400":k?"text-gray-700 dark:text-gray-300":"text-gray-600 dark:text-gray-300"}\n        `,children:d(e.description)}),t.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100 dark:border-gray-700/50",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(x,{className:"\n              w-3.5 h-3.5\n              "+(k&&!e.status?"text-red-500 dark:text-red-400":"text-gray-500 dark:text-gray-400")}),t.jsxs("span",{className:"\n              text-xs font-medium\n              "+(k&&!e.status?"text-red-500 dark:text-red-400":"text-gray-500 dark:text-gray-400"),children:["Due: ",c(h,"MMM d")]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[("completed"===e.status||k)&&t.jsxs("span",{className:`\n                inline-flex items-center gap-1\n                px-2 py-0.5\n                text-[10px] font-medium\n                rounded-full\n                ${"completed"===e.status?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400"}\n                ${k&&"completed"!==e.status?"animate-pulse":""}\n              `,children:[a.icon,t.jsx("span",{children:a.label})]}),t.jsxs("span",{className:`\n              inline-flex items-center gap-1.5\n              px-2.5 py-0.5\n              text-[10px] font-medium tracking-wide\n              rounded-md border\n              ${r.color.replace("bg-","bg-opacity-75 bg-").replace("text-","text-opacity-90 text-")}\n              transition-all duration-200\n              shadow-sm backdrop-blur-sm\n              border-opacity-30\n              ${r.color.includes("blue")?"border-blue-200 dark:border-blue-700":r.color.includes("purple")?"border-purple-200 dark:border-purple-700":r.color.includes("emerald")?"border-emerald-200 dark:border-emerald-700":r.color.includes("indigo")?"border-indigo-200 dark:border-indigo-700":r.color.includes("green")?"border-green-200 dark:border-green-700":r.color.includes("red")?"border-red-200 dark:border-red-700":r.color.includes("yellow")?"border-yellow-200 dark:border-yellow-700":r.color.includes("amber")?"border-amber-200 dark:border-amber-700":r.color.includes("sky")?"border-sky-200 dark:border-sky-700":"border-gray-200 dark:border-gray-700"}\n              hover:shadow-md group-hover:shadow-md\n            `,children:[t.jsx("div",{className:"flex-shrink-0",children:r.icon}),t.jsx("span",{className:"capitalize whitespace-nowrap",children:e.category.replace("-"," ")})]})]})]})]})})}));function P({tasks:e,openTaskId:r,onOpenTaskIdConsumed:g}){const{user:u}=s(),{tasks:M,loading:P,error:R,updateTask:_,refreshTasks:z}=d(e||null==u?void 0:u.id),[I,F]=a.useState([]),[U,O]=a.useState(new Date),[Y,q]=a.useState(null),[B,V]=a.useState(!1),[W,G]=a.useState(null),[H,J]=a.useState(!1),[K,Q]=a.useState(!1),[X,Z]=a.useState(!0),[ee,ae]=a.useState(!0),[re,te]=a.useState(0),se=a.useRef(!0),de=a.useRef(Date.now()),le=a.useRef(),ne=a.useRef();a.useRef(new Map),a.useRef(new Map),a.useEffect((()=>{F(e||M||[])}),[e,M]),a.useEffect((()=>{if(!r)return;const a=(e||M||[]).find((e=>e.id===r));if(a&&(q(a),a.dueDate))try{const e="string"==typeof a.dueDate?l(a.dueDate):new Date(a.dueDate);Number.isNaN(e.getTime())||O(e)}catch(t){}null==g||g()}),[r,e,M,g]),a.useEffect((()=>(P&&(ne.current=setTimeout((()=>{P&&z()}),1e4)),()=>{ne.current&&clearTimeout(ne.current)})),[P,z]);const oe=a.useCallback((()=>{re<3?(te((e=>e+1)),le.current=setTimeout((()=>{z()}),2e3*(re+1))):G("Failed to load tasks after multiple attempts. Please try again later.")}),[re,z]);a.useEffect((()=>()=>{le.current&&clearTimeout(le.current)}),[]),a.useEffect((()=>{R&&(G(R),oe())}),[R,oe]),a.useEffect((()=>{const e=()=>{const e="visible"===document.visibilityState;if(ae(e),e){const e=Date.now();e-de.current>3e4&&z(),de.current=e}};return document.addEventListener("visibilitychange",e),se.current&&(se.current=!1,P||M&&0!==M.length||z()),()=>{document.removeEventListener("visibilitychange",e)}}),[z,P,M]),a.useCallback((()=>{z()}),[z]);const ie=a.useCallback((e=>e?e.replace(/\*This task is assigned to section ID: [0-9a-f-]+\*/g,"").replace(/\[([^\]]+)\]\(attachment:[^)]+\)/g,"").replace(/\*\*Attachments:\*\*.*?\)/g,"").replace(/AS \*\*Attachments:\*\*.*?$/gm,"").replace(/Attachments:.*?$/gm,"").trim():""),[]),ce=a.useCallback((e=>[/\[([^\]]+)\]\(attachment:[^)]+\)/,/\*\*Attachments:\*\*/,/AS \*\*Attachments:\*\*/,/Attachments:/].some((a=>a.test(e)))),[]),me=a.useCallback((e=>C(e,"yyyy-MM-dd")),[]),ge=a.useCallback(((e,a)=>!(!e||!a)&&e.getFullYear()===a.getFullYear()&&e.getMonth()===a.getMonth()&&e.getDate()===a.getDate()),[]),ue=a.useMemo((()=>{const e=m(U,-3),a=new Date;return Array.from({length:7},((r,t)=>{const s=m(e,t);return{date:s,day:C(s,"dd"),weekDay:C(s,"EEE"),isSelected:ge(s,U),isToday:ge(s,a)}}))}),[U,ge,C]),xe=a.useMemo((()=>{if(!I||0===I.length)return[];const e=U.getFullYear(),a=U.getMonth(),r=U.getDate();return I.filter((t=>{if(!t.dueDate)return!1;try{const s=l(t.dueDate);return s.getFullYear()===e&&s.getMonth()===a&&s.getDate()===r}catch(s){return!1}}))}),[I,U]),be=a.useCallback((e=>{const a=l(e.dueDate),r=new Date,s=n(i(a),o(r));return"completed"===e.status?{label:"Completed",color:"bg-green-50 text-green-600 dark:bg-green-900/20 dark:text-green-400 ring-green-500/20",icon:t.jsx(b,{className:"w-3.5 h-3.5"})}:s?{label:"Overdue",color:"bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400 ring-red-500/20",icon:t.jsx(h,{className:"w-3.5 h-3.5"}),cardStyle:"border-l-[3px] border-l-red-500 bg-red-50/30 dark:bg-red-900/10"}:{label:"In Progress",color:"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400 ring-blue-500/20",icon:t.jsx(p,{className:"w-3.5 h-3.5"})}}),[]),he=a.useMemo((()=>({task:t.jsx(k,{className:"w-3 h-3 md:w-4 md:h-4"}),presentation:t.jsx(y,{className:"w-3 h-3 md:w-4 md:h-4"}),project:t.jsx(f,{className:"w-3 h-3 md:w-4 md:h-4"}),assignment:t.jsx(w,{className:"w-3 h-3 md:w-4 md:h-4"}),quiz:t.jsx(k,{className:"w-3 h-3 md:w-4 md:h-4"}),"lab-report":t.jsx(j,{className:"w-3 h-3 md:w-4 md:h-4"}),"lab-final":t.jsx(v,{className:"w-3 h-3 md:w-4 md:h-4"}),"lab-performance":t.jsx(N,{className:"w-3 h-3 md:w-4 md:h-4"}),documents:t.jsx(w,{className:"w-3 h-3 md:w-4 md:h-4"}),blc:t.jsx(D,{className:"w-3 h-3 md:w-4 md:h-4"}),groups:t.jsx(S,{className:"w-3 h-3 md:w-4 md:h-4"}),default:t.jsx(T,{className:"w-3 h-3 md:w-4 md:h-4"})})),[]),pe=a.useMemo((()=>({task:"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300",presentation:"bg-purple-100 text-purple-700 dark:bg-purple-900/20 dark:text-purple-300",project:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-300",assignment:"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300",quiz:"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/20 dark:text-indigo-300","lab-report":"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-300","lab-final":"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-300","lab-performance":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-300",documents:"bg-gray-100 text-gray-700 dark:bg-gray-900/20 dark:text-gray-300",blc:"bg-amber-100 text-amber-700 dark:bg-amber-900/20 dark:text-amber-300",groups:"bg-sky-100 text-sky-700 dark:bg-sky-900/20 dark:text-sky-300",default:"bg-gray-100 text-gray-700 dark:bg-gray-900/20 dark:text-gray-300"})),[]),ke=a.useCallback((e=>{const a=e||"default";return{icon:he[a]||he.default,color:pe[a]||pe.default}}),[he,pe]);return a.useCallback((e=>{O(e),q(null)}),[]),a.useEffect((()=>{const e=setTimeout((()=>{try{const e=new URLSearchParams(window.location.search),a=e.get("selectedDate"),r=me(U);if(a!==r){e.set("selectedDate",r);const a=`${window.location.pathname}?${e.toString()}`;window.history.replaceState({path:a},"",a)}}catch(e){}}),300);return()=>clearTimeout(e)}),[U,me]),X&&P?t.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pt-4",children:[t.jsxs("div",{className:"max-w-full md:max-w-5xl mx-auto px-2 md:px-6 mb-6",children:[t.jsxs("div",{className:"animate-pulse flex items-center justify-between mb-4 py-3",children:[t.jsx("div",{className:"h-8 w-20 bg-gray-200 dark:bg-gray-700 rounded-full"}),t.jsx("div",{className:"h-6 w-32 bg-gray-200 dark:bg-gray-700 rounded"}),t.jsx("div",{className:"h-8 w-20 bg-gray-200 dark:bg-gray-700 rounded-lg"})]}),t.jsx("div",{className:"grid grid-cols-7 gap-2 md:gap-3 lg:gap-4 px-0 md:px-4",children:Array.from({length:7}).map(((e,a)=>t.jsx("div",{className:"w-full aspect-square md:aspect-[3/4] p-1.5 md:p-3 lg:p-4 rounded-xl bg-gray-200 dark:bg-gray-700 animate-pulse"},a)))})]}),t.jsx(E,{})]}):P&&!X?t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):P||I&&0!==I.length?t.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(R||W)&&t.jsx("div",{className:"fixed top-4 right-4 z-50 bg-red-100 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg shadow-lg animate-fade-in",children:t.jsx("p",{className:"text-sm font-medium",children:R||W})}),(B||P&&!X)&&t.jsx("div",{className:"fixed inset-0 bg-black/10 backdrop-blur-sm z-40 flex items-center justify-center",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-xl animate-scale-in",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:B?"Updating task...":"Loading tasks..."})]})}),t.jsxs("div",{className:"max-w-full md:max-w-5xl mx-auto px-2 md:px-6 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between px-1.5 py-2 min-h-[40px]",children:[t.jsxs("button",{onClick:()=>O(new Date),className:"flex items-center gap-1 px-2 py-1 text-xs font-medium text-blue-600 dark:text-blue-400 bg-blue-50/80 dark:bg-blue-900/30 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/40 transition-all duration-200 whitespace-nowrap",children:[t.jsx("div",{className:"w-1 h-1 rounded-full bg-blue-500 dark:bg-blue-400 animate-pulse"}),"Today"]}),t.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300 cursor-pointer hover:text-blue-500 dark:hover:text-blue-400 transition-colors px-2 whitespace-nowrap",onClick:()=>J(!0),children:C(U,"MMM yyyy")}),t.jsxs("div",{className:"flex items-center bg-gray-100/80 dark:bg-gray-800/80 rounded-md h-6 overflow-hidden",children:[t.jsx("button",{onClick:()=>{const e=m(U,-7);O(e)},className:"h-full px-1 text-gray-600 hover:text-blue-600 hover:bg-white/90 dark:text-gray-300 dark:hover:text-blue-400 dark:hover:bg-gray-700/90 transition-all duration-200 border-r border-gray-200 dark:border-gray-700","aria-label":"Previous week",children:t.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),t.jsx("button",{onClick:()=>{const e=m(U,7);O(e)},className:"h-full px-1 text-gray-600 hover:text-blue-600 hover:bg-white/90 dark:text-gray-300 dark:hover:text-blue-400 dark:hover:bg-gray-700/90 transition-all duration-200","aria-label":"Next week",children:t.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})})]})]}),t.jsx("div",{className:"pb-4 mb-2 mt-4",children:t.jsx("div",{className:"grid grid-cols-7 gap-1.5 sm:gap-2 md:gap-3 lg:gap-4 px-1 sm:px-2 md:px-6",children:ue.map((e=>t.jsxs("button",{onClick:()=>O(e.date),className:`\n                  relative flex flex-col items-center justify-center\n                  h-16 sm:h-20 md:h-24 lg:h-28 w-full\n                  p-1 sm:p-2 md:p-3 rounded-xl\n                  border transition-all duration-150\n                ${e.isSelected?"bg-blue-500 border-blue-400 shadow-md text-white":e.isToday?"bg-blue-50 border-blue-200 dark:bg-blue-900/30 dark:border-blue-800/50":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700"}\n                  hover:shadow-md hover:border-blue-300 dark:hover:border-blue-700\n                  active:scale-95\n              `,children:[t.jsx("span",{className:`\n                  text-[10px] sm:text-xs font-medium tracking-wide\n                ${e.isSelected?"text-blue-100":e.isToday?"text-blue-500 dark:text-blue-400":"text-gray-500 dark:text-gray-400"}\n              `,children:e.weekDay}),t.jsx("span",{className:`\n                  text-xl sm:text-2xl md:text-3xl font-bold mt-1\n                ${e.isSelected?"text-white":e.isToday?"text-blue-600 dark:text-blue-400":"text-gray-800 dark:text-gray-200"}\n              `,children:e.day})]},e.day+e.weekDay)))})})]}),t.jsx("div",{className:"px-3 xs:px-4 md:max-w-4xl lg:max-w-5xl md:mx-auto pb-8",children:xe.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 xs:gap-3 md:gap-4",children:xe.map((e=>t.jsx(L,{task:e,status:be(e),categoryInfo:ke(e.category),hasAttachments:ce(e.description),cleanTaskDescription:ie,onClick:()=>{K||q(e)},preventTaskSelection:K},e.id)))}):t.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200/80 dark:border-gray-700/80 mt-4",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-50 dark:bg-gray-700 rounded-full flex items-center justify-center",children:t.jsx(x,{className:"w-8 h-8 text-gray-400 dark:text-gray-500"})}),t.jsxs("p",{className:"text-lg text-gray-900 dark:text-gray-100 font-medium",children:["No tasks for ",c(U,"MMMM d")]}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:ge(U,new Date)?"You're all caught up for today!":"Nothing scheduled for this day"})]})}),t.jsx(a.Suspense,{fallback:t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-white"})}),children:Y&&t.jsx($,{task:Y,onClose:()=>q(null),onStatusUpdate:async(e,a)=>{try{V(!0),G(null);const t=I.find((a=>a.id===e));if(!t)throw new Error("Task not found in current list");const s=t.status;try{const r=await _(e,{status:a});F((a=>a.map((a=>a.id===e?r:a)))),(null==Y?void 0:Y.id)===e&&q(r)}catch(r){throw F((a=>a.map((a=>a.id===e?{...a,status:s}:a)))),r}}catch(r){G("Failed to update task status. Please try again.")}finally{V(!1)}},isUpdating:B})}),t.jsx(a.Suspense,{fallback:t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-white"})}),children:H&&t.jsx(A,{isOpen:H,onClose:()=>J(!1),selectedDate:U,onSelectDate:e=>{q(null),Q(!0),setTimeout((()=>{Q(!1)}),1e3),O(e),J(!1);try{const a=new URLSearchParams(window.location.search);a.set("selectedDate",me(e));const r=`${window.location.pathname}?${a.toString()}`;window.history.pushState({path:r},"",r)}catch(a){}},tasks:I})})]}):t.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pt-4",children:t.jsx("div",{className:"max-w-full md:max-w-5xl mx-auto px-2 md:px-6",children:t.jsxs("div",{className:"text-center py-16 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200/80 dark:border-gray-700/80 mt-4",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-50 dark:bg-gray-700 rounded-full flex items-center justify-center",children:t.jsx(x,{className:"w-8 h-8 text-gray-400 dark:text-gray-500"})}),t.jsx("p",{className:"text-lg text-gray-900 dark:text-gray-100 font-medium",children:"No tasks available"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Try refreshing the page or check back later"})]})})})}export{P as UpcomingPage};
