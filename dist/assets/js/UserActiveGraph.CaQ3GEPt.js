import{r as c,j as e}from"./index.XesvQHeF.js";import{A as y}from"./activity.DWU0Gfva.js";import{C as U}from"./calendar.ph3bPoRU.js";import{o as M,p as v,X as b,Y as w,q as L,R as S,r as T,T as F,s as Y}from"./generateCategoricalChart.xttvErWM.js";import{U as $}from"./users.NCImVSMY.js";import"./createLucideIcon.AVoNiTZs.js";import"./clsx.B-dksMZM.js";var E=M({chartName:"AreaChart",GraphicalChild:v,axisComponents:[{axisType:"xAxis",AxisComp:b},{axisType:"yAxis",AxisComp:w}],formatAxisMap:L});const J=({selected:l,onChange:a,isMobile:h})=>e.jsxs("div",{className:"flex items-center bg-white dark:bg-gray-800 rounded-lg p-1 w-full sm:w-auto justify-center sm:justify-start mt-3 sm:mt-0 shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("button",{className:`flex-1 sm:flex-initial px-3 sm:px-4 py-2 text-xs sm:text-sm rounded-md transition-all duration-300 ${l==="week"?"bg-blue-600 text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>a("week"),children:h?"7D":"Week"}),e.jsx("button",{className:`flex-1 sm:flex-initial px-3 sm:px-4 py-2 text-xs sm:text-sm rounded-md transition-all duration-300 ${l==="month"?"bg-blue-600 text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>a("month"),children:h?"30D":"Month"}),e.jsx("button",{className:`flex-1 sm:flex-initial px-3 sm:px-4 py-2 text-xs sm:text-sm rounded-md transition-all duration-300 ${l==="year"?"bg-blue-600 text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>a("year"),children:h?"1Y":"Year"})]});function q({users:l}){const[a,h]=c.useState("week"),[k,p]=c.useState(!1),[r,j]=c.useState(!1);c.useEffect(()=>{const s=()=>{j(window.innerWidth<640)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),c.useEffect(()=>{p(!0);const s=setTimeout(()=>{p(!1)},1500);return()=>clearTimeout(s)},[a]);const d=c.useMemo(()=>{const s=new Date,n=[];if(a==="week")for(let i=6;i>=0;i--){const t=new Date(s);t.setDate(t.getDate()-i);const o=t.toLocaleDateString("en-US",{weekday:r?"narrow":"short"}),m=l.filter(x=>x.lastActive?new Date(x.lastActive).toDateString()===t.toDateString():!1).length;n.push({name:o,activeUsers:m,date:new Date(t)})}else if(a==="month")for(let i=3;i>=0;i--){const t=new Date(s);t.setDate(t.getDate()-i*7);const o=new Date(t);o.setDate(o.getDate()-6);const m=4-i,x=r?`W${m}`:`Week ${m}`,u=l.filter(g=>{if(!g.lastActive)return!1;const f=new Date(g.lastActive);return f>=o&&f<=t}).length;n.push({name:x,activeUsers:u,date:new Date(o)})}else{const i=r?["J","F","M","A","M","J","J","A","S","O","N","D"]:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(let t=0;t<12;t++){const o=t,m=s.getFullYear(),x=new Date(m,o,1),u=l.filter(g=>{if(!g.lastActive)return!1;const f=new Date(g.lastActive);return f.getMonth()===o&&f.getFullYear()===m}).length;n.push({name:i[t],activeUsers:u,date:x})}}return n},[l,a,r]),A=({active:s,payload:n,label:i})=>{if(s&&n&&n.length){const t=n[0].payload;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-4 border border-gray-200 dark:border-gray-700 animate-scale-in",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:[e.jsx("span",{children:i}),t.date&&e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:new Date(t.date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center text-sm text-purple-600 dark:text-purple-400 font-semibold",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-purple-500 mr-2"}),e.jsxs("span",{children:["Active Users: ",n[0].value]})]})]})}return null},D=s=>{h(s)},N=c.useMemo(()=>{if(d.length===0)return 0;const s=d.reduce((n,i)=>n+i.activeUsers,0);return Math.round(s/d.length)},[d]),C=c.useMemo(()=>d.length===0?0:Math.max(...d.map(s=>s.activeUsers)),[d]);return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-5 sm:p-6 shadow-sm transition-all duration-300 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 dark:text-white flex items-center",children:[e.jsx(y,{className:"w-5 h-5 mr-2 text-purple-600 dark:text-purple-400"}),"User Activity Trends"]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 flex items-center",children:[e.jsx(U,{className:"w-3.5 h-3.5 mr-1.5 text-gray-400"}),e.jsx("span",{children:a==="week"?"Last 7 days":a==="month"?"Last 30 days":`${new Date().getFullYear()} overview`})]})]}),e.jsx(J,{selected:a,onChange:D,isMobile:r})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-850 rounded-xl p-4 mb-4",children:e.jsx("div",{className:`h-60 sm:h-[320px] ${r?"mx-[-0.5rem]":""}`,children:e.jsx(S,{width:"100%",height:"100%",children:e.jsxs(E,{data:d,margin:r?{top:15,right:5,left:0,bottom:10}:{top:20,right:20,left:10,bottom:10},children:[e.jsx(T,{stroke:"#e5e7eb",strokeDasharray:"5 5",vertical:!1,strokeOpacity:.6}),e.jsx(b,{dataKey:"name",tick:{fill:"#6b7280",fontSize:r?10:12},axisLine:{stroke:"#e5e7eb"},tickLine:{stroke:"#e5e7eb"},dy:10,angle:r?a==="year"?0:-45:0,textAnchor:r&&a!=="year"?"end":"middle",height:r?35:50,interval:r&&a==="year"?1:0}),e.jsx(w,{tick:{fill:"#6b7280",fontSize:r?10:12},axisLine:{stroke:"#e5e7eb"},tickLine:{stroke:"#e5e7eb"},width:r?30:40}),e.jsx(F,{content:A}),e.jsx(Y,{}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorActiveUsers",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]})}),e.jsx(v,{type:"monotone",dataKey:"activeUsers",stroke:"#8b5cf6",fillOpacity:1,fill:"url(#colorActiveUsers)",isAnimationActive:k,animationDuration:1500,name:"Active Users",strokeWidth:2,activeDot:{r:6,fill:"#8b5cf6",stroke:"#fff",strokeWidth:2}})]})})})}),e.jsx("div",{className:"mt-4 bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 overflow-hidden",children:e.jsx("div",{className:"px-5 py-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1 flex items-center",children:[e.jsx($,{className:"w-3.5 h-3.5 mr-1.5"}),"Average Active Users"]}),e.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:N})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1 flex items-center",children:[e.jsx(y,{className:"w-3.5 h-3.5 mr-1.5"}),"Peak Activity"]}),e.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:C})]})]})})})]})}export{q as UserActiveGraph};
