import{r as e,j as t,P as s,B as a,C as r}from"./react-vendor.DgFnvBtB.js";import{LucideTrendingUp as l,Info as d,ChevronLeft as n,ChevronRight as o,CheckCircle as i,AlertCircle as c,LucideXCircle as x,Edit as g,Calendar as m,Clock as h,Download as u,ListTodo as b,LucidePieChart as y,BarChart as p,LucideUsers as f,Briefcase as j,BarChart2 as k,BookOpen as w}from"./icons.DlZKCZEX.js";import{R as v,C as N,a as D,X as C,Y as S,T,L as M,B as A,b as F,c as B,A as L,d as U}from"./charts.DiHt8W5n.js";import{s as O}from"./index.MXmOjYcf.js";import{ab as W,ae as E,af as P,ag as $,ah as z,ai as G,aj as R,ak as I,al as H,am as Y}from"./vendor.D3HGyxIo.js";import"./capacitor-vendor.WkpnXCg6.js";import"./vercel-vendor.CLJgz5Z3.js";import"./ionic-vendor.CdMJr8wu.js";import"./supabase-vendor.CauTDQUf.js";const _=({selected:e,onChange:s,isMobile:a})=>t.jsxs("div",{className:"flex items-center bg-white dark:bg-gray-800 rounded-lg p-1 w-full sm:w-auto justify-center sm:justify-start mt-3 sm:mt-0 shadow-sm border border-gray-200 dark:border-gray-700",children:[t.jsx("button",{className:"flex-1 sm:flex-initial px-3 sm:px-4 py-2 text-xs sm:text-sm rounded-md transition-all duration-300 "+("week"===e?"bg-blue-600 text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),onClick:()=>s("week"),children:a?"7D":"Week"}),t.jsx("button",{className:"flex-1 sm:flex-initial px-3 sm:px-4 py-2 text-xs sm:text-sm rounded-md transition-all duration-300 "+("month"===e?"bg-blue-600 text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),onClick:()=>s("month"),children:a?"30D":"Month"}),t.jsx("button",{className:"flex-1 sm:flex-initial px-3 sm:px-4 py-2 text-xs sm:text-sm rounded-md transition-all duration-300 "+("year"===e?"bg-blue-600 text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),onClick:()=>s("year"),children:a?"1Y":"Year"})]}),J=e.memo((function({users:s,chartType:a="line",timeRange:r="year"}){const[n,o]=e.useState("year"),[i,c]=e.useState(!1),[x,g]=e.useState(null),[m,h]=e.useState(!0),[u,b]=e.useState(!1),[y,p]=e.useState(!1),f=e.useRef(null);e.useEffect((()=>{let e=null;const t=()=>{b(window.innerWidth<640)},s=()=>{e&&window.clearTimeout(e),e=window.setTimeout(t,150)};return t(),window.addEventListener("resize",s),()=>{e&&window.clearTimeout(e),window.removeEventListener("resize",s)}}),[]),e.useEffect((()=>{o("30days"===r||"6months"===r?"month":"year")}),[r]),e.useEffect((()=>{c(!0),h(!1);const e=window.setTimeout((()=>{c(!1)}),2e3);return()=>window.clearTimeout(e)}),[n]),e.useEffect((()=>{const e=e=>{f.current&&!f.current.contains(e.target)&&p(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]);const j=e.useMemo((()=>{const e=new Date,t=[];if("week"===n||"30days"===r)for(let l=("30days"===r?30:7)-1;l>=0;l--){const a=new Date(e);a.setDate(a.getDate()-l);const d="30days"===r?a.toLocaleDateString("en-US",{month:"short",day:"numeric"}):a.toLocaleDateString("en-US",{weekday:u?"narrow":"short"}),n=s.filter((e=>new Date(e.createdAt).toDateString()===a.toDateString())).length,o=new Date(a);o.setHours(0,0,0,0);const i=new Date(o);i.setDate(i.getDate()+1);const c=s.filter((e=>{if(!e.lastActive)return!1;const t=new Date(e.lastActive),s=new Date(t);return s.setHours(0,0,0,0),s.getTime()===o.getTime()})).length;t.push({name:d,users:0,newUsers:n,activeUsers:c,date:new Date(a)})}else if("month"===n)if("6months"===r)for(let r=5;r>=0;r--){const a=new Date(e);a.setMonth(a.getMonth()-r);const l=a.toLocaleDateString("en-US",{month:u?"short":"long"}),d=new Date(a.getFullYear(),a.getMonth(),1),n=new Date(a.getFullYear(),a.getMonth()+1,0),o=s.filter((e=>{const t=new Date(e.createdAt);return t>=d&&t<=n})).length,i=s.filter((e=>{if(!e.lastActive)return!1;const t=new Date(e.lastActive);return t.getFullYear()===d.getFullYear()&&t.getMonth()===d.getMonth()})).length;t.push({name:l,users:0,newUsers:o,activeUsers:i,date:new Date(d)})}else for(let r=3;r>=0;r--){const a=new Date(e);a.setDate(a.getDate()-7*r);const l=new Date(a);l.setDate(l.getDate()-6),l.setHours(0,0,0,0),a.setHours(23,59,59,999);const d=4-r,n=u?`W${d}`:`Week ${d}`,o=s.filter((e=>{const t=new Date(e.createdAt);return t>=l&&t<=a})).length,i=s.filter((e=>{if(!e.lastActive)return!1;const t=new Date(e.lastActive);return t>=l&&t<=a})).length;t.push({name:n,users:0,newUsers:o,activeUsers:i,date:new Date(l)})}else{const a=u?["J","F","M","A","M","J","J","A","S","O","N","D"]:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(let r=0;r<12;r++){const l=r,d=e.getFullYear(),n=new Date(d,l,1);new Date(d,l+1,0).setHours(23,59,59,999);const o=s.filter((e=>{const t=new Date(e.createdAt);return t.getMonth()===l&&t.getFullYear()===d})).length,i=s.filter((e=>{if(!e.lastActive)return!1;const t=new Date(e.lastActive);return t.getMonth()===l&&t.getFullYear()===d})).length;t.push({name:a[r],users:0,newUsers:o,activeUsers:i,date:new Date(n)})}}let a=0;if("week"===n||"30days"===r){const t=new Date(e);t.setDate(t.getDate()-("30days"===r?30:7)+1),t.setHours(0,0,0,0),a=s.filter((e=>new Date(e.createdAt)<t)).length}else if("month"===n)if("6months"===r){const t=new Date(e);t.setMonth(t.getMonth()-6),t.setDate(1),t.setHours(0,0,0,0),a=s.filter((e=>new Date(e.createdAt)<t)).length}else{const t=new Date(e);t.setDate(t.getDate()-28),t.setHours(0,0,0,0),a=s.filter((e=>new Date(e.createdAt)<t)).length}else{const t=new Date(e.getFullYear(),0,1);a=s.filter((e=>new Date(e.createdAt)<t)).length}return t.map((e=>(a+=e.newUsers||0,{...e,users:a})))}),[s,n,u,r]);e.useMemo((()=>{if(j.length<2)return[];const e=[],t=Math.max(5,Math.floor(.15*j.reduce(((e,t)=>e+(t.newUsers||0)),0)/j.length));for(let s=0;s<j.length;s++)(j[s].newUsers||0)>t&&e.push(s);return u&&e.length>3&&(e.sort(((e,t)=>(j[t].newUsers||0)-(j[e].newUsers||0))),e.splice(3)),e}),[j,u]),e.useMemo((()=>{if(j.length<2)return null;let e=0,t=0;for(let s=0;s<j.length;s++)(j[s].newUsers||0)>t&&(t=j[s].newUsers||0,e=s);return t>0?e:null}),[j]),e.useMemo((()=>j.reduce(((e,t)=>e+(t.newUsers||0)),0)),[j]);const k=({active:e,payload:s,label:a})=>e&&s&&s.length?t.jsxs("div",{className:`bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg ${u?"p-2 max-w-[200px]":"p-3"} shadow-lg`,children:[t.jsx("div",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1 sm:mb-2",children:a}),s.map(((e,s)=>{const a={"Total Users":"#3B82F6","New Registrations":"#10B981","Active Users":"#8B5CF6"}[e.name]||e.color;return t.jsxs("div",{className:"flex items-center justify-between gap-3 sm:gap-8 mb-1",children:[t.jsxs("span",{className:"flex items-center gap-1 sm:gap-2",children:[t.jsx("span",{className:"inline-block w-2 sm:w-3 h-2 sm:h-3 rounded-full",style:{backgroundColor:a}}),t.jsxs("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 truncate max-w-[90px] sm:max-w-full",children:[e.name,":"]})]}),t.jsx("span",{className:"text-xs font-semibold text-gray-900 dark:text-white",children:e.value.toLocaleString()})]},`item-${s}`)})),t.jsx("div",{className:"mt-1 sm:mt-2 pt-1 sm:pt-2 border-t border-gray-100 dark:border-gray-700",children:t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"week"===n?"Weekly Stats":"month"===n?"Monthly Stats":"Yearly Stats"})})]}):null,w=()=>"week"===n||"30days"===r?j.length-1:void 0,O=e=>{e&&void 0!==e.activeTooltipIndex&&g(e.activeTooltipIndex)},W=()=>{g(null)};return t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-md border border-gray-100 dark:border-gray-700 overflow-hidden",children:[t.jsx("div",{className:"px-4 sm:px-6 py-4 sm:py-5 border-b border-gray-100 dark:border-gray-700",children:t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-0",children:[t.jsxs("div",{className:"relative",children:[t.jsxs("h3",{className:"text-base font-medium text-gray-900 dark:text-white flex items-center",children:[t.jsx(l,{className:"w-4 sm:w-5 h-4 sm:h-5 mr-1.5 sm:mr-2 text-blue-600 dark:text-blue-400"}),"User Growth Trends",t.jsx("button",{ref:f,className:"ml-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",onClick:()=>p(!y),"aria-label":"Information about user growth",children:t.jsx(d,{className:"w-3.5 sm:w-4 h-3.5 sm:h-4"})})]}),y&&t.jsxs("div",{className:"absolute z-10 mt-2 w-60 sm:w-64 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-3 border border-gray-200 dark:border-gray-700 text-xs text-gray-600 dark:text-gray-300 animate-slide-in-right left-0 sm:left-auto",children:[t.jsx("p",{children:"This chart shows the total number of registered users over time, with the green line indicating new registrations within each period."}),t.jsx("p",{className:"mt-2",children:"Highlighted points show periods of significant growth."})]})]}),t.jsx(_,{selected:n,onChange:o,isMobile:u})]})}),t.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-5",children:t.jsx("div",{className:"bg-gray-50 dark:bg-gray-850 rounded-xl p-3 sm:p-5",children:t.jsx("div",{className:"h-60 sm:h-80 md:h-96 w-full",children:t.jsx(v,{width:"100%",height:"100%",children:"bar"===a?t.jsxs(N,{data:j,margin:{top:15,right:u?5:30,left:u?0:10,bottom:u?5:10},onMouseMove:O,onMouseLeave:W,children:[t.jsxs("defs",{children:[t.jsxs("linearGradient",{id:"colorUsers",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.3}),t.jsx("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:.05})]}),t.jsxs("linearGradient",{id:"colorActiveUsers",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:"#8B5CF6",stopOpacity:.3}),t.jsx("stop",{offset:"95%",stopColor:"#8B5CF6",stopOpacity:.05})]}),t.jsxs("linearGradient",{id:"colorNewUsers",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.3}),t.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:.05})]}),t.jsx("filter",{id:"shadow",height:"200%",children:t.jsx("feDropShadow",{dx:"0",dy:"3",stdDeviation:"3",floodOpacity:"0.1"})})]}),t.jsx(D,{strokeDasharray:"3 3",vertical:!1,stroke:"#E5E7EB",strokeOpacity:.5}),t.jsx(C,{dataKey:"name",tick:{fontSize:u?10:12,fill:"#6B7280"},axisLine:{stroke:"#E5E7EB",strokeOpacity:.6},tickLine:!1,padding:{left:5,right:5},interval:u?1:0}),t.jsx(S,{tick:{fontSize:u?10:12,fill:"#6B7280"},axisLine:!1,tickLine:!1,tickFormatter:e=>u&&e>999?`${(e/1e3).toFixed(0)}k`:e.toLocaleString(),width:u?30:40,domain:["auto","auto"],padding:{top:10,bottom:0}}),t.jsx(T,{content:t.jsx(k,{}),cursor:{stroke:"#9CA3AF",strokeWidth:1,strokeDasharray:"3 3"},wrapperStyle:{filter:"drop-shadow(0px 2px 8px rgba(0, 0, 0, 0.12))",borderRadius:"8px",overflow:"hidden",transition:"all 0.3s ease"}}),t.jsx(M,{verticalAlign:"top",height:30,iconType:"circle",iconSize:u?5:8,wrapperStyle:{paddingBottom:u?"5px":"15px",fontSize:u?"8px":"12px",color:"#6B7280"}}),t.jsx(A,{dataKey:"users",name:"Total Users",fill:"#3B82F6",radius:[4,4,0,0],barSize:"week"===n?12:24,isAnimationActive:i,animationDuration:2e3}),t.jsx(A,{dataKey:"newUsers",name:"New Registrations",fill:"#10B981",radius:[4,4,0,0],barSize:"week"===n?10:20,isAnimationActive:i,animationDuration:2e3}),t.jsx(A,{dataKey:"activeUsers",name:"Active Users",fill:"#8B5CF6",radius:[4,4,0,0],barSize:"week"===n?8:16,isAnimationActive:i,animationDuration:2e3}),null!==w()&&t.jsx(F,{x:w(),stroke:"#F59E0B",strokeWidth:2,strokeDasharray:"3 3",label:{value:"Today",position:"insideTopRight",fill:"#F59E0B",fontSize:12,fontWeight:500,dy:-8,dx:6}}),t.jsx(B,{dataKey:"name",height:20,stroke:"#3B82F6"})]}):t.jsxs(N,{data:j,margin:{top:15,right:u?5:30,left:u?0:10,bottom:u?5:10},onMouseMove:O,onMouseLeave:W,children:[t.jsxs("defs",{children:[t.jsxs("linearGradient",{id:"colorUsers",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.3}),t.jsx("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:.05})]}),t.jsxs("linearGradient",{id:"colorActiveUsers",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:"#8B5CF6",stopOpacity:.3}),t.jsx("stop",{offset:"95%",stopColor:"#8B5CF6",stopOpacity:.05})]}),t.jsxs("linearGradient",{id:"colorNewUsers",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.3}),t.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:.05})]}),t.jsx("filter",{id:"shadow",height:"200%",children:t.jsx("feDropShadow",{dx:"0",dy:"3",stdDeviation:"3",floodOpacity:"0.1"})})]}),t.jsx(D,{strokeDasharray:"3 3",vertical:!1,stroke:"#E5E7EB",strokeOpacity:.5}),t.jsx(C,{dataKey:"name",tick:{fontSize:u?10:12,fill:"#6B7280"},axisLine:{stroke:"#E5E7EB",strokeOpacity:.6},tickLine:!1,padding:{left:5,right:5},interval:u?1:0}),t.jsx(S,{tick:{fontSize:u?10:12,fill:"#6B7280"},axisLine:!1,tickLine:!1,tickFormatter:e=>u&&e>999?`${(e/1e3).toFixed(0)}k`:e.toLocaleString(),width:u?30:40,domain:["auto","auto"],padding:{top:10,bottom:0}}),t.jsx(T,{content:t.jsx(k,{}),cursor:{stroke:"#9CA3AF",strokeWidth:1,strokeDasharray:"3 3"},wrapperStyle:{filter:"drop-shadow(0px 2px 8px rgba(0, 0, 0, 0.12))",borderRadius:"8px",overflow:"hidden",transition:"all 0.3s ease"}}),t.jsx(M,{verticalAlign:"top",height:30,iconType:"circle",iconSize:u?5:8,wrapperStyle:{paddingBottom:u?"5px":"15px",fontSize:u?"8px":"12px",color:"#6B7280"}}),t.jsx(L,{type:"monotone",dataKey:"users",stroke:"#3B82F6",strokeWidth:2,fillOpacity:1,fill:"url(#colorUsers)",activeDot:{r:6,fill:"#3B82F6",stroke:"#fff",strokeWidth:2},isAnimationActive:i,animationDuration:2e3,name:"Total Users"}),null!==w()&&t.jsx(F,{x:w(),stroke:"#F59E0B",strokeWidth:2,strokeDasharray:"3 3",label:{value:"Today",position:"insideTopRight",fill:"#F59E0B",fontSize:12,fontWeight:500,dy:-8,dx:6}}),t.jsx(U,{type:"monotone",dataKey:"newUsers",name:"New Registrations",stroke:"#10B981",strokeWidth:2.5,dot:{r:3,fill:"#10B981",stroke:"#fff",strokeWidth:1.5},activeDot:{r:6,fill:"#10B981",stroke:"#fff",strokeWidth:2,filter:"url(#shadow)"},isAnimationActive:i,animationDuration:2e3}),t.jsx(U,{type:"monotone",dataKey:"activeUsers",name:"Active Users",stroke:"#8B5CF6",strokeWidth:2.5,dot:{r:3,fill:"#8B5CF6",stroke:"#fff",strokeWidth:1.5},activeDot:{r:6,fill:"#8B5CF6",stroke:"#fff",strokeWidth:2,filter:"url(#shadow)"},isAnimationActive:i,animationDuration:2e3})]})})})})})]})}));function K({tasks:s,onTaskUpdated:a}){const[r,l]=e.useState((new Date).toLocaleDateString("en-US",{month:"short"})),[d,h]=e.useState(new Date),[u,b]=e.useState(null),[y,p]=e.useState({}),[f,j]=e.useState(!1),[k,w]=e.useState(null),[v,N]=e.useState(s);e.useRef(null),e.useEffect((()=>{N(s)}),[s]);const D=d.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),C=(()=>{const e=[],t=new Date(d);for(let s=-2;s<=2;s++){const a=new Date(t);a.setDate(t.getDate()+s);const r=a.getDate(),l=a.toLocaleDateString("en-US",{weekday:"short"}),d=0===s;e.push({date:a,dayNum:r,dayName:l,isSelected:d})}return e})(),S=e=>{const t=new Date(d);"prev"===e?t.setDate(t.getDate()-1):t.setDate(t.getDate()+1),h(t)},T=v.filter((e=>new Date(e.dueDate).toDateString()===d.toDateString())).sort(((e,t)=>{const s={"in-progress":0,"my-tasks":1,completed:2};return s[e.status]-s[t.status]})),M=e=>{const{name:t,value:s}=e.target;p((e=>({...e,[t]:s})))},A=()=>{b(null),p({})},F=e=>{switch(e){case"in-progress":return t.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400 text-xs rounded-full",children:"In Progress"});case"completed":return t.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400 text-xs rounded-full",children:"Completed"});default:return t.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400 text-xs rounded-full",children:"To Do"})}};return t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-100 dark:border-gray-700 shadow-sm p-5 sm:p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-5",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Tasks Overview"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:r,onChange:e=>{l(e.target.value)},className:"appearance-none bg-gray-100 dark:bg-gray-700 border-0 rounded-md py-1.5 pl-3 pr-8 text-sm font-medium text-gray-800 dark:text-gray-200 cursor-pointer focus:ring-1 focus:ring-blue-500",children:[t.jsx("option",{value:"Jan",children:"Jan"}),t.jsx("option",{value:"Feb",children:"Feb"}),t.jsx("option",{value:"Mar",children:"Mar"}),t.jsx("option",{value:"Apr",children:"Apr"}),t.jsx("option",{value:"May",children:"May"}),t.jsx("option",{value:"Jun",children:"Jun"}),t.jsx("option",{value:"Jul",children:"Jul"}),t.jsx("option",{value:"Aug",children:"Aug"}),t.jsx("option",{value:"Sep",children:"Sep"}),t.jsx("option",{value:"Oct",children:"Oct"}),t.jsx("option",{value:"Nov",children:"Nov"}),t.jsx("option",{value:"Dec",children:"Dec"})]}),t.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-300",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),t.jsxs("div",{className:"mb-5",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("button",{onClick:()=>S("prev"),className:"p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:t.jsx(n,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})}),t.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:D}),t.jsx("button",{onClick:()=>S("next"),className:"p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:t.jsx(o,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),t.jsx("div",{className:"flex justify-between space-x-2",children:C.map(((e,s)=>t.jsxs("button",{onClick:()=>h(e.date),className:"flex-1 flex flex-col items-center justify-center p-2.5 rounded-lg transition-all "+(e.isSelected?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:[t.jsx("div",{className:"text-xs mb-1",children:e.dayName}),t.jsx("div",{className:"text-lg font-semibold "+(e.isSelected?"text-white":""),children:e.dayNum})]},s)))})]}),f&&t.jsxs("div",{className:"mb-4 p-2 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 rounded-lg text-sm flex items-center",children:[t.jsx(i,{className:"w-4 h-4 mr-2"}),"Task updated successfully!"]}),k&&t.jsxs("div",{className:"mb-4 p-2 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-lg text-sm flex items-center",children:[t.jsx(c,{className:"w-4 h-4 mr-2"}),k]}),t.jsx("div",{className:"space-y-4",children:T.length>0?T.map((e=>{let r="bg-blue-500";"in-progress"===e.status&&(r="bg-purple-500"),"completed"===e.status&&(r="bg-green-500");let l=0;"my-tasks"===e.status&&(l=25),"in-progress"===e.status&&(l=75),"completed"===e.status&&(l=100);const d=(e=>{const t=new Date(e),s=new Date;t.setHours(0,0,0,0),s.setHours(0,0,0,0);const a=t.getTime()-s.getTime();return Math.ceil(a/864e5)})(e.dueDate);return t.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-lg p-4 shadow-sm hover:shadow-md transition-all",children:u===e.id?t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Edit Task"}),t.jsx("div",{className:"flex gap-2",children:t.jsx("button",{onClick:()=>A(),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:t.jsx(x,{className:"w-5 h-5"})})})]}),t.jsx("div",{children:t.jsx("input",{type:"text",name:"name",value:y.name||"",onChange:M,className:"w-full px-3 py-2 text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Task name"})}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Status"}),t.jsxs("select",{name:"status",value:y.status||"",onChange:M,className:"w-full px-3 py-1.5 text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"my-tasks",children:"To Do"}),t.jsx("option",{value:"in-progress",children:"In Progress"}),t.jsx("option",{value:"completed",children:"Completed"})]})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Due Date"}),t.jsx("input",{type:"date",name:"dueDate",value:y.dueDate||"",onChange:M,className:"w-full px-3 py-1.5 text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500"})]})]}),t.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[t.jsx("button",{onClick:()=>A(),className:"px-3 py-1.5 border border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-300 rounded-lg text-sm hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),t.jsx("button",{onClick:()=>(async e=>{try{const t={...y};N((s=>s.map((s=>s.id===e?{...s,...t}:s))));const s=await async function(e,t){var s,a;try{const l={name:t.name,category:t.category,due_date:t.dueDate,description:t.description,status:t.status};let d,n;void 0!==t.googleDriveLinks&&(l.google_drive_links=t.googleDriveLinks);try{const t=await O.from("tasks").update(l).eq("id",e).select().single();d=t.data,n=t.error}catch(r){if(!(null==(s=r.message)?void 0:s.includes("google_drive_links"))&&!(null==(a=r.message)?void 0:a.includes("schema cache")))throw r;{const{google_drive_links:t,...s}=l,a=await O.from("tasks").update(s).eq("id",e).select().single();d=a.data,n=a.error}}if(n)throw new Error("Failed to update task");return function(e){return{id:e.id,name:e.name,category:e.category,dueDate:e.due_date,description:e.description,status:e.status,createdAt:e.created_at,isAdminTask:e.is_admin_task,googleDriveLinks:e.google_drive_links||[]}}(d)}catch(l){throw new Error("Failed to update task")}}(e,y);b(null),j(!0),setTimeout((()=>j(!1)),3e3),a&&s&&a(s)}catch(t){w("Failed to update task. Please try again."),setTimeout((()=>w(null)),3e3),N(s)}})(e.id),className:"px-3 py-1.5 bg-blue-500 text-white rounded-lg text-sm hover:bg-blue-600 transition-colors",children:"Save Changes"})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[F(e.status),t.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.category.charAt(0).toUpperCase()+e.category.slice(1).replace("-"," ")})]}),t.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:e.name})]}),t.jsx("button",{onClick:()=>(e=>{b(e.id),p({name:e.name,status:e.status,dueDate:e.dueDate,description:e.description,category:e.category})})(e),className:"text-gray-400 hover:text-blue-500 dark:hover:text-blue-400 transition-colors",children:t.jsx(g,{className:"w-4 h-4"})})]}),t.jsx("div",{className:"mt-3 w-full bg-gray-200 dark:bg-gray-600 rounded-full h-1.5",children:t.jsx("div",{className:`${r} h-1.5 rounded-full transition-all duration-500`,style:{width:`${l}%`}})}),t.jsxs("div",{className:"flex items-center justify-between text-xs mt-3 text-gray-500 dark:text-gray-400",children:[t.jsx("div",{className:"flex gap-3",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(m,{className:"w-3.5 h-3.5 mr-1 text-gray-400"}),t.jsx("span",{children:new Date(e.dueDate).toLocaleDateString()})]})}),t.jsx("div",{className:`\n                        ${d<0?"text-red-500 dark:text-red-400":d<=1?"text-orange-500 dark:text-orange-400":"text-gray-500 dark:text-gray-400"}\n                      `,children:d<0?`${Math.abs(d)} days overdue`:0===d?"Due today":1===d?"Due tomorrow":`${d} days left`})]})]})},e.id)})):t.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-gray-100 dark:border-gray-700",children:[t.jsx(m,{className:"w-12 h-12 mx-auto text-gray-300 dark:text-gray-600 mb-3"}),t.jsx("h3",{className:"text-gray-500 dark:text-gray-400 font-medium mb-1",children:"No tasks scheduled"}),t.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"There are no tasks scheduled for this day"})]})})]})}function q(e){const t=new Date;t.setHours(0,0,0,0);const s=new Date(e);return s.setHours(0,0,0,0),s<t}W.register(E,P,$,z,G,R,I,H,Y);const X={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:10,usePointStyle:!0,boxWidth:8}},tooltip:{padding:10,backgroundColor:"rgba(17, 24, 39, 0.9)",titleColor:"rgba(255, 255, 255, 0.9)",bodyColor:"rgba(255, 255, 255, 0.9)",displayColors:!0,boxPadding:4}}},Q=["rgba(59, 130, 246, 0.7)","rgba(16, 185, 129, 0.7)","rgba(245, 158, 11, 0.7)","rgba(239, 68, 68, 0.7)","rgba(168, 85, 247, 0.7)","rgba(79, 70, 229, 0.7)","rgba(236, 72, 153, 0.7)","rgba(249, 115, 22, 0.7)","rgba(20, 184, 166, 0.7)","rgba(6, 182, 212, 0.7)","rgba(16, 185, 129, 0.7)","rgba(132, 204, 22, 0.7)"],V={assignment:"Assignment",blc:"BLC",documents:"Documents","final-exam":"Final Exam",groups:"Groups","lab-final":"Lab Final","lab-performance":"Lab Performance","lab-report":"Lab Report",midterm:"Midterm",presentation:"Presentation",project:"Project",quiz:"Quiz",task:"Task",others:"Others"},Z=e.memo((({tasks:d})=>{const[n,o]=e.useState("category"),[x,g]=e.useState(!1),[f,j]=e.useState("all"),[k,w]=e.useState(!1),[v,N]=e.useState(!1),D=e.useRef(null),C=e.useMemo((()=>d.filter((e=>{if("all"===f)return!0;const t=new Date(e.createdAt),s=((new Date).getTime()-t.getTime())/864e5;return"30days"===f&&s<=30||"7days"===f&&s<=7}))),[d,f]),S=e.useMemo((()=>({todo:C.filter((e=>"my-tasks"===e.status&&!q(e.dueDate))).length,inProgress:C.filter((e=>"in-progress"===e.status&&!q(e.dueDate))).length,completed:C.filter((e=>"completed"===e.status)).length,overdue:C.filter((e=>q(e.dueDate)&&"completed"!==e.status)).length})),[C]),T=e.useMemo((()=>{const e={};return C.forEach((t=>{e[t.category]||(e[t.category]=0),e[t.category]++})),e}),[C]),M=e.useMemo((()=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),s=new Date(t);s.setDate(s.getDate()+1);const a=new Date(t);return a.setDate(a.getDate()+7),{today:C.filter((e=>{try{return new Date(e.dueDate).toDateString()===t.toDateString()}catch(s){return!1}})).length,tomorrow:C.filter((e=>{try{return new Date(e.dueDate).toDateString()===s.toDateString()}catch(t){return!1}})).length,thisWeek:C.filter((e=>{try{const s=new Date(e.dueDate);return s>t&&s<a}catch(s){return!1}})).length,later:C.filter((e=>{try{return new Date(e.dueDate)>=a}catch(t){return!1}})).length,overdue:C.filter((e=>{try{return new Date(e.dueDate)<t&&"completed"!==e.status}catch(s){return!1}})).length}}),[C]),A=e.useMemo((()=>C.length>0?Math.round(S.completed/C.length*100):0),[C.length,S.completed]),F=e.useCallback((e=>V[e]||e.charAt(0).toUpperCase()+e.slice(1).replace(/-/g," ")),[]),B=e.useCallback((e=>0===C.length?0:Math.round(e/C.length*100)),[C.length]);e.useCallback((e=>({todo:"bg-blue-500",inProgress:"bg-yellow-500",completed:"bg-green-500",overdue:"bg-red-500"}[e]||"bg-gray-500")),[]),e.useCallback((e=>({today:"bg-red-500",tomorrow:"bg-orange-500",thisWeek:"bg-yellow-500",later:"bg-blue-500",overdue:"bg-purple-500"}[e]||"bg-gray-500")),[]);const L=e.useCallback((e=>{const t=["bg-blue-500","bg-green-500","bg-yellow-500","bg-red-500","bg-purple-500","bg-indigo-500","bg-pink-500","bg-orange-500","bg-teal-500","bg-cyan-500","bg-emerald-500","bg-lime-500"];return t[e%t.length]}),[]),U=e.useMemo((()=>({labels:["To Do","In Progress","Completed","Overdue"],datasets:[{data:[S.todo,S.inProgress,S.completed,S.overdue],backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(245, 158, 11, 0.8)","rgba(16, 185, 129, 0.8)","rgba(239, 68, 68, 0.8)"],borderColor:["rgba(37, 99, 235, 1)","rgba(217, 119, 6, 1)","rgba(5, 150, 105, 1)","rgba(220, 38, 38, 1)"],borderWidth:1}]})),[S]),O=e.useMemo((()=>{const e=Object.keys(T).map((e=>F(e)));return{labels:e,datasets:[{label:"Tasks by Category",data:Object.values(T),backgroundColor:e.map(((e,t)=>Q[t%Q.length])),borderWidth:1}]}}),[T,F]),W=e.useMemo((()=>({labels:["Today","Tomorrow","This Week","Later","Overdue"],datasets:[{label:"Tasks by Timeline",data:[M.today,M.tomorrow,M.thisWeek,M.later,M.overdue],backgroundColor:["rgba(239, 68, 68, 0.7)","rgba(249, 115, 22, 0.7)","rgba(245, 158, 11, 0.7)","rgba(59, 130, 246, 0.7)","rgba(168, 85, 247, 0.7)"],borderWidth:1}]})),[M]);e.useMemo((()=>{const e=[["Status","Count","Percentage"],["To Do",S.todo,B(S.todo)+"%"],["In Progress",S.inProgress,B(S.inProgress)+"%"],["Completed",S.completed,B(S.completed)+"%"],["Overdue",S.overdue,B(S.overdue)+"%"],["Total",C.length,"100%"]],t=Object.entries(T).map((([e,t])=>[F(e),t,B(t)+"%"]));return t.unshift(["Category","Count","Percentage"]),{statusData:e,categoryData:t,timelineData:[["Timeline","Count","Percentage"],["Today",M.today,B(M.today)+"%"],["Tomorrow",M.tomorrow,B(M.tomorrow)+"%"],["This Week",M.thisWeek,B(M.thisWeek)+"%"],["Later",M.later,B(M.later)+"%"],["Overdue",M.overdue,B(M.overdue)+"%"],["Total",C.length,"100%"]]}}),[S,T,M,C.length,B,F]),e.useEffect((()=>{g(!1);const e=setTimeout((()=>{g(!0)}),50);return()=>clearTimeout(e)}),[n,f]),e.useEffect((()=>{if(v){const e=setTimeout((()=>{window.print(),N(!1)}),300);return()=>clearTimeout(e)}}),[v]),e.useCallback((()=>{N(!0)}),[]),e.useCallback((()=>(w(!0),setTimeout((()=>w(!1)),500),!0)),[]);const E=e.useCallback((e=>{j(e),g(!1),setTimeout((()=>{g(!0)}),100)}),[]);e.useCallback((e=>{o(e)}),[]),e.useMemo((()=>t.jsxs("div",{className:"space-y-3 xs:space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h4",{className:"text-xs xs:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status Distribution"}),t.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 py-0.5 xs:py-1 px-1.5 xs:px-2 rounded-md",children:t.jsxs("span",{className:"text-[10px] xs:text-xs font-medium text-blue-600 dark:text-blue-400 flex items-center",children:[t.jsx(l,{className:"w-2.5 h-2.5 xs:w-3 xs:h-3 mr-0.5 xs:mr-1"}),A,"% Complete"]})})]}),t.jsx("div",{className:"hidden sm:block",children:t.jsx("div",{className:"h-[280px] w-full",children:t.jsx(s,{data:U,options:X})})}),t.jsx("div",{className:"sm:hidden flex items-center justify-center h-40 sm:h-44 md:h-48 relative",children:t.jsxs("div",{className:"relative w-24 h-24 xs:w-28 xs:h-28 sm:w-32 sm:h-32 md:w-36 md:h-36",children:[t.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full filter drop-shadow-md","aria-hidden":"true",children:[t.jsx("circle",{cx:"50",cy:"50",r:"38",fill:"none",stroke:"#e5e7eb",strokeWidth:"15",className:"dark:stroke-gray-700"}),C.length>0&&t.jsxs(t.Fragment,{children:[S.todo>0&&t.jsx("circle",{cx:"50",cy:"50",r:"38",fill:"none",stroke:"url(#status-blueGradient)",strokeWidth:"15",strokeDasharray:S.todo/C.length*238.8+" 238.8",strokeDashoffset:"0",transform:"rotate(-90 50 50)",style:{transition:"stroke-dasharray 0.7s ease-out"}}),S.inProgress>0&&t.jsx("circle",{cx:"50",cy:"50",r:"38",fill:"none",stroke:"url(#status-yellowGradient)",strokeWidth:"15",strokeDasharray:S.inProgress/C.length*238.8+" 238.8",strokeDashoffset:""+-S.todo/C.length*238.8,transform:"rotate(-90 50 50)",style:{transition:"stroke-dasharray 0.7s ease-out"}}),S.completed>0&&t.jsx("circle",{cx:"50",cy:"50",r:"38",fill:"none",stroke:"url(#status-greenGradient)",strokeWidth:"15",strokeDasharray:S.completed/C.length*238.8+" 238.8",strokeDashoffset:""+-(S.todo+S.inProgress)/C.length*238.8,transform:"rotate(-90 50 50)",style:{transition:"stroke-dasharray 0.7s ease-out"}}),S.overdue>0&&t.jsx("circle",{cx:"50",cy:"50",r:"38",fill:"none",stroke:"url(#status-redGradient)",strokeWidth:"15",strokeDasharray:S.overdue/C.length*238.8+" 238.8",strokeDashoffset:""+-(S.todo+S.inProgress+S.completed)/C.length*238.8,transform:"rotate(-90 50 50)",style:{transition:"stroke-dasharray 0.7s ease-out"}})]}),t.jsxs("defs",{children:[t.jsxs("linearGradient",{id:"status-blueGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[t.jsx("stop",{offset:"0%",stopColor:"#3b82f6"}),t.jsx("stop",{offset:"100%",stopColor:"#2563eb"})]}),t.jsxs("linearGradient",{id:"status-yellowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[t.jsx("stop",{offset:"0%",stopColor:"#f59e0b"}),t.jsx("stop",{offset:"100%",stopColor:"#d97706"})]}),t.jsxs("linearGradient",{id:"status-greenGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[t.jsx("stop",{offset:"0%",stopColor:"#10b981"}),t.jsx("stop",{offset:"100%",stopColor:"#059669"})]}),t.jsxs("linearGradient",{id:"status-redGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[t.jsx("stop",{offset:"0%",stopColor:"#ef4444"}),t.jsx("stop",{offset:"100%",stopColor:"#dc2626"})]})]})]}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsxs("div",{className:"text-center bg-white dark:bg-gray-800 rounded-full w-14 h-14 xs:w-16 xs:h-16 sm:w-18 sm:h-18 md:w-20 md:h-20 flex flex-col items-center justify-center shadow-inner",children:[t.jsx("span",{className:"block text-base xs:text-lg sm:text-xl md:text-2xl font-bold text-gray-800 dark:text-white",children:C.length}),t.jsx("span",{className:"text-[8px] xs:text-[10px] sm:text-xs text-gray-500 dark:text-gray-400",children:"Tasks"})]})})]})}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 xs:gap-3 mt-2",children:[t.jsxs("div",{className:"flex flex-col items-center p-1.5 xs:p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[t.jsx("div",{className:"bg-blue-500 w-2.5 h-2.5 xs:w-3 xs:h-3 rounded-full mb-0.5 xs:mb-1"}),t.jsx("span",{className:"text-[10px] xs:text-xs font-medium text-gray-700 dark:text-gray-300 text-center",children:"To Do"}),t.jsx("span",{className:"text-xs xs:text-sm font-bold text-gray-800 dark:text-white",children:S.todo}),t.jsxs("span",{className:"text-[8px] xs:text-[10px] text-blue-600 dark:text-blue-400",children:[B(S.todo),"%"]})]}),t.jsxs("div",{className:"flex flex-col items-center p-1.5 xs:p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[t.jsx("div",{className:"bg-yellow-500 w-2.5 h-2.5 xs:w-3 xs:h-3 rounded-full mb-0.5 xs:mb-1"}),t.jsx("span",{className:"text-[10px] xs:text-xs font-medium text-gray-700 dark:text-gray-300 text-center",children:"In Progress"}),t.jsx("span",{className:"text-xs xs:text-sm font-bold text-gray-800 dark:text-white",children:S.inProgress}),t.jsxs("span",{className:"text-[8px] xs:text-[10px] text-yellow-600 dark:text-yellow-400",children:[B(S.inProgress),"%"]})]}),t.jsxs("div",{className:"flex flex-col items-center p-1.5 xs:p-2 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[t.jsx("div",{className:"bg-red-500 w-2.5 h-2.5 xs:w-3 xs:h-3 rounded-full mb-0.5 xs:mb-1"}),t.jsx("span",{className:"text-[10px] xs:text-xs font-medium text-gray-700 dark:text-gray-300 text-center",children:"Due Tasks"}),t.jsx("span",{className:"text-xs xs:text-sm font-bold text-gray-800 dark:text-white",children:S.overdue}),t.jsxs("span",{className:"text-[8px] xs:text-[10px] text-red-600 dark:text-red-400",children:[B(S.overdue),"%"]})]}),t.jsxs("div",{className:"flex flex-col items-center p-1.5 xs:p-2 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[t.jsx("div",{className:"bg-green-500 w-2.5 h-2.5 xs:w-3 xs:h-3 rounded-full mb-0.5 xs:mb-1"}),t.jsx("span",{className:"text-[10px] xs:text-xs font-medium text-gray-700 dark:text-gray-300 text-center",children:"Completed"}),t.jsx("span",{className:"text-xs xs:text-sm font-bold text-gray-800 dark:text-white",children:S.completed}),t.jsxs("span",{className:"text-[8px] xs:text-[10px] text-green-600 dark:text-green-400",children:[B(S.completed),"%"]})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[t.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Progress"}),t.jsxs("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:[A,"% Complete"]})]}),t.jsx("div",{className:"h-2 w-full bg-gray-100 dark:bg-gray-700 rounded-full relative overflow-hidden",children:t.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 via-yellow-500 to-green-500 rounded-full",style:{width:`${A}%`,transition:"width 1s ease-out"}})})]})]})),[U,A,S,C.length,B]),e.useMemo((()=>t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Category Distribution"}),t.jsxs("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:[Object.keys(T).length," categories"]})]}),t.jsx("div",{className:"h-[350px] w-full",children:t.jsx(a,{data:O,options:{...X,indexAxis:"y",plugins:{...X.plugins,legend:{display:!1}},scales:{y:{grid:{display:!1}},x:{grid:{color:"rgba(156, 163, 175, 0.1)"}}}}})}),t.jsx("div",{className:"max-h-[180px] overflow-y-auto pr-1 custom-scrollbar mt-3",children:t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2",children:Object.entries(T).sort(((e,t)=>t[1]-e[1])).map((([e,s],a)=>t.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/80 p-2 rounded-lg border border-gray-100 dark:border-gray-700 shadow-sm hover:shadow-md transition-all duration-200",children:t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${L(a)} mr-2`}),t.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 truncate max-w-[130px]",children:F(e)})]}),t.jsxs("div",{className:"flex items-center bg-white dark:bg-gray-700 px-1.5 py-0.5 rounded-md shadow-sm",children:[t.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mr-1",children:s}),t.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:["(",B(s),"%)"]})]})]})},e)))})})]})),[O,T,F,L,B]),e.useMemo((()=>t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Due Date Distribution"}),M.overdue>0&&t.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 py-1 px-2 rounded-md",children:t.jsxs("span",{className:"text-xs font-medium text-red-600 dark:text-red-400 flex items-center",children:[t.jsx(c,{className:"w-3 h-3 mr-1"}),M.overdue," Overdue"]})})]}),t.jsx("div",{className:"h-[280px] w-full",children:t.jsx(a,{data:W,options:{...X,plugins:{...X.plugins,legend:{display:!1}}}})}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 mt-2",children:[t.jsx("div",{className:"bg-gradient-to-br from-red-50 to-red-100/50 dark:from-red-900/20 dark:to-red-900/10 p-3 rounded-lg border border-red-100 dark:border-red-900/30 shadow-sm",children:t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(m,{className:"w-4 h-4 text-red-500 dark:text-red-400 mr-1.5"}),t.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Today"})]}),t.jsx("span",{className:"text-base font-bold text-gray-800 dark:text-white",children:M.today})]})}),t.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100/50 dark:from-orange-900/20 dark:to-orange-900/10 p-3 rounded-lg border border-orange-100 dark:border-orange-900/30 shadow-sm",children:t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(m,{className:"w-4 h-4 text-orange-500 dark:text-orange-400 mr-1.5"}),t.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Tomorrow"})]}),t.jsx("span",{className:"text-base font-bold text-gray-800 dark:text-white",children:M.tomorrow})]})}),t.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100/50 dark:from-yellow-900/20 dark:to-yellow-900/10 p-3 rounded-lg border border-yellow-100 dark:border-yellow-900/30 shadow-sm",children:t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(m,{className:"w-4 h-4 text-yellow-500 dark:text-yellow-400 mr-1.5"}),t.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"This Week"})]}),t.jsx("span",{className:"text-base font-bold text-gray-800 dark:text-white",children:M.thisWeek})]})}),t.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100/50 dark:from-blue-900/20 dark:to-blue-900/10 p-3 rounded-lg border border-blue-100 dark:border-blue-900/30 shadow-sm",children:t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(m,{className:"w-4 h-4 text-blue-500 dark:text-blue-400 mr-1.5"}),t.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Later"})]}),t.jsx("span",{className:"text-base font-bold text-gray-800 dark:text-white",children:M.later})]})}),t.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100/50 dark:from-purple-900/20 dark:to-purple-900/10 p-3 rounded-lg border border-purple-100 dark:border-purple-900/30 shadow-sm",children:t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(h,{className:"w-4 h-4 text-purple-500 dark:text-purple-400 mr-1.5"}),t.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Overdue"})]}),t.jsx("span",{className:"text-base font-bold text-gray-800 dark:text-white",children:M.overdue})]})})]})]})),[W,M]);const P=e.useCallback((()=>({labels:Object.keys(T).map(F),datasets:[{label:"Tasks by Category",data:Object.values(T),backgroundColor:Object.keys(T).map(((e,t)=>Q[t%Q.length])),borderWidth:1}]})),[T,F]),$=e.useCallback((()=>({labels:["To Do","In Progress","Completed","Overdue"],datasets:[{label:"Tasks by Status",data:[S.todo,S.inProgress,S.completed,S.overdue],backgroundColor:["rgba(59, 130, 246, 0.7)","rgba(245, 158, 11, 0.7)","rgba(16, 185, 129, 0.7)","rgba(239, 68, 68, 0.7)"],borderWidth:1}]})),[S]),z=e.useCallback((()=>({labels:["Today","Tomorrow","This Week","Later","Overdue"],datasets:[{label:"Task Timeline",data:[M.today,M.tomorrow,M.thisWeek,M.later,M.overdue],backgroundColor:["rgba(239, 68, 68, 0.7)","rgba(245, 158, 11, 0.7)","rgba(249, 115, 22, 0.7)","rgba(59, 130, 246, 0.7)","rgba(168, 85, 247, 0.7)"],borderWidth:1}]})),[M]),G=e.useCallback((()=>{const e=[];return e.push(["Status","Count","Percentage"]),e.push(["To Do",S.todo,`${B(S.todo)}%`]),e.push(["In Progress",S.inProgress,`${B(S.inProgress)}%`]),e.push(["Completed",S.completed,`${B(S.completed)}%`]),e.push(["Overdue",S.overdue,`${B(S.overdue)}%`]),e.push([]),e.push(["Category","Count","Percentage"]),Object.entries(T).forEach((([t,s])=>{e.push([F(t),s,`${B(s)}%`])})),e.push([]),e.push(["Timeline","Count","Percentage"]),e.push(["Today",M.today,`${B(M.today)}%`]),e.push(["Tomorrow",M.tomorrow,`${B(M.tomorrow)}%`]),e.push(["This Week",M.thisWeek,`${B(M.thisWeek)}%`]),e.push(["Later",M.later,`${B(M.later)}%`]),e.push(["Overdue",M.overdue,`${B(M.overdue)}%`]),e}),[S,T,M,B,F]);return t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden",ref:D,children:[t.jsx("div",{className:"p-3 sm:p-4 border-b border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap items-center justify-between gap-3",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:"Task Analytics"}),t.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:[C.length," tasks ","all"!==f?"7days"===f?"(last 7 days)":"(last 30 days)":""]})]}),t.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:[t.jsxs("div",{className:"inline-flex rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[t.jsx("button",{onClick:()=>E("all"),className:"px-2 sm:px-3 py-1 text-xs sm:text-sm "+("all"===f?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),children:"All Time"}),t.jsx("button",{onClick:()=>E("30days"),className:"px-2 sm:px-3 py-1 text-xs sm:text-sm "+("30days"===f?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),children:"30 Days"}),t.jsx("button",{onClick:()=>E("7days"),className:"px-2 sm:px-3 py-1 text-xs sm:text-sm "+("7days"===f?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),children:"7 Days"})]}),t.jsx("div",{className:"inline-flex text-xs sm:text-sm",children:t.jsxs(r,{data:G(),filename:`task-stats-${(new Date).toISOString().slice(0,10)}.csv`,className:"px-2 sm:px-3 py-1 rounded-lg bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 border border-gray-200 dark:border-gray-700 inline-flex items-center gap-1",children:[t.jsx(u,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5"}),t.jsx("span",{className:"hidden sm:inline",children:"Export"})]})})]})]})}),t.jsxs("div",{className:"p-3 sm:p-4",children:[t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-4 mb-4",children:[t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 p-3 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"To Do"}),t.jsx("h4",{className:"text-lg sm:text-xl font-bold text-blue-600 dark:text-blue-400",children:S.todo})]}),t.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800/30 rounded-full",children:t.jsx(b,{className:"w-3.5 h-3.5 sm:w-5 sm:h-5 text-blue-600 dark:text-blue-400"})})]}),t.jsxs("div",{className:"mt-2",children:[t.jsx("div",{className:"w-full bg-blue-200 dark:bg-blue-800/20 rounded-full h-1.5",children:t.jsx("div",{className:"bg-blue-600 dark:bg-blue-500 h-1.5 rounded-full",style:{width:`${B(S.todo)}%`}})}),t.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[B(S.todo),"% of total"]})]})]}),t.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/10 p-3 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"In Progress"}),t.jsx("h4",{className:"text-lg sm:text-xl font-bold text-yellow-600 dark:text-yellow-400",children:S.inProgress})]}),t.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-800/30 rounded-full",children:t.jsx(h,{className:"w-3.5 h-3.5 sm:w-5 sm:h-5 text-yellow-600 dark:text-yellow-400"})})]}),t.jsxs("div",{className:"mt-2",children:[t.jsx("div",{className:"w-full bg-yellow-200 dark:bg-yellow-800/20 rounded-full h-1.5",children:t.jsx("div",{className:"bg-yellow-600 dark:bg-yellow-500 h-1.5 rounded-full",style:{width:`${B(S.inProgress)}%`}})}),t.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[B(S.inProgress),"% of total"]})]})]}),t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/10 p-3 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Completed"}),t.jsx("h4",{className:"text-lg sm:text-xl font-bold text-green-600 dark:text-green-400",children:S.completed})]}),t.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-800/30 rounded-full",children:t.jsx(i,{className:"w-3.5 h-3.5 sm:w-5 sm:h-5 text-green-600 dark:text-green-400"})})]}),t.jsxs("div",{className:"mt-2",children:[t.jsx("div",{className:"w-full bg-green-200 dark:bg-green-800/20 rounded-full h-1.5",children:t.jsx("div",{className:"bg-green-600 dark:bg-green-500 h-1.5 rounded-full",style:{width:`${B(S.completed)}%`}})}),t.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[B(S.completed),"% of total"]})]})]}),t.jsxs("div",{className:"bg-red-50 dark:bg-red-900/10 p-3 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Overdue"}),t.jsx("h4",{className:"text-lg sm:text-xl font-bold text-red-600 dark:text-red-400",children:S.overdue})]}),t.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-800/30 rounded-full",children:t.jsx(c,{className:"w-3.5 h-3.5 sm:w-5 sm:h-5 text-red-600 dark:text-red-400"})})]}),t.jsxs("div",{className:"mt-2",children:[t.jsx("div",{className:"w-full bg-red-200 dark:bg-red-800/20 rounded-full h-1.5",children:t.jsx("div",{className:"bg-red-600 dark:bg-red-500 h-1.5 rounded-full",style:{width:`${B(S.overdue)}%`}})}),t.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[B(S.overdue),"% of total"]})]})]})]}),t.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 mb-4",children:[t.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[t.jsxs("button",{className:"px-2.5 py-1.5 text-xs sm:text-sm rounded-lg flex items-center gap-1.5 "+("category"===n?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"),onClick:()=>o("category"),children:[t.jsx(y,{className:"w-3.5 h-3.5"}),t.jsx("span",{children:"By Category"})]}),t.jsxs("button",{className:"px-2.5 py-1.5 text-xs sm:text-sm rounded-lg flex items-center gap-1.5 "+("status"===n?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"),onClick:()=>o("status"),children:[t.jsx(p,{className:"w-3.5 h-3.5"}),t.jsx("span",{children:"By Status"})]}),t.jsxs("button",{className:"px-2.5 py-1.5 text-xs sm:text-sm rounded-lg flex items-center gap-1.5 "+("timeline"===n?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"),onClick:()=>o("timeline"),children:[t.jsx(m,{className:"w-3.5 h-3.5"}),t.jsx("span",{children:"Timeline"})]})]}),t.jsxs("div",{className:"h-60 sm:h-72",children:["category"===n&&t.jsx(t.Fragment,{children:Object.keys(T).length>0?t.jsx("div",{className:"h-full",children:t.jsx(s,{data:P(),options:X})}):t.jsx("div",{className:"h-full flex items-center justify-center",children:t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No category data available"})})}),"status"===n&&t.jsx(t.Fragment,{children:C.length>0?t.jsx("div",{className:"h-full",children:t.jsx(a,{data:$(),options:X})}):t.jsx("div",{className:"h-full flex items-center justify-center",children:t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No status data available"})})}),"timeline"===n&&t.jsx(t.Fragment,{children:C.length>0?t.jsx("div",{className:"h-full",children:t.jsx(a,{data:z(),options:X})}):t.jsx("div",{className:"h-full flex items-center justify-center",children:t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No timeline data available"})})})]})]})]})]})}));Z.displayName="TaskStats";const ee=e.memo((function({users:s,tasks:a}){const[r,d]=e.useState("All"),[n,o]=e.useState(""),[i,c]=e.useState(""),[x,g]=e.useState(""),[m,u]=e.useState(!1);e.useState("Monthly");const[b,p]=e.useState("line"),[v,N]=e.useState("6months"),[D,C]=e.useState(null),[S,T]=e.useState("all"),[M,A]=e.useState(!1),[F,B]=e.useState({x:0,y:0}),[L,U]=e.useState(null);e.useState({totalUsers:0,activeToday:0,newThisWeek:0});const[O,W]=e.useState(a),[E,P]=e.useState(!1);e.useEffect((()=>{const e=()=>{u(window.innerWidth<640)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),e.useEffect((()=>{const e=new Date;c(e.toLocaleDateString("en-US",{month:"long"}));const t={weekday:m?"short":"long",year:"numeric",month:m?"short":"long",day:"numeric"};o(e.toLocaleDateString("en-US",t));const s=e.getHours();let a="";a=s<12?"Good Morning":s<18?"Good Afternoon":"Good Evening",g(a)}),[m]),e.useEffect((()=>{W(a)}),[a]),e.useMemo((()=>"All"===r?s:s.filter((e=>e.role===r.toLowerCase()))),[r,s]),e.useMemo((()=>s.find((e=>"admin"===e.role))),[s]);const{activeUsers:$,activePercentage:z,newUsersThisWeek:G}=e.useMemo((()=>{const e=s.filter((e=>e.lastActive)).length;return{activeUsers:e,activePercentage:Math.round(e/s.length*100)||0,newUsersThisWeek:s.filter((e=>{const t=new Date;return t.setDate(t.getDate()-7),new Date(e.createdAt)>=t})).length}}),[s]);e.useMemo((()=>({completionRate:O.length?Math.round(O.filter((e=>"completed"===e.status)).length/O.length*100):0,completionTrend:"+8%"})),[O]),e.useMemo((()=>O.reduce(((e,t)=>(e[t.category]=(e[t.category]||0)+1,e)),{})),[O]);const R=e.useMemo((()=>{const e=new Date;switch(S){case"week":const t=new Date;return t.setDate(e.getDate()-7),O.filter((e=>new Date(e.createdAt)>=t));case"month":const s=new Date;return s.setMonth(e.getMonth()-1),O.filter((e=>new Date(e.createdAt)>=s));default:return O}}),[O,S]),I=e.useMemo((()=>R.reduce(((e,t)=>(e[t.category]=(e[t.category]||0)+1,e)),{})),[R]),H=e.useCallback((e=>{W((t=>t.map((t=>t.id===e.id?e:t))))}),[]);return t.jsxs("div",{className:"space-y-6 pb-8",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-5",children:[t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-100 dark:border-gray-700 p-5 shadow-sm hover:shadow-md transition-shadow duration-200",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Users"}),t.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:s.length})]}),t.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-50 dark:bg-blue-900/10 flex items-center justify-center shadow-sm",children:t.jsx(f,{className:"w-5 h-5 text-blue-500 dark:text-blue-400"})})]})}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-100 dark:border-gray-700 p-5 shadow-sm hover:shadow-md transition-shadow duration-200",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Active Today"}),t.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:$})]}),t.jsx("div",{className:"w-12 h-12 rounded-full bg-green-50 dark:bg-green-900/10 flex items-center justify-center shadow-sm",children:t.jsx(f,{className:"w-5 h-5 text-green-500 dark:text-green-400"})})]})}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-100 dark:border-gray-700 p-5 shadow-sm hover:shadow-md transition-shadow duration-200",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"New This Week"}),t.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:G})]}),t.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-50 dark:bg-purple-900/10 flex items-center justify-center shadow-sm",children:t.jsx(h,{className:"w-5 h-5 text-purple-500 dark:text-purple-400"})})]})}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-100 dark:border-gray-700 p-5 shadow-sm hover:shadow-md transition-shadow duration-200",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Tasks"}),t.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:O.length})]}),t.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-50 dark:bg-indigo-900/10 flex items-center justify-center shadow-sm",children:t.jsx(j,{className:"w-5 h-5 text-indigo-500 dark:text-indigo-400"})})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"User Analytics"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Track user growth and activities"})]}),t.jsxs("div",{className:"flex justify-end items-center gap-2 mt-2 sm:mt-0",children:[t.jsx("button",{className:`p-2 rounded-lg ${"bar"===b?"bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"} transition-colors`,onClick:()=>p("bar"),title:"Bar Chart",children:t.jsx(k,{className:"w-4 h-4"})}),t.jsx("button",{className:`p-2 rounded-lg ${"line"===b?"bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"} transition-colors`,onClick:()=>p("line"),title:"Line Chart",children:t.jsx(l,{className:"w-4 h-4"})}),t.jsxs("select",{className:"ml-2 text-sm bg-gray-100 dark:bg-gray-800 border-none rounded-lg text-gray-600 dark:text-gray-300 p-2 focus:ring-blue-500 focus:border-blue-500",value:v,onChange:e=>N(e.target.value),children:[t.jsx("option",{value:"year",children:"Last 12 months"}),t.jsx("option",{value:"6months",children:"Last 6 months"}),t.jsx("option",{value:"30days",children:"Last 30 days"})]})]})]}),t.jsx(J,{users:s,chartType:b,timeRange:v})]}),t.jsx("div",{className:"lg:col-span-1 animate-slide-up",style:{animationDelay:"0.3s"},children:E?t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-100 dark:border-gray-700 shadow-sm p-5 sm:p-6 h-[560px] flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):t.jsx(K,{tasks:O,onTaskUpdated:H})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm p-5 sm:p-6 animate-fade-in",style:{animationDelay:"0.5s"},children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Task Categories"}),t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Distribution of tasks by category","week"===S?" (Last 7 days)":"month"===S?" (Last 30 days)":" (All time)"]})]}),t.jsx("div",{className:"mt-2 sm:mt-0 flex items-center gap-2",children:t.jsxs("div",{className:"flex rounded-lg bg-gray-100 dark:bg-gray-800 p-1",children:[t.jsx("button",{className:"text-xs px-3 py-1.5 rounded-md transition-all "+("week"===S?"bg-blue-500 text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"),onClick:()=>T("week"),children:"Week"}),t.jsx("button",{className:"text-xs px-3 py-1.5 rounded-md transition-all "+("month"===S?"bg-blue-500 text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"),onClick:()=>T("month"),children:"Month"}),t.jsx("button",{className:"text-xs px-3 py-1.5 rounded-md transition-all "+("all"===S?"bg-blue-500 text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"),onClick:()=>T("all"),children:"All Time"})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/30 rounded-xl p-4",children:t.jsxs("div",{className:"h-52 flex items-center justify-center relative",children:[t.jsx("svg",{viewBox:"0 0 100 100",className:"w-40 h-40 transform transition-transform duration-500 hover:scale-105",children:Object.entries(I).length>0?t.jsxs(t.Fragment,{children:[Object.entries(I).reduce(((e,[s,a],r,l)=>{const d=R.length,n=a/d*100,o=0===r?0:l.slice(0,r).reduce(((e,[t,s])=>e+s/d*360),0),i=a/d*360,c=(o-90)*Math.PI/180,x=(o+i-90)*Math.PI/180,g=50+40*Math.cos(c),m=50+40*Math.sin(c),h=50+40*Math.cos(x),u=50+40*Math.sin(x),b=(o+i/2-90)*Math.PI/180,y=50+35*Math.cos(b),p=50+35*Math.sin(b),f=i>180?1:0,j=["#3B82F6","#8B5CF6","#F59E0B","#10B981","#EC4899"];return e.push(t.jsx("path",{d:`M 50 50 L ${g} ${m} A 40 40 0 ${f} 1 ${h} ${u} Z`,fill:j[r%j.length],stroke:"#fff",strokeWidth:"1",className:"transition-all duration-300 cursor-pointer "+(D===r||null===D?"opacity-100":"opacity-40"),style:{transform:D===r?"scale(1.05)":"scale(1)",transformOrigin:"center"},onMouseEnter:()=>{C(r),U({category:s,count:a,percentage:parseFloat(n.toFixed(1))}),B({x:y,y:p}),A(!0)},onMouseLeave:()=>{C(null),A(!1)}},s)),e}),[]),t.jsx("circle",{cx:"50",cy:"50",r:"25",fill:"white",className:"dark:fill-gray-800"}),t.jsx("text",{x:"50",y:"45",textAnchor:"middle",className:"text-xs font-medium fill-gray-800 dark:fill-gray-200",children:R.length}),t.jsx("text",{x:"50",y:"55",textAnchor:"middle",className:"text-[9px] fill-gray-500 dark:fill-gray-400",children:"Tasks"})]}):t.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"#E5E7EB",className:"dark:fill-gray-700"})}),M&&L&&t.jsxs("div",{className:"absolute bg-white dark:bg-gray-800 shadow-lg rounded-lg p-2 z-10 pointer-events-none transform -translate-x-1/2 -translate-y-1/2 border border-gray-100 dark:border-gray-700 text-center min-w-[100px]",style:{left:`${F.x}%`,top:`${F.y}%`},children:[t.jsx("p",{className:"text-xs font-medium text-gray-900 dark:text-white capitalize",children:L.category}),t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[L.count," tasks (",L.percentage,"%)"]})]}),0===Object.entries(I).length&&t.jsxs("div",{className:"absolute text-center text-gray-400 dark:text-gray-500",children:[t.jsx(y,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),t.jsx("p",{className:"text-sm",children:"No task data available"})]})]})}),t.jsxs("div",{className:"space-y-3",children:[Object.entries(I).slice(0,5).map((([e,s],a)=>{const r=["bg-blue-500","bg-purple-500","bg-amber-500","bg-green-500","bg-pink-500"],l=R.length,d=(s/l*100).toFixed(1);return t.jsxs("div",{className:`flex items-center p-2 rounded-lg transition-all duration-300 cursor-pointer ${D===a||null===D?"opacity-100":"opacity-60"} ${D===a?"bg-gray-50 dark:bg-gray-700/50":"hover:bg-gray-50 dark:hover:bg-gray-700/30"}`,onMouseEnter:()=>C(a),onMouseLeave:()=>C(null),children:[t.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${r[a%5]}`}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex justify-between mb-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 capitalize",children:e}),t.jsxs("div",{className:"flex items-center",children:[t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mr-2",children:[s," tasks"]}),t.jsxs("span",{className:"text-xs px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full",children:[d,"%"]})]})]}),t.jsx("div",{className:"h-1.5 w-full bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:t.jsx("div",{className:`h-full rounded-full ${r[a%5]} transition-all duration-500`,style:{width:s/l*100+"%",opacity:D===a?1:.7}})})]})]},e)})),Object.keys(I).length>5&&t.jsx("button",{className:"w-full text-sm text-blue-600 dark:text-blue-400 hover:underline mt-3 py-2 font-medium bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors rounded-lg",children:"View all categories"}),0===Object.keys(I).length&&t.jsxs("div",{className:"flex flex-col items-center justify-center h-40 bg-gray-50 dark:bg-gray-800 rounded-lg p-4 text-center",children:[t.jsx(w,{className:"w-10 h-10 text-gray-300 dark:text-gray-600 mb-2"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No task data available"}),t.jsx("button",{className:"mt-3 px-4 py-2 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 text-xs font-medium rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",children:"Add tasks"})]})]})]})]}),t.jsx("div",{className:"animate-slide-up",style:{animationDelay:"0.4s"},children:t.jsx(Z,{tasks:O})})]})}));export{ee as Dashboard};
