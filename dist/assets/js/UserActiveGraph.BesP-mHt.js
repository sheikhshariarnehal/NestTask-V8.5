import{r as e,j as t}from"./react-vendor.ChEovXhk.js";import{Activity as s,Calendar as r,LucideUsers as a}from"./icons.Be68WOzY.js";import{R as i,h as n,b as l,X as d,Y as o,T as c,L as x,A as m}from"./charts.B0xhc6u6.js";import"./vendor.puyDUvHC.js";const g=({selected:e,onChange:s,isMobile:r})=>t.jsxs("div",{className:"flex items-center bg-white dark:bg-gray-800 rounded-lg p-1 w-full sm:w-auto justify-center sm:justify-start mt-3 sm:mt-0 shadow-sm border border-gray-200 dark:border-gray-700",children:[t.jsx("button",{className:"flex-1 sm:flex-initial px-3 sm:px-4 py-2 text-xs sm:text-sm rounded-md transition-all duration-300 "+("week"===e?"bg-blue-600 text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),onClick:()=>s("week"),children:r?"7D":"Week"}),t.jsx("button",{className:"flex-1 sm:flex-initial px-3 sm:px-4 py-2 text-xs sm:text-sm rounded-md transition-all duration-300 "+("month"===e?"bg-blue-600 text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),onClick:()=>s("month"),children:r?"30D":"Month"}),t.jsx("button",{className:"flex-1 sm:flex-initial px-3 sm:px-4 py-2 text-xs sm:text-sm rounded-md transition-all duration-300 "+("year"===e?"bg-blue-600 text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),onClick:()=>s("year"),children:r?"1Y":"Year"})]});function h({users:h}){const[u,y]=e.useState("week"),[b,f]=e.useState(!1),[p,v]=e.useState(!1);e.useEffect((()=>{const e=()=>{v(window.innerWidth<640)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),e.useEffect((()=>{f(!0);const e=setTimeout((()=>{f(!1)}),1500);return()=>clearTimeout(e)}),[u]);const w=e.useMemo((()=>{const e=new Date,t=[];if("week"===u)for(let s=6;s>=0;s--){const r=new Date(e);r.setDate(r.getDate()-s);const a=r.toLocaleDateString("en-US",{weekday:p?"narrow":"short"}),i=h.filter((e=>!!e.lastActive&&new Date(e.lastActive).toDateString()===r.toDateString())).length;t.push({name:a,activeUsers:i,date:new Date(r)})}else if("month"===u)for(let s=3;s>=0;s--){const r=new Date(e);r.setDate(r.getDate()-7*s);const a=new Date(r);a.setDate(a.getDate()-6);const i=4-s,n=p?`W${i}`:`Week ${i}`,l=h.filter((e=>{if(!e.lastActive)return!1;const t=new Date(e.lastActive);return t>=a&&t<=r})).length;t.push({name:n,activeUsers:l,date:new Date(a)})}else{const s=p?["J","F","M","A","M","J","J","A","S","O","N","D"]:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(let r=0;r<12;r++){const a=r,i=e.getFullYear(),n=new Date(i,a,1),l=h.filter((e=>{if(!e.lastActive)return!1;const t=new Date(e.lastActive);return t.getMonth()===a&&t.getFullYear()===i})).length;t.push({name:s[r],activeUsers:l,date:n})}}return t}),[h,u,p]),j=e.useMemo((()=>{if(0===w.length)return 0;const e=w.reduce(((e,t)=>e+t.activeUsers),0);return Math.round(e/w.length)}),[w]),k=e.useMemo((()=>0===w.length?0:Math.max(...w.map((e=>e.activeUsers)))),[w]);return t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-5 sm:p-6 shadow-sm transition-all duration-300 border border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-base font-semibold text-gray-900 dark:text-white flex items-center",children:[t.jsx(s,{className:"w-5 h-5 mr-2 text-purple-600 dark:text-purple-400"}),"User Activity Trends"]}),t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 flex items-center",children:[t.jsx(r,{className:"w-3.5 h-3.5 mr-1.5 text-gray-400"}),t.jsx("span",{children:"week"===u?"Last 7 days":"month"===u?"Last 30 days":`${(new Date).getFullYear()} overview`})]})]}),t.jsx(g,{selected:u,onChange:e=>{y(e)},isMobile:p})]}),t.jsx("div",{className:"bg-gray-50 dark:bg-gray-850 rounded-xl p-4 mb-4",children:t.jsx("div",{className:"h-60 sm:h-[320px] "+(p?"mx-[-0.5rem]":""),children:t.jsx(i,{width:"100%",height:"100%",children:t.jsxs(n,{data:w,margin:p?{top:15,right:5,left:0,bottom:10}:{top:20,right:20,left:10,bottom:10},children:[t.jsx(l,{stroke:"#e5e7eb",strokeDasharray:"5 5",vertical:!1,strokeOpacity:.6}),t.jsx(d,{dataKey:"name",tick:{fill:"#6b7280",fontSize:p?10:12},axisLine:{stroke:"#e5e7eb"},tickLine:{stroke:"#e5e7eb"},dy:10,angle:p?"year"===u?0:-45:0,textAnchor:p&&"year"!==u?"end":"middle",height:p?35:50,interval:p&&"year"===u?1:0}),t.jsx(o,{tick:{fill:"#6b7280",fontSize:p?10:12},axisLine:{stroke:"#e5e7eb"},tickLine:{stroke:"#e5e7eb"},width:p?30:40}),t.jsx(c,{content:({active:e,payload:s,label:r})=>{if(e&&s&&s.length){const e=s[0].payload;return t.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-4 border border-gray-200 dark:border-gray-700 animate-scale-in",children:[t.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:[t.jsx("span",{children:r}),e.date&&t.jsx("span",{className:"text-xs text-gray-500 ml-2",children:new Date(e.date).toLocaleDateString()})]}),t.jsxs("div",{className:"flex items-center text-sm text-purple-600 dark:text-purple-400 font-semibold",children:[t.jsx("span",{className:"w-3 h-3 rounded-full bg-purple-500 mr-2"}),t.jsxs("span",{children:["Active Users: ",s[0].value]})]})]})}return null}}),t.jsx(x,{}),t.jsx("defs",{children:t.jsxs("linearGradient",{id:"colorActiveUsers",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.8}),t.jsx("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]})}),t.jsx(m,{type:"monotone",dataKey:"activeUsers",stroke:"#8b5cf6",fillOpacity:1,fill:"url(#colorActiveUsers)",isAnimationActive:b,animationDuration:1500,name:"Active Users",strokeWidth:2,activeDot:{r:6,fill:"#8b5cf6",stroke:"#fff",strokeWidth:2}})]})})})}),t.jsx("div",{className:"mt-4 bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 overflow-hidden",children:t.jsx("div",{className:"px-5 py-4",children:t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1 flex items-center",children:[t.jsx(a,{className:"w-3.5 h-3.5 mr-1.5"}),"Average Active Users"]}),t.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:j})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1 flex items-center",children:[t.jsx(s,{className:"w-3.5 h-3.5 mr-1.5"}),"Peak Activity"]}),t.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:k})]})]})})})]})}export{h as UserActiveGraph};
