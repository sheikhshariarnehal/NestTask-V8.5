import{e,K as t,k as o,l as i,h as r,g as n,n as s,o as a,q as l,u as d,v as c}from"./App.DJWiL-kW.js";import"./index.G03YpSsJ.js";import"./index.DHwkjUgQ.js";import"./index.CXYh-Rbq.js";import"./useAuth.C6Yhzmx9.js";import"./dataCache.yGM8Zd45.js";import"./authErrors.BDay5vyW.js";import"./useTasks.Ci0-vC6W.js";import"./telegram.service.BTr96-Tu.js";import"./dateUtils.8XYiGfWV.js";import"./AuthPage.BKtPr4Lr.js";import"./AuthSubmitButton.jfNLbuK_.js";import"./createLucideIcon.D0wOJrC3.js";import"./alert-circle.Kse7H8-2.js";import"./mail.BalnhmN_.js";import"./lock.DNfUGNIH.js";import"./eye-off.B3IeMpz2.js";import"./eye.Ds-jmL8l.js";import"./loader-2.Bm75dNXc.js";import"./user.yGv05BZJ.js";import"./book-open.Msvp67J3.js";import"./layers.Cf_N9n_Z.js";import"./users.Ds5gqD7F.js";import"./check-circle-2.B1KNYTCX.js";import"./x.C_w1sNd_.js";import"./bell.LrvbAutK.js";import"./smartphone.BbKDOvSm.js";import"./sun.Ck_D6jYx.js";import"./shield.fXIAB8gJ.js";import"./chevron-right.1ZgpXlYX.js";import"./calendar.DyuQt31k.js";import"./clock.CxnJyE1q.js";import"./search.C5Ibavgl.js";import"./ResetPasswordPage.BcPfxcfN.js";import"./shield-check.D_zW1EBC.js";import"./linkParser.CRNpH1Sh.js";import"./googleDriveUtils.Cf6VzCtp.js";import"./file-text.BS0r6X7H.js";import"./link.BsaRdTUs.js";import"./tag.CryxHFzq.js";import"./copy.BAeB8FHC.js";import"./download.Bbl31xXs.js";import"./list-todo.Bsb7yp2v.js";const m=new WeakMap,u=(e,t,o,i=0,r=!1)=>{m.has(e)!==o&&(o?p(e,t,i,r):v(e,t))},p=(e,t,o,i=!1)=>{const r=t.parentNode,n=t.cloneNode(!1);n.classList.add("cloned-input"),n.tabIndex=-1,i&&(n.disabled=!0),r.appendChild(n),m.set(e,n);const s="rtl"===e.ownerDocument.dir?9999:-9999;e.style.pointerEvents="none",t.style.transform=`translate3d(${s}px,${o}px,0) scale(0)`},v=(e,t)=>{const o=m.get(e);o&&(m.delete(e),o.remove()),e.style.pointerEvents="",t.style.transform=""},f="input, textarea, [no-blur], [contenteditable]",h="$ionPaddingTimer",j=(e,t,o)=>{const i=e[h];i&&clearTimeout(i),t>0?e.style.setProperty("--keyboard-offset",`${t}px`):e[h]=setTimeout((()=>{e.style.setProperty("--keyboard-offset","0px"),o&&o()}),120)},y=(e,t,o)=>{e.addEventListener("focusout",(()=>{t&&j(t,0,o)}),{once:!0})};let w=0;const b="data-ionic-skip-scroll-assist",g=e=>{var t;if(document.activeElement===e)return;const o=e.getAttribute("id"),i=e.closest(`label[for="${o}"]`),r=null===(t=document.activeElement)||void 0===t?void 0:t.closest(`label[for="${o}"]`);null!==i&&i===r||(e.setAttribute(b,"true"),e.focus())},E=async(e,t,o,i,r,n,s=!1,a=0,m=!0)=>{if(!o&&!i)return;const p=((e,t,o,i)=>{var r;return((e,t,o,i)=>{const r=e.top,n=e.bottom,s=t.top,a=s+15,l=Math.min(t.bottom,i-o)-50-n,d=a-r,c=Math.round(l<0?-l:d>0?-d:0),m=Math.min(c,r-s),u=Math.abs(m)/.3;return{scrollAmount:m,scrollDuration:Math.min(400,Math.max(150,u)),scrollPadding:o,inputSafeY:4-(r-a)}})((null!==(r=e.closest("ion-item,[ion-item]"))&&void 0!==r?r:e).getBoundingClientRect(),t.getBoundingClientRect(),o,i)})(e,o||i,r,a);if(o&&Math.abs(p.scrollAmount)<4)return g(t),void(n&&null!==o&&(j(o,w),y(t,o,(()=>w=0))));if(u(e,t,!0,p.inputSafeY,s),g(t),l((()=>e.click())),n&&o&&(w=p.scrollPadding,j(o,w)),"undefined"!=typeof window){let i;const r=async()=>{void 0!==i&&clearTimeout(i),window.removeEventListener("ionKeyboardDidShow",s),window.removeEventListener("ionKeyboardDidShow",r),o&&await c(o,0,p.scrollAmount,p.scrollDuration),u(e,t,!1,p.inputSafeY),g(t),n&&y(t,o,(()=>w=0))},s=()=>{window.removeEventListener("ionKeyboardDidShow",s),window.addEventListener("ionKeyboardDidShow",r)};if(o){const e=await d(o),n=e.scrollHeight-e.clientHeight;if(m&&p.scrollAmount>n-e.scrollTop)return"password"===t.type?(p.scrollAmount+=50,window.addEventListener("ionKeyboardDidShow",s)):window.addEventListener("ionKeyboardDidShow",r),void(i=setTimeout(r,1e3))}r()}},S=async(l,d)=>{if(void 0===e)return;const c="ios"===d,m="android"===d,p=l.getNumber("keyboardHeight",290),v=l.getBoolean("scrollAssist",!0),h=l.getBoolean("hideCaretOnScroll",c),j=l.getBoolean("inputBlurring",!1),y=l.getBoolean("scrollPadding",!0),w=Array.from(e.querySelectorAll("ion-input, ion-textarea")),g=new WeakMap,S=new WeakMap,L=await t.getResizeMode(),k=async e=>{await new Promise((t=>r(e,t)));const t=e.shadowRoot||e,l=t.querySelector("input")||t.querySelector("textarea"),d=n(e),c=d?null:e.closest("ion-footer");if(l){if(d&&h&&!g.has(e)){const t=((e,t,r)=>{if(!r||!t)return()=>{};const n=o=>{var i;(i=t)===i.getRootNode().activeElement&&u(e,t,o)},s=()=>u(e,t,!1),a=()=>n(!0),l=()=>n(!1);return o(r,"ionScrollStart",a),o(r,"ionScrollEnd",l),t.addEventListener("blur",s),()=>{i(r,"ionScrollStart",a),i(r,"ionScrollEnd",l),t.removeEventListener("blur",s)}})(e,l,d);g.set(e,t)}if("date"!==l.type&&"datetime-local"!==l.type&&(d||c)&&v&&!S.has(e)){const t=((e,t,o,i,r,n,l,d=!1)=>{const c=n&&(void 0===l||l.mode===s.None);let m=!1;const u=void 0!==a?a.innerHeight:0,p=r=>{!1!==m?E(e,t,o,i,r.detail.keyboardHeight,c,d,u,!1):m=!0},v=()=>{m=!1,null==a||a.removeEventListener("ionKeyboardDidShow",p),e.removeEventListener("focusout",v)},f=async()=>{t.hasAttribute(b)?t.removeAttribute(b):(E(e,t,o,i,r,c,d,u),null==a||a.addEventListener("ionKeyboardDidShow",p),e.addEventListener("focusout",v))};return e.addEventListener("focusin",f),()=>{e.removeEventListener("focusin",f),null==a||a.removeEventListener("ionKeyboardDidShow",p),e.removeEventListener("focusout",v)}})(e,l,d,c,p,y,L,m);S.set(e,t)}}};j&&(()=>{let e=!0,t=!1;const i=document;o(i,"ionScrollStart",(()=>{t=!0})),i.addEventListener("focusin",(()=>{e=!0}),!0),i.addEventListener("touchend",(o=>{if(t)return void(t=!1);const r=i.activeElement;if(!r)return;if(r.matches(f))return;const n=o.target;n!==r&&(n.matches(f)||n.closest(f)||(e=!1,setTimeout((()=>{e||r.blur()}),50)))}),!1)})();for(const e of w)k(e);e.addEventListener("ionInputDidLoad",(e=>{k(e.detail)})),e.addEventListener("ionInputDidUnload",(e=>{(e=>{if(h){const t=g.get(e);t&&t(),g.delete(e)}if(v){const t=S.get(e);t&&t(),S.delete(e)}})(e.detail)}))};export{S as startInputShims};
