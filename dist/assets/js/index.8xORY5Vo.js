const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/AdminLayout.Ce2U-j4o.js","assets/js/react-vendor.ChEovXhk.js","assets/js/charts.B0xhc6u6.js","assets/js/vendor.puyDUvHC.js","assets/js/useAuth.lHsxTFl1.js","assets/js/dataCache.DP4PyhNH.js","assets/js/authErrors.BDay5vyW.js","assets/js/capacitor-vendor.WkpnXCg6.js","assets/js/useTheme.nyyjoGfu.js","assets/js/useTasks.D7COLx-j.js","assets/js/telegram.service.BTr96-Tu.js","assets/js/dateUtils.8XYiGfWV.js","assets/js/icons.Be68WOzY.js","assets/js/LoadingScreen.BOD2bfhY.js","assets/js/ionic-vendor.lbvV8mvR.js","assets/css/ionic-vendor.5aKpPXL6.css","assets/js/supabase-vendor.CQkAbalq.js","assets/js/DashboardPage.CAsXhKHW.js","assets/js/App.DQU1_J4b.js","assets/js/AuthPage.Ww42QRDT.js","assets/js/AuthSubmitButton.IZeObC6O.js","assets/js/framer-vendor.D2G-fJbw.js","assets/js/date-utils.CA8GdWm1.js","assets/js/ResetPasswordPage.F9s3si3l.js","assets/js/linkParser.CRNpH1Sh.js","assets/js/googleDriveUtils.DgFtRDYK.js","assets/js/UsersPage.DNL23Rmc.js","assets/js/TasksPage.BcdoyF2m.js","assets/js/TaskManagementPage.C4KYpW5A.js","assets/js/AnnouncementsPage.DWAbsG7A.js","assets/js/LectureSlidesPage.5hJqCNWX.js","assets/js/FCMManagementPage.rUv94WWk.js","assets/js/notifications.DvTNppm3.js","assets/js/SuperAdminPage.t4F81lrC.js"])))=>i.map(i=>d[i]);
import{C as e,P as t,_ as a}from"./capacitor-vendor.WkpnXCg6.js";import{r as s,j as r,d as n,e as i,f as o}from"./react-vendor.ChEovXhk.js";import{ab as l}from"./vendor.puyDUvHC.js";import"./ionic-vendor.lbvV8mvR.js";import{c as d}from"./supabase-vendor.CQkAbalq.js";import"./charts.B0xhc6u6.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class c extends s.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[r.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 dark:bg-red-900/20 rounded-full mb-4",children:r.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white text-center mb-2",children:"Application Error"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-4",children:"Something went wrong. Please try refreshing the page."}),this.state.error&&r.jsx("div",{className:"bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-4",children:r.jsx("p",{className:"text-sm font-mono text-red-800 dark:text-red-300 break-all",children:this.state.error.message})}),r.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Refresh Page"}),!1]})}):this.props.children}}const m=()=>r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl p-8",children:[r.jsx("div",{className:"flex items-center justify-center w-16 h-16 mx-auto bg-yellow-100 dark:bg-yellow-900/20 rounded-full mb-6",children:r.jsx("svg",{className:"w-8 h-8 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-4",children:"Configuration Required"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"The application is missing required environment variables. Please configure the following:"}),r.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 mb-6 space-y-2",children:[r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx("span",{className:"text-red-500 mt-0.5",children:"✗"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("code",{className:"text-sm font-mono text-gray-800 dark:text-gray-200",children:"VITE_SUPABASE_URL"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Your Supabase project URL"})]})]}),r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx("span",{className:"text-red-500 mt-0.5",children:"✗"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("code",{className:"text-sm font-mono text-gray-800 dark:text-gray-200",children:"VITE_SUPABASE_ANON_KEY"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Your Supabase anonymous key"})]})]})]}),r.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:[r.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"For Vercel Deployment:"}),r.jsxs("ol",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1 list-decimal list-inside",children:[r.jsx("li",{children:"Go to your Vercel project dashboard"}),r.jsx("li",{children:"Navigate to Settings → Environment Variables"}),r.jsx("li",{children:"Add the required variables"}),r.jsx("li",{children:"Redeploy your application"})]})]}),r.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold text-amber-900 dark:text-amber-100 mb-2",children:"For Local Development:"}),r.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200 mb-2",children:["Create a ",r.jsx("code",{className:"font-mono bg-amber-100 dark:bg-amber-900 px-1 py-0.5 rounded",children:".env.local"})," file with:"]}),r.jsx("pre",{className:"text-xs font-mono bg-amber-100 dark:bg-amber-900 p-2 rounded overflow-x-auto",children:"VITE_SUPABASE_URL=your_url_here\nVITE_SUPABASE_ANON_KEY=your_key_here"})]})]})}),u=()=>r.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-white dark:bg-gray-900 z-50",children:r.jsxs("div",{className:"w-8 h-8 relative",children:[r.jsx("div",{className:"absolute inset-0 border-2 border-gray-200 dark:border-gray-700 rounded-full"}),r.jsx("div",{className:"absolute inset-0 border-t-2 border-blue-600 rounded-full animate-spin"})]})});Boolean("undefined"!=typeof window&&(window.location.hostname.includes("stackblitz.io")||window.location.hostname.includes(".webcontainer.io")));const h=d("https://nglfbbdoyyfslzyjarqs.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5nbGZiYmRveXlmc2x6eWphcnFzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc1OTgyMTQsImV4cCI6MjA4MzE3NDIxNH0.3sXujO3rtin57rTcHpXHi6Zfi9XJCEX3-mmcnnB8cJE",{auth:{persistSession:!0,detectSessionInUrl:!0,flowType:"pkce",storage:localStorage,storageKey:"nesttask_supabase_auth"},global:{headers:{"X-Client-Info":"nesttask@1.0.0","Cache-Control":"no-cache",Pragma:"no-cache"}},db:{schema:"public"},realtime:{params:{eventsPerSecond:10}}});let p=0,x=!1,f=null,b=0,g=Date.now(),j=!1;async function w(){if(!j){j=!0;try{const{data:{session:e},error:t}=await h.auth.getSession();if(t)return;if(!e)return;const a=e.expires_at;if(a){if(1e3*a-Date.now()<=3e5){const{error:e}=await h.auth.refreshSession()}}}catch(e){}finally{j=!1}}}async function y(e=!1){return g=Date.now(),Date.now()-b>3e5&&(e=!0),!(!x||e)||f||(f=(async()=>{try{if(p>=3)return!0;p++;const{data:e,error:t}=await h.auth.getSession();if(t)return!1;if(!e.session)return!0;const{error:a}=await h.from("tasks").select("count",{count:"exact",head:!0});return a?"PGRST301"!==a.code&&!a.message.includes("JWT")||(await h.auth.signOut(),!1):(x=!0,b=Date.now(),!0)}catch(e){return!0}finally{setTimeout((()=>{f=null}),2e3)}})(),f)}"undefined"!=typeof document&&(document.addEventListener("visibilitychange",(async()=>{if("visible"===document.visibilityState){const e=Date.now(),t=e-g;await w(),t>12e4&&(f=null,x=!1),g=e,window.dispatchEvent(new CustomEvent("supabase-visibility-refresh"))}})),window.addEventListener("online",(async()=>{await w(),window.dispatchEvent(new CustomEvent("supabase-network-reconnect"))}))),setTimeout((()=>{y().catch(console.error)}),1e3);let v=null,k=!1,_=[];function E(){const e=v;return v=null,e}function I(e){var t;const a=null==(t=e.notification)?void 0:t.data,s=null==a?void 0:a.taskId,r=function(e){return e&&e.route&&"string"==typeof e.route?e.route:null}(a);if(s&&"string"==typeof s)return v=s,window.dispatchEvent(new CustomEvent("open-task-from-notification",{detail:{taskId:s,data:a,actionId:e.actionId,notification:e.notification}})),setTimeout((()=>{window.dispatchEvent(new CustomEvent("open-task-from-notification",{detail:{taskId:s,data:a,actionId:e.actionId,notification:e.notification}}))}),500),void setTimeout((()=>{window.dispatchEvent(new CustomEvent("open-task-from-notification",{detail:{taskId:s,data:a,actionId:e.actionId,notification:e.notification}}))}),1500);if(r){const e=document.getElementById("root");e&&e.children.length>0&&setTimeout((()=>{window.location.href=r}),150)}}function P(e){}"requestIdleCallback"in window&&requestIdleCallback((()=>{const e=window.location.pathname;e.startsWith("/admin")||e.startsWith("/superadmin")?(a((()=>import("./AdminLayout.Ce2U-j4o.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16])),a((()=>import("./DashboardPage.CAsXhKHW.js")),__vite__mapDeps([17,7,1,2,3]))):(a((()=>import("./App.DQU1_J4b.js").then((e=>e.A))),__vite__mapDeps([18,7,1,2,3,4,5,6,9,10,11,19,20,12,14,15,16,8,21,22,23,24,25])),a((()=>import("./AuthPage.Ww42QRDT.js")),__vite__mapDeps([19,1,2,3,20,12,6,5,7,14,15,16])))}),{timeout:2e3});const N=s.lazy((()=>a((()=>import("./App.DQU1_J4b.js").then((e=>e.A))),__vite__mapDeps([18,7,1,2,3,4,5,6,9,10,11,19,20,12,14,15,16,8,21,22,23,24,25])))),S=s.lazy((()=>a((()=>import("./ResetPasswordPage.F9s3si3l.js")),__vite__mapDeps([23,1,2,3,20,12,6,7,14,15,16])).then((e=>({default:e.ResetPasswordPage}))))),L=s.lazy((()=>a((()=>import("./AuthPage.Ww42QRDT.js")),__vite__mapDeps([19,1,2,3,20,12,6,5,7,14,15,16])).then((e=>({default:e.AuthPage}))))),A=s.lazy((()=>a((()=>import("./AdminLayout.Ce2U-j4o.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16])).then((e=>({default:e.AdminLayout}))))),T=s.lazy((()=>a((()=>import("./DashboardPage.CAsXhKHW.js")),__vite__mapDeps([17,7,1,2,3])).then((e=>({default:e.DashboardPage}))))),R=s.lazy((()=>a((()=>import("./UsersPage.DNL23Rmc.js")),__vite__mapDeps([26,7,1,2,3])).then((e=>({default:e.UsersPage}))))),D=s.lazy((()=>a((()=>import("./TasksPage.BcdoyF2m.js")),__vite__mapDeps([27,7,1,2,3])).then((e=>({default:e.TasksPage}))))),O=s.lazy((()=>a((()=>import("./TaskManagementPage.C4KYpW5A.js")),__vite__mapDeps([28,7,1,2,3,4,5,6,14,15,16])).then((e=>({default:e.TaskManagementPage}))))),C=s.lazy((()=>a((()=>import("./AnnouncementsPage.DWAbsG7A.js")),__vite__mapDeps([29,7,1,2,3,10,11,14,15,16])).then((e=>({default:e.AnnouncementsPage}))))),z=s.lazy((()=>a((()=>import("./LectureSlidesPage.5hJqCNWX.js")),__vite__mapDeps([30,7,1,2,3])).then((e=>({default:e.LectureSlidesPage}))))),V=s.lazy((()=>a((()=>import("./FCMManagementPage.rUv94WWk.js")),__vite__mapDeps([31,1,2,3,12,32,4,5,6,7,14,15,16])))),J=s.lazy((()=>a((()=>import("./SuperAdminPage.t4F81lrC.js")),__vite__mapDeps([33,7,1,2,3])).then((e=>({default:e.SuperAdminPage}))))),M=s.lazy((()=>a((()=>import("./vendor.puyDUvHC.js").then((e=>e.ax))),__vite__mapDeps([3,1,2])).then((e=>({default:e.Analytics}))))),X=!e.isNativePlatform(),W=({children:e})=>X?r.jsx(r.Fragment,{children:e}):null,B=n([{path:"/auth",loader:async()=>{const{data:{session:e}}=await h.auth.getSession();if(null==e?void 0:e.user){const{data:t}=await h.from("users").select("role").eq("id",e.user.id).single();return"super-admin"===(null==t?void 0:t.role)?Response.redirect("/superadmin/dashboard"):"admin"===(null==t?void 0:t.role)||"section_admin"===(null==t?void 0:t.role)?Response.redirect("/admin/dashboard"):Response.redirect("/")}return null},element:r.jsx(s.Suspense,{fallback:r.jsx(u,{}),children:r.jsx(L,{onLogin:async e=>{const{data:t,error:a}=await h.auth.signInWithPassword({email:e.email,password:e.password});if(a)throw a;if(t.user){const{data:e}=await h.from("users").select("role").eq("id",t.user.id).single();"super-admin"===(null==e?void 0:e.role)?window.location.href="/superadmin/dashboard":"admin"===(null==e?void 0:e.role)||"section_admin"===(null==e?void 0:e.role)?window.location.href="/admin/dashboard":window.location.href="/"}},onSignup:async e=>{const{error:t}=await h.auth.signUp({email:e.email,password:e.password,options:{data:{name:e.name}}});if(t)throw t},onForgotPassword:async e=>{const{error:t}=await h.auth.resetPasswordForEmail(e);if(t)throw t}})})},{path:"/reset-password",element:r.jsx(s.Suspense,{fallback:r.jsx(u,{}),children:r.jsx(S,{})})},{path:"/admin",element:r.jsx(s.Suspense,{fallback:r.jsx(u,{}),children:r.jsx(A,{})}),children:[{path:"dashboard",element:r.jsx(s.Suspense,{fallback:r.jsx(u,{}),children:r.jsx(T,{})})},{path:"users",element:r.jsx(s.Suspense,{fallback:r.jsx(u,{}),children:r.jsx(R,{})})},{path:"tasks",element:r.jsx(s.Suspense,{fallback:r.jsx(u,{}),children:r.jsx(D,{})})},{path:"task-management",element:r.jsx(s.Suspense,{fallback:r.jsx(u,{}),children:r.jsx(O,{})})},{path:"announcements",element:r.jsx(s.Suspense,{fallback:r.jsx(u,{}),children:r.jsx(C,{})})},{path:"lecture-slides",element:r.jsx(s.Suspense,{fallback:r.jsx(u,{}),children:r.jsx(z,{})})},{path:"fcm-management",element:r.jsx(s.Suspense,{fallback:r.jsx(u,{}),children:r.jsx(V,{})})},{path:"super-admin",element:r.jsx(s.Suspense,{fallback:r.jsx(u,{}),children:r.jsx(J,{})})}]},{path:"/superadmin/dashboard",element:r.jsx(s.Suspense,{fallback:r.jsx(u,{}),children:r.jsx(J,{})})},{path:"/superadmin/overview",element:r.jsx(s.Suspense,{fallback:r.jsx(u,{}),children:r.jsx(J,{})})},{path:"/superadmin/admins",element:r.jsx(s.Suspense,{fallback:r.jsx(u,{}),children:r.jsx(J,{})})},{path:"/superadmin/sectionadmins",element:r.jsx(s.Suspense,{fallback:r.jsx(u,{}),children:r.jsx(J,{})})},{path:"/superadmin/analytics",element:r.jsx(s.Suspense,{fallback:r.jsx(u,{}),children:r.jsx(J,{})})},{path:"/superadmin/logs",element:r.jsx(s.Suspense,{fallback:r.jsx(u,{}),children:r.jsx(J,{})})},{path:"/superadmin/security",element:r.jsx(s.Suspense,{fallback:r.jsx(u,{}),children:r.jsx(J,{})})},{path:"*",element:r.jsx(s.Suspense,{fallback:r.jsx(u,{}),children:r.jsx(N,{})})}]);!async function(){if(!k&&e.isNativePlatform())try{const e=await t.addListener("pushNotificationActionPerformed",I);_.push((()=>e.remove()));const a=await t.addListener("pushNotificationReceived",P);_.push((()=>a.remove())),k=!0}catch(a){}}(),window.addEventListener("error",(e=>{})),window.addEventListener("unhandledrejection",(e=>{}));try{!function(){const t=Boolean("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5nbGZiYmRveXlmc2x6eWphcnFzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc1OTgyMTQsImV4cCI6MjA4MzE3NDIxNH0.3sXujO3rtin57rTcHpXHi6Zfi9XJCEX3-mmcnnB8cJE");try{const e=new URL("https://nglfbbdoyyfslzyjarqs.supabase.co"),t=document.createElement("link");t.rel="dns-prefetch",t.href=e.origin,document.head.appendChild(t)}catch(n){}const a=document.getElementById("root");a&&(i(a).render(r.jsx(s.StrictMode,{children:r.jsx(c,{children:t?r.jsxs(s.Suspense,{fallback:r.jsx(u,{}),children:[r.jsx(o,{router:B}),X&&r.jsx(W,{children:r.jsxs(s.Suspense,{fallback:null,children:[r.jsx(M,{}),r.jsx(l,{})]})})]}):r.jsx(m,{})})})),!e.isNativePlatform()&&"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((()=>{setTimeout((()=>{"undefined"!=typeof window&&window.Capacitor||("serviceWorker"in navigator&&navigator.serviceWorker.controller&&setInterval((()=>{navigator.serviceWorker.getRegistration().then((e=>{e&&e.update()}))}),36e5),window.addEventListener("beforeinstallprompt",(e=>{e.preventDefault()})),window.addEventListener("appinstalled",(()=>{})),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("controllerchange",(()=>{navigator.serviceWorker.controller})))}),500)})).catch((()=>{})))}()}catch(F){const e=document.getElementById("root");e&&(e.innerHTML='\n      <div style="min-height: 100vh; display: flex; align-items: center; justify-center; padding: 20px; background: #f3f4f6;">\n        <div style="max-width: 500px; background: white; padding: 32px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">\n          <h1 style="color: #dc2626; font-size: 24px; font-weight: bold; margin-bottom: 16px;">Failed to Start Application</h1>\n          <p style="color: #6b7280; margin-bottom: 16px;">The application encountered a critical error during startup.</p>\n          <button onclick="window.location.reload()" style="width: 100%; background: #3b82f6; color: white; padding: 12px; border: none; border-radius: 8px; font-weight: 500; cursor: pointer;">Reload Page</button>\n        </div>\n      </div>\n    ')}export{E as g,h as s,y as t};
