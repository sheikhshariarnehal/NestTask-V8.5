import{r as e,j as t}from"./index.DKgkbjjM.js";import{A as s}from"./activity.Baj0XvUx.js";import{C as a}from"./calendar.C348oXR0.js";import{o as r,p as i,X as n,Y as l,q as o,R as d,r as c,T as x,s as m}from"./generateCategoricalChart.CY3H3Tjc.js";import{U as g}from"./users.DzIhdFjc.js";import"./createLucideIcon.DLdkJiYI.js";import"./clsx.BeLtu-UY.js";var h=r({chartName:"AreaChart",GraphicalChild:i,axisComponents:[{axisType:"xAxis",AxisComp:n},{axisType:"yAxis",AxisComp:l}],formatAxisMap:o});const y=({selected:e,onChange:s,isMobile:a})=>t.jsxs("div",{className:"flex items-center bg-white dark:bg-gray-800 rounded-lg p-1 w-full sm:w-auto justify-center sm:justify-start mt-3 sm:mt-0 shadow-sm border border-gray-200 dark:border-gray-700",children:[t.jsx("button",{className:"flex-1 sm:flex-initial px-3 sm:px-4 py-2 text-xs sm:text-sm rounded-md transition-all duration-300 "+("week"===e?"bg-blue-600 text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),onClick:()=>s("week"),children:a?"7D":"Week"}),t.jsx("button",{className:"flex-1 sm:flex-initial px-3 sm:px-4 py-2 text-xs sm:text-sm rounded-md transition-all duration-300 "+("month"===e?"bg-blue-600 text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),onClick:()=>s("month"),children:a?"30D":"Month"}),t.jsx("button",{className:"flex-1 sm:flex-initial px-3 sm:px-4 py-2 text-xs sm:text-sm rounded-md transition-all duration-300 "+("year"===e?"bg-blue-600 text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),onClick:()=>s("year"),children:a?"1Y":"Year"})]});function u({users:r}){const[o,u]=e.useState("week"),[p,b]=e.useState(!1),[f,v]=e.useState(!1);e.useEffect((()=>{const e=()=>{v(window.innerWidth<640)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),e.useEffect((()=>{b(!0);const e=setTimeout((()=>{b(!1)}),1500);return()=>clearTimeout(e)}),[o]);const j=e.useMemo((()=>{const e=new Date,t=[];if("week"===o)for(let s=6;s>=0;s--){const a=new Date(e);a.setDate(a.getDate()-s);const i=a.toLocaleDateString("en-US",{weekday:f?"narrow":"short"}),n=r.filter((e=>!!e.lastActive&&new Date(e.lastActive).toDateString()===a.toDateString())).length;t.push({name:i,activeUsers:n,date:new Date(a)})}else if("month"===o)for(let s=3;s>=0;s--){const a=new Date(e);a.setDate(a.getDate()-7*s);const i=new Date(a);i.setDate(i.getDate()-6);const n=4-s,l=f?`W${n}`:`Week ${n}`,o=r.filter((e=>{if(!e.lastActive)return!1;const t=new Date(e.lastActive);return t>=i&&t<=a})).length;t.push({name:l,activeUsers:o,date:new Date(i)})}else{const s=f?["J","F","M","A","M","J","J","A","S","O","N","D"]:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(let a=0;a<12;a++){const i=a,n=e.getFullYear(),l=new Date(n,i,1),o=r.filter((e=>{if(!e.lastActive)return!1;const t=new Date(e.lastActive);return t.getMonth()===i&&t.getFullYear()===n})).length;t.push({name:s[a],activeUsers:o,date:l})}}return t}),[r,o,f]),w=e.useMemo((()=>{if(0===j.length)return 0;const e=j.reduce(((e,t)=>e+t.activeUsers),0);return Math.round(e/j.length)}),[j]),k=e.useMemo((()=>0===j.length?0:Math.max(...j.map((e=>e.activeUsers)))),[j]);return t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-5 sm:p-6 shadow-sm transition-all duration-300 border border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-base font-semibold text-gray-900 dark:text-white flex items-center",children:[t.jsx(s,{className:"w-5 h-5 mr-2 text-purple-600 dark:text-purple-400"}),"User Activity Trends"]}),t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 flex items-center",children:[t.jsx(a,{className:"w-3.5 h-3.5 mr-1.5 text-gray-400"}),t.jsx("span",{children:"week"===o?"Last 7 days":"month"===o?"Last 30 days":`${(new Date).getFullYear()} overview`})]})]}),t.jsx(y,{selected:o,onChange:e=>{u(e)},isMobile:f})]}),t.jsx("div",{className:"bg-gray-50 dark:bg-gray-850 rounded-xl p-4 mb-4",children:t.jsx("div",{className:"h-60 sm:h-[320px] "+(f?"mx-[-0.5rem]":""),children:t.jsx(d,{width:"100%",height:"100%",children:t.jsxs(h,{data:j,margin:f?{top:15,right:5,left:0,bottom:10}:{top:20,right:20,left:10,bottom:10},children:[t.jsx(c,{stroke:"#e5e7eb",strokeDasharray:"5 5",vertical:!1,strokeOpacity:.6}),t.jsx(n,{dataKey:"name",tick:{fill:"#6b7280",fontSize:f?10:12},axisLine:{stroke:"#e5e7eb"},tickLine:{stroke:"#e5e7eb"},dy:10,angle:f?"year"===o?0:-45:0,textAnchor:f&&"year"!==o?"end":"middle",height:f?35:50,interval:f&&"year"===o?1:0}),t.jsx(l,{tick:{fill:"#6b7280",fontSize:f?10:12},axisLine:{stroke:"#e5e7eb"},tickLine:{stroke:"#e5e7eb"},width:f?30:40}),t.jsx(x,{content:({active:e,payload:s,label:a})=>{if(e&&s&&s.length){const e=s[0].payload;return t.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-4 border border-gray-200 dark:border-gray-700 animate-scale-in",children:[t.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:[t.jsx("span",{children:a}),e.date&&t.jsx("span",{className:"text-xs text-gray-500 ml-2",children:new Date(e.date).toLocaleDateString()})]}),t.jsxs("div",{className:"flex items-center text-sm text-purple-600 dark:text-purple-400 font-semibold",children:[t.jsx("span",{className:"w-3 h-3 rounded-full bg-purple-500 mr-2"}),t.jsxs("span",{children:["Active Users: ",s[0].value]})]})]})}return null}}),t.jsx(m,{}),t.jsx("defs",{children:t.jsxs("linearGradient",{id:"colorActiveUsers",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.8}),t.jsx("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]})}),t.jsx(i,{type:"monotone",dataKey:"activeUsers",stroke:"#8b5cf6",fillOpacity:1,fill:"url(#colorActiveUsers)",isAnimationActive:p,animationDuration:1500,name:"Active Users",strokeWidth:2,activeDot:{r:6,fill:"#8b5cf6",stroke:"#fff",strokeWidth:2}})]})})})}),t.jsx("div",{className:"mt-4 bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 overflow-hidden",children:t.jsx("div",{className:"px-5 py-4",children:t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1 flex items-center",children:[t.jsx(g,{className:"w-3.5 h-3.5 mr-1.5"}),"Average Active Users"]}),t.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:w})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1 flex items-center",children:[t.jsx(s,{className:"w-3.5 h-3.5 mr-1.5"}),"Peak Activity"]}),t.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:k})]})]})})})]})}export{u as UserActiveGraph};
