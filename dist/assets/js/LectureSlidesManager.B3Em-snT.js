import{r as x,j as e}from"./index.BsUn6o1f.js";import{i as T,d as A,e as z,a as M,g as q,b as H,c as I,f as J,h as Q,u as W,j as Z}from"./lectureSlide.service.BhQCH2UB.js";import{F as k}from"./file-text.Dj_tq5_k.js";import{A as D}from"./alert-circle.DEXd6BUr.js";import{T as B}from"./trash-2.BISGl_oC.js";import{U as ee}from"./upload.BGccwvmb.js";import{X as V}from"./x.BCXIWhyP.js";import{P as $}from"./plus.BE_kg_gC.js";import{L as _}from"./link.CX9lji2N.js";import{V as C}from"./video.C5rYVwY1.js";import{S as re}from"./search.JXsSXhyY.js";import{C as R}from"./calendar.DWzyoBDx.js";import{U as G}from"./user.DBadHIKp.js";import{E as se}from"./eye.CK8RlaQH.js";import{M as te}from"./more-vertical.C7swBCAa.js";import{S as ae}from"./square-pen.cPmzJx3b.js";import{D as O}from"./download.DBiwpeat.js";import{s as U,a as P}from"./notifications.4_bC7DbS.js";import"./createLucideIcon.ZiJ1qpVt.js";function le({onSubmit:l,sectionId:p,initialData:a,isEditing:o=!1}){const[d,n]=x.useState({title:(a==null?void 0:a.title)||"",description:(a==null?void 0:a.description)||"",sectionId:p,fileUrls:(a==null?void 0:a.fileUrls)||[],originalFileNames:(a==null?void 0:a.originalFileNames)||[],slideLinks:(a==null?void 0:a.slideLinks)||[],videoLinks:(a==null?void 0:a.videoLinks)||[]}),[g,f]=x.useState([]),[h,N]=x.useState(""),[v,y]=x.useState(""),[w,L]=x.useState(!1),[F,r]=x.useState({});x.useEffect(()=>{a&&o?(n({title:a.title||"",description:a.description||"",sectionId:p,fileUrls:a.fileUrls||[],originalFileNames:a.originalFileNames||[],slideLinks:a.slideLinks||[],videoLinks:a.videoLinks||[]}),r({}),f([]),N(""),y("")):o||(n({title:"",description:"",sectionId:p,fileUrls:[],originalFileNames:[],slideLinks:[],videoLinks:[]}),f([]),N(""),y(""),r({}))},[a,o,p]);const c=()=>{const s={};return d.title.trim()||(s.title="Title is required"),d.videoLinks.forEach((t,b)=>{A(t)||(s[`videoLink_${b}`]="Invalid video URL")}),d.slideLinks.forEach((t,b)=>{T(t)||(s[`slideLink_${b}`]="Invalid URL")}),g.forEach((t,b)=>{z(t.name)||(s[`file_${b}`]="Invalid file type")}),r(s),Object.keys(s).length===0},i=async s=>{if(s.preventDefault(),!!c()){L(!0);try{await l(d,g),o||(n({title:"",description:"",sectionId:p,fileUrls:[],originalFileNames:[],slideLinks:[],videoLinks:[]}),f([]),N(""),y(""))}catch(t){console.error("Error submitting lecture slide:",t)}finally{L(!1)}}},j=s=>{const b=Array.from(s.target.files||[]).filter(u=>z(u.name));f(u=>[...u,...b])},m=s=>{f(t=>t.filter((b,u)=>u!==s))},S=s=>{n(t=>({...t,fileUrls:t.fileUrls.filter((b,u)=>u!==s),originalFileNames:t.originalFileNames.filter((b,u)=>u!==s)}))},E=()=>{h.trim()&&T(h.trim())&&(n(s=>({...s,slideLinks:[...s.slideLinks,h.trim()]})),N(""))},Y=s=>{n(t=>({...t,slideLinks:t.slideLinks.filter((b,u)=>u!==s)}))},K=()=>{v.trim()&&A(v.trim())&&(n(s=>({...s,videoLinks:[...s.videoLinks,v.trim()]})),y(""))},X=s=>{n(t=>({...t,videoLinks:t.videoLinks.filter((b,u)=>u!==s)}))};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:e.jsx(k,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:o?"Edit Lecture Slide":"Create New Lecture Slide"})]}),e.jsxs("form",{onSubmit:i,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title *"}),e.jsx("input",{type:"text",value:d.title,onChange:s=>n(t=>({...t,title:s.target.value})),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Enter lecture slide title",required:!0}),F.title&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[e.jsx(D,{className:"w-4 h-4"}),F.title]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:d.description,onChange:s=>n(t=>({...t,description:s.target.value})),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white resize-none",placeholder:"Enter description (optional)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Files"}),e.jsxs("div",{className:"space-y-3",children:[o&&d.fileUrls.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Existing Files:"}),d.fileUrls.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:d.originalFileNames[t]||`File ${t+1}`}),e.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"(existing)"})]}),e.jsx("button",{type:"button",onClick:()=>S(t),className:"p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded",title:"Remove existing file",children:e.jsx(B,{className:"w-4 h-4"})})]},`existing-${t}`))]}),e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded-lg cursor-pointer hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors w-fit",children:[e.jsx(ee,{className:"w-5 h-5"}),e.jsx("span",{children:o?"Upload Additional Files":"Upload Files"}),e.jsx("input",{type:"file",multiple:!0,onChange:j,className:"hidden",accept:".pdf,.doc,.docx,.txt,.rtf,.md,.ppt,.pptx,.xls,.xlsx,.jpg,.jpeg,.png,.gif,.svg"})]}),g.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"New Files to Upload:"}),g.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:s.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",Math.round(s.size/1024)," KB)"]})]}),e.jsx("button",{type:"button",onClick:()=>m(t),className:"p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded",children:e.jsx(V,{className:"w-4 h-4"})})]},t))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Slide Links"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"url",value:h,onChange:s=>N(s.target.value),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Enter slide URL"}),e.jsxs("button",{type:"button",onClick:E,disabled:!h.trim()||!T(h.trim()),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4"}),"Add"]})]}),d.slideLinks.length>0&&e.jsx("div",{className:"space-y-2",children:d.slideLinks.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4 text-gray-500"}),e.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 dark:text-blue-400 hover:underline truncate",children:s})]}),e.jsx("button",{type:"button",onClick:()=>Y(t),className:"p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded",children:e.jsx(V,{className:"w-4 h-4"})})]},t))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Video Links (YouTube & Google Drive)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"url",value:v,onChange:s=>y(s.target.value),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Enter YouTube or Google Drive video URL"}),e.jsxs("button",{type:"button",onClick:K,disabled:!v.trim()||!A(v.trim()),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4"}),"Add"]})]}),d.videoLinks.length>0&&e.jsx("div",{className:"space-y-2",children:d.videoLinks.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4 text-gray-500"}),e.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 dark:text-blue-400 hover:underline truncate",children:s})]}),e.jsx("button",{type:"button",onClick:()=>X(t),className:"p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded",children:e.jsx(V,{className:"w-4 h-4"})})]},t))})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:w,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),o?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-4 h-4"}),o?"Update Lecture Slide":"Create Lecture Slide"]})})})]})]})}function de({lectureSlides:l=[],onEdit:p,onDelete:a,onView:o,loading:d=!1}){const[n,g]=x.useState(""),[f,h]=x.useState(null),[N,v]=x.useState(null),y=l.filter(r=>{var c;return r.title.toLowerCase().includes(n.toLowerCase())||r.description.toLowerCase().includes(n.toLowerCase())||((c=r.section)==null?void 0:c.name.toLowerCase().includes(n.toLowerCase()))}),w=async r=>{if(confirm("Are you sure you want to delete this lecture slide? This action cannot be undone.")){h(r);try{await a(r)}catch(c){console.error("Error deleting lecture slide:",c)}finally{h(null)}}},L=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),F=r=>{v(N===r?null:r)};return d?e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:e.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(3)].map((r,c)=>e.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded-lg"},c))})}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Lecture Slides (",y.length,")"]}),e.jsxs("div",{className:"relative",children:[e.jsx(re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search lecture slides...",value:n,onChange:r=>g(r.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white w-full sm:w-64"})]})]})}),e.jsx("div",{className:"p-6",children:y.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(k,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:n?"No lecture slides found":"No lecture slides yet"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:n?"Try a different search term":"Create your first lecture slide above"})]}):e.jsx("div",{className:"space-y-4",children:y.map(r=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg hover:border-gray-300 dark:hover:border-gray-600 transition-all duration-200",children:[e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white truncate",children:r.title}),r.section&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300",children:r.section.name})]}),r.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:r.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"w-3 h-3"}),L(r.createdAt)]}),r.creator&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(G,{className:"w-3 h-3"}),r.creator.name]}),e.jsxs("div",{className:"flex items-center gap-3",children:[r.fileUrls.length>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"w-3 h-3"}),r.fileUrls.length," files"]}),r.slideLinks.length>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"w-3 h-3"}),r.slideLinks.length," links"]}),r.videoLinks.length>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"w-3 h-3"}),r.videoLinks.length," videos"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>F(r.id),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"View details",children:e.jsx(se,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>o(r),className:"p-2 text-gray-500 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Preview",children:e.jsx(te,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>p(r),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"Edit",children:e.jsx(ae,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>w(r.id),disabled:f===r.id,className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors disabled:opacity-50",title:"Delete",children:f===r.id?e.jsx("div",{className:"w-4 h-4 border-2 border-red-600 border-t-transparent rounded-full animate-spin"}):e.jsx(B,{className:"w-4 h-4"})})]})]})}),N===r.id&&e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-700/50",children:e.jsxs("div",{className:"space-y-4",children:[r.fileUrls.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Files"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:r.fileUrls.map((c,i)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-gray-800 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"text-lg",children:M(r.originalFileNames[i]||"")}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:r.originalFileNames[i]||`File ${i+1}`})]}),e.jsx("a",{href:q(c,r.originalFileNames[i]||`file_${i+1}`),download:r.originalFileNames[i],className:"p-1 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",title:"Download",children:e.jsx(O,{className:"w-4 h-4"})})]},i))})]}),r.slideLinks.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Slide Links"}),e.jsx("div",{className:"space-y-1",children:r.slideLinks.map((c,i)=>e.jsxs("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded text-sm",children:[e.jsx(_,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:c})]},i))})]}),r.videoLinks.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Video Links"}),e.jsx("div",{className:"space-y-1",children:r.videoLinks.map((c,i)=>e.jsxs("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded text-sm",children:[e.jsx(C,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:c})]},i))})]})]})})]},r.id))})})]})}function ie({lectureSlide:l,onClose:p}){const a=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:e.jsx(k,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:l.title}),l.section&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:l.section.name})]})]}),e.jsx("button",{onClick:p,className:"p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(V,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:e.jsxs("div",{className:"space-y-6",children:[l.description&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 whitespace-pre-wrap",children:l.description})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"w-4 h-4"}),"Created ",a(l.createdAt)]}),l.creator&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(G,{className:"w-4 h-4"}),l.creator.name]}),l.updatedAt!==l.createdAt&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"w-4 h-4"}),"Updated ",a(l.updatedAt)]})]}),l.fileUrls.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:["Files (",l.fileUrls.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:l.fileUrls.map((o,d)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("span",{className:"text-2xl",children:M(l.originalFileNames[d]||"")}),e.jsx("div",{className:"min-w-0",children:e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:l.originalFileNames[d]||`File ${d+1}`})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"View file",children:e.jsx(k,{className:"w-4 h-4"})}),e.jsx("a",{href:q(o,l.originalFileNames[d]||`file_${d+1}`),download:l.originalFileNames[d],className:"p-2 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Download file",children:e.jsx(O,{className:"w-4 h-4"})})]})]},d))})]}),l.slideLinks.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:["Slide Links (",l.slideLinks.length,")"]}),e.jsx("div",{className:"space-y-2",children:l.slideLinks.map((o,d)=>e.jsxs("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(_,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-blue-600 dark:text-blue-400 hover:underline truncate",children:o})]},d))})]}),l.videoLinks.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:["Videos (",l.videoLinks.length,")"]}),e.jsx("div",{className:"space-y-4",children:l.videoLinks.map((o,d)=>{const n=H(o),g=I(o);return e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden",children:n?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"aspect-video",children:e.jsx("iframe",{src:n,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:`Video ${d+1}`})}),e.jsx("div",{className:"p-3",children:e.jsxs("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 hover:underline text-sm",children:[e.jsx(C,{className:"w-4 h-4"}),e.jsx("span",{className:"capitalize",children:g})," - Open in new tab"]})})]}):e.jsx("div",{className:"p-3",children:e.jsxs("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 text-blue-600 dark:text-blue-400 hover:underline",children:[e.jsx(C,{className:"w-5 h-5"}),e.jsx("span",{className:"truncate",children:o})]})})},d)})})]}),l.fileUrls.length===0&&l.slideLinks.length===0&&l.videoLinks.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(k,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No files, links, or videos attached to this lecture slide."})]})]})})]})})}function Se({sectionId:l}){const[p,a]=x.useState([]),[o,d]=x.useState(!0),[n,g]=x.useState(null),[f,h]=x.useState(null);x.useEffect(()=>{N()},[l]);const N=async()=>{try{d(!0);const i=await J({sectionId:l});a(i)}catch(i){console.error("Error loading lecture slides:",i),i.message&&i.message.includes("table does not exist")?U("Lecture slides feature is not set up yet. Please contact your administrator to run the database migration."):U("Failed to load lecture slides")}finally{d(!1)}},v=async(i,j)=>{try{const m=await Q(i,j);a(S=>[m,...S]),P("Lecture slide created successfully")}catch(m){throw console.error("Error creating lecture slide:",m),U(m.message||"Failed to create lecture slide"),m}},y=async(i,j)=>{if(n)try{const m=await W(n.id,i,j);a(S=>S.map(E=>E.id===n.id?m:E)),g(null),P("Lecture slide updated successfully")}catch(m){throw console.error("Error updating lecture slide:",m),U(m.message||"Failed to update lecture slide"),m}},w=async i=>{try{await Z(i),a(j=>j.filter(m=>m.id!==i)),P("Lecture slide deleted successfully")}catch(j){throw console.error("Error deleting lecture slide:",j),U(j.message||"Failed to delete lecture slide"),j}},L=i=>{g(i),h(null)},F=i=>{h(i),g(null)},r=()=>{g(null)},c=()=>{h(null)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(le,{onSubmit:n?y:v,sectionId:l,initialData:n||void 0,isEditing:!!n}),n&&e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel Edit"})}),e.jsx(de,{lectureSlides:p,onEdit:L,onDelete:w,onView:F,loading:o}),f&&e.jsx(ie,{lectureSlide:f,onClose:c})]})}export{Se as LectureSlidesManager};
