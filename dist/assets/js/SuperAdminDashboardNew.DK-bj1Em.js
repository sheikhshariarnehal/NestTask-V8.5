import{j as e,r,s as t,i as a,u as s,a as n}from"./index.CZiJqP2g.js";import{c as i}from"./clsx.BeLtu-UY.js";import{X as l}from"./x.Dn_QyU__.js";import{C as o}from"./chevron-right.C1cxY83O.js";import{C as d}from"./chevron-left.IBXJOzyZ.js";import{L as c,M as m}from"./menu.BUSUh1S2.js";import{S as u}from"./shield.BZPinmRF.js";import{U as x}from"./users.es9fWHzP.js";import{A as g}from"./activity._xoTMf6N.js";import{F as h}from"./file-text.BXG3urqV.js";import{S as p,u as f,a as b,M as y,L as v}from"./sun.Bc7Z6GX2.js";import{C as j}from"./check-circle.DuNFDGTE.js";import{D as w,K as k,c as N,a as _,e as C,C as A,A as S,b as E,U as z,d as M}from"./user-x.D3CsMMHw.js";import{L as D}from"./layers.DbwkJclp.js";import{T as U}from"./trending-up.qW3b91E9.js";import{a as F,s as L}from"./notifications.DvTNppm3.js";import{R}from"./refresh-cw.BZrIih9L.js";import{P as $}from"./plus.B7gQRrNm.js";import{S as T}from"./search.C-HZM20f.js";import{D as I}from"./download.CgXRSJjD.js";import{S as P}from"./square-pen.CVf_2Xdv.js";import{M as O}from"./more-vertical.DPTRPWEz.js";import{U as q}from"./user-check.BQgopUQi.js";import{C as B}from"./chevron-down.CWTT0sMK.js";import{F as G}from"./filter.CnQ2VBkX.js";import{C as V}from"./chevron-up.BwNFHMap.js";import{P as W,B as H}from"./pie-chart.N6YVYjrW.js";import{B as Y}from"./building.CS-JOlFK.js";import{C as J}from"./clock.Up12ZDmR.js";import{U as K}from"./user.DEE9vQqD.js";import{E as X}from"./eye-off.Cl-0IYyM.js";import{E as Z}from"./eye.DhBjNNjB.js";import{C as Q,S as ee}from"./shield-check.jKXArnyA.js";import{C as re}from"./copy.BElL0Uum.js";import{A as te}from"./alert-triangle.DBcKatJw.js";import{C as ae}from"./calendar.SNoDNvk6.js";import{A as se}from"./alert-circle.CqCH2sxd.js";import{M as ne}from"./mail.DhPCihaR.js";import{P as ie}from"./phone.L-E8oz6J.js";import{P as le}from"./pen.D0cKRGdG.js";import{T as oe}from"./trash-2.DKyCgRC-.js";import{u as de}from"./useAuth.jlIkuF25.js";import{B as ce}from"./bell.QlPax6H_.js";import"./createLucideIcon.Chj3Q81j.js";import"./dataCache.DP4PyhNH.js";import"./authErrors.BDay5vyW.js";const me=(e=new Map,r=null,t)=>({nextPart:e,validators:r,classGroupId:t}),ue="-",xe=[],ge=e=>{const r=fe(e),{conflictingClassGroups:t,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:e=>{if(e.startsWith("[")&&e.endsWith("]"))return pe(e);const t=e.split(ue),a=""===t[0]&&t.length>1?1:0;return he(t,a,r)},getConflictingClassGroupIds:(e,r)=>{if(r){const r=a[e],s=t[e];return r?s?((e,r)=>{const t=new Array(e.length+r.length);for(let a=0;a<e.length;a++)t[a]=e[a];for(let a=0;a<r.length;a++)t[e.length+a]=r[a];return t})(s,r):r:s||xe}return t[e]||xe}}},he=(e,r,t)=>{if(0==e.length-r)return t.classGroupId;const a=e[r],s=t.nextPart.get(a);if(s){const t=he(e,r+1,s);if(t)return t}const n=t.validators;if(null===n)return;const i=0===r?e.join(ue):e.slice(r).join(ue),l=n.length;for(let o=0;o<l;o++){const e=n[o];if(e.validator(i))return e.classGroupId}},pe=e=>-1===e.slice(1,-1).indexOf(":")?void 0:(()=>{const r=e.slice(1,-1),t=r.indexOf(":"),a=r.slice(0,t);return a?"arbitrary.."+a:void 0})(),fe=e=>{const{theme:r,classGroups:t}=e;return be(t,r)},be=(e,r)=>{const t=me();for(const a in e){const s=e[a];ye(s,t,a,r)}return t},ye=(e,r,t,a)=>{const s=e.length;for(let n=0;n<s;n++){const s=e[n];ve(s,r,t,a)}},ve=(e,r,t,a)=>{"string"!=typeof e?"function"!=typeof e?ke(e,r,t,a):we(e,r,t,a):je(e,r,t)},je=(e,r,t)=>{(""===e?r:Ne(r,e)).classGroupId=t},we=(e,r,t,a)=>{_e(e)?ye(e(a),r,t,a):(null===r.validators&&(r.validators=[]),r.validators.push(((e,r)=>({classGroupId:e,validator:r}))(t,e)))},ke=(e,r,t,a)=>{const s=Object.entries(e),n=s.length;for(let i=0;i<n;i++){const[e,n]=s[i];ye(n,Ne(r,e),t,a)}},Ne=(e,r)=>{let t=e;const a=r.split(ue),s=a.length;for(let n=0;n<s;n++){const e=a[n];let r=t.nextPart.get(e);r||(r=me(),t.nextPart.set(e,r)),t=r}return t},_e=e=>"isThemeGetter"in e&&!0===e.isThemeGetter,Ce=e=>{if(e<1)return{get:()=>{},set:()=>{}};let r=0,t=Object.create(null),a=Object.create(null);const s=(s,n)=>{t[s]=n,r++,r>e&&(r=0,a=t,t=Object.create(null))};return{get(e){let r=t[e];return void 0!==r?r:void 0!==(r=a[e])?(s(e,r),r):void 0},set(e,r){e in t?t[e]=r:s(e,r)}}},Ae=[],Se=(e,r,t,a,s)=>({modifiers:e,hasImportantModifier:r,baseClassName:t,maybePostfixModifierPosition:a,isExternal:s}),Ee=e=>{const{prefix:r,experimentalParseClassName:t}=e;let a=e=>{const r=[];let t,a=0,s=0,n=0;const i=e.length;for(let c=0;c<i;c++){const i=e[c];if(0===a&&0===s){if(":"===i){r.push(e.slice(n,c)),n=c+1;continue}if("/"===i){t=c;continue}}"["===i?a++:"]"===i?a--:"("===i?s++:")"===i&&s--}const l=0===r.length?e:e.slice(n);let o=l,d=!1;return l.endsWith("!")?(o=l.slice(0,-1),d=!0):l.startsWith("!")&&(o=l.slice(1),d=!0),Se(r,d,o,t&&t>n?t-n:void 0)};if(r){const e=r+":",t=a;a=r=>r.startsWith(e)?t(r.slice(e.length)):Se(Ae,!1,r,void 0,!0)}if(t){const e=a;a=r=>t({className:r,parseClassName:e})}return a},ze=e=>{const r=new Map;return e.orderSensitiveModifiers.forEach(((e,t)=>{r.set(e,1e6+t)})),e=>{const t=[];let a=[];for(let s=0;s<e.length;s++){const n=e[s],i="["===n[0],l=r.has(n);i||l?(a.length>0&&(a.sort(),t.push(...a),a=[]),t.push(n)):a.push(n)}return a.length>0&&(a.sort(),t.push(...a)),t}},Me=/\s+/,De=e=>{if("string"==typeof e)return e;let r,t="";for(let a=0;a<e.length;a++)e[a]&&(r=De(e[a]))&&(t&&(t+=" "),t+=r);return t},Ue=[],Fe=e=>{const r=r=>r[e]||Ue;return r.isThemeGetter=!0,r},Le=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Re=/^\((?:(\w[\w-]*):)?(.+)\)$/i,$e=/^\d+\/\d+$/,Te=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ie=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Pe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Oe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,qe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Be=e=>$e.test(e),Ge=e=>!!e&&!Number.isNaN(Number(e)),Ve=e=>!!e&&Number.isInteger(Number(e)),We=e=>e.endsWith("%")&&Ge(e.slice(0,-1)),He=e=>Te.test(e),Ye=()=>!0,Je=e=>Ie.test(e)&&!Pe.test(e),Ke=()=>!1,Xe=e=>Oe.test(e),Ze=e=>qe.test(e),Qe=e=>!rr(e)&&!lr(e),er=e=>gr(e,br,Ke),rr=e=>Le.test(e),tr=e=>gr(e,yr,Je),ar=e=>gr(e,vr,Ge),sr=e=>gr(e,pr,Ke),nr=e=>gr(e,fr,Ze),ir=e=>gr(e,wr,Xe),lr=e=>Re.test(e),or=e=>hr(e,yr),dr=e=>hr(e,jr),cr=e=>hr(e,pr),mr=e=>hr(e,br),ur=e=>hr(e,fr),xr=e=>hr(e,wr,!0),gr=(e,r,t)=>{const a=Le.exec(e);return!!a&&(a[1]?r(a[1]):t(a[2]))},hr=(e,r,t=!1)=>{const a=Re.exec(e);return!!a&&(a[1]?r(a[1]):t)},pr=e=>"position"===e||"percentage"===e,fr=e=>"image"===e||"url"===e,br=e=>"length"===e||"size"===e||"bg-size"===e,yr=e=>"length"===e,vr=e=>"number"===e,jr=e=>"family-name"===e,wr=e=>"shadow"===e,kr=((e,...r)=>{let t,a,s,n;const i=e=>{const r=a(e);if(r)return r;const n=((e,r)=>{const{parseClassName:t,getClassGroupId:a,getConflictingClassGroupIds:s,sortModifiers:n}=r,i=[],l=e.trim().split(Me);let o="";for(let d=l.length-1;d>=0;d-=1){const e=l[d],{isExternal:r,modifiers:c,hasImportantModifier:m,baseClassName:u,maybePostfixModifierPosition:x}=t(e);if(r){o=e+(o.length>0?" "+o:o);continue}let g=!!x,h=a(g?u.substring(0,x):u);if(!h){if(!g){o=e+(o.length>0?" "+o:o);continue}if(h=a(u),!h){o=e+(o.length>0?" "+o:o);continue}g=!1}const p=0===c.length?"":1===c.length?c[0]:n(c).join(":"),f=m?p+"!":p,b=f+h;if(i.indexOf(b)>-1)continue;i.push(b);const y=s(h,g);for(let t=0;t<y.length;++t){const e=y[t];i.push(f+e)}o=e+(o.length>0?" "+o:o)}return o})(e,t);return s(e,n),n};return n=l=>{const o=r.reduce(((e,r)=>r(e)),e());return t=(e=>({cache:Ce(e.cacheSize),parseClassName:Ee(e),sortModifiers:ze(e),...ge(e)}))(o),a=t.cache.get,s=t.cache.set,n=i,i(l)},(...e)=>n(((...e)=>{let r,t,a=0,s="";for(;a<e.length;)(r=e[a++])&&(t=De(r))&&(s&&(s+=" "),s+=t);return s})(...e))})((()=>{const e=Fe("color"),r=Fe("font"),t=Fe("text"),a=Fe("font-weight"),s=Fe("tracking"),n=Fe("leading"),i=Fe("breakpoint"),l=Fe("container"),o=Fe("spacing"),d=Fe("radius"),c=Fe("shadow"),m=Fe("inset-shadow"),u=Fe("text-shadow"),x=Fe("drop-shadow"),g=Fe("blur"),h=Fe("perspective"),p=Fe("aspect"),f=Fe("ease"),b=Fe("animate"),y=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",lr,rr],v=()=>[lr,rr,o],j=()=>[Be,"full","auto",...v()],w=()=>[Ve,"none","subgrid",lr,rr],k=()=>["auto",{span:["full",Ve,lr,rr]},Ve,lr,rr],N=()=>[Ve,"auto",lr,rr],_=()=>["auto","min","max","fr",lr,rr],C=()=>["auto",...v()],A=()=>[Be,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...v()],S=()=>[e,lr,rr],E=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",cr,sr,{position:[lr,rr]}],z=()=>["auto","cover","contain",mr,er,{size:[lr,rr]}],M=()=>[We,or,tr],D=()=>["","none","full",d,lr,rr],U=()=>["",Ge,or,tr],F=()=>[Ge,We,cr,sr],L=()=>["","none",g,lr,rr],R=()=>["none",Ge,lr,rr],$=()=>["none",Ge,lr,rr],T=()=>[Ge,lr,rr],I=()=>[Be,"full",...v()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[He],breakpoint:[He],color:[Ye],container:[He],"drop-shadow":[He],ease:["in","out","in-out"],font:[Qe],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[He],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[He],shadow:[He],spacing:["px",Ge],text:[He],"text-shadow":[He],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Be,rr,lr,p]}],container:["container"],columns:[{columns:[Ge,rr,lr,l]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:y()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:j()}],"inset-x":[{"inset-x":j()}],"inset-y":[{"inset-y":j()}],start:[{start:j()}],end:[{end:j()}],top:[{top:j()}],right:[{right:j()}],bottom:[{bottom:j()}],left:[{left:j()}],visibility:["visible","invisible","collapse"],z:[{z:[Ve,"auto",lr,rr]}],basis:[{basis:[Be,"full","auto",l,...v()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ge,Be,"auto","initial","none",rr]}],grow:[{grow:["",Ge,lr,rr]}],shrink:[{shrink:["",Ge,lr,rr]}],order:[{order:[Ve,"first","last","none",lr,rr]}],"grid-cols":[{"grid-cols":w()}],"col-start-end":[{col:k()}],"col-start":[{"col-start":N()}],"col-end":[{"col-end":N()}],"grid-rows":[{"grid-rows":w()}],"row-start-end":[{row:k()}],"row-start":[{"row-start":N()}],"row-end":[{"row-end":N()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":_()}],"auto-rows":[{"auto-rows":_()}],gap:[{gap:v()}],"gap-x":[{"gap-x":v()}],"gap-y":[{"gap-y":v()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:v()}],px:[{px:v()}],py:[{py:v()}],ps:[{ps:v()}],pe:[{pe:v()}],pt:[{pt:v()}],pr:[{pr:v()}],pb:[{pb:v()}],pl:[{pl:v()}],m:[{m:C()}],mx:[{mx:C()}],my:[{my:C()}],ms:[{ms:C()}],me:[{me:C()}],mt:[{mt:C()}],mr:[{mr:C()}],mb:[{mb:C()}],ml:[{ml:C()}],"space-x":[{"space-x":v()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":v()}],"space-y-reverse":["space-y-reverse"],size:[{size:A()}],w:[{w:[l,"screen",...A()]}],"min-w":[{"min-w":[l,"screen","none",...A()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[i]},...A()]}],h:[{h:["screen","lh",...A()]}],"min-h":[{"min-h":["screen","lh","none",...A()]}],"max-h":[{"max-h":["screen","lh",...A()]}],"font-size":[{text:["base",t,or,tr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,lr,ar]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",We,rr]}],"font-family":[{font:[dr,rr,r]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,lr,rr]}],"line-clamp":[{"line-clamp":[Ge,"none",lr,ar]}],leading:[{leading:[n,...v()]}],"list-image":[{"list-image":["none",lr,rr]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",lr,rr]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:S()}],"text-color":[{text:S()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[Ge,"from-font","auto",lr,tr]}],"text-decoration-color":[{decoration:S()}],"underline-offset":[{"underline-offset":[Ge,"auto",lr,rr]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:v()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",lr,rr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",lr,rr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:E()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:z()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ve,lr,rr],radial:["",lr,rr],conic:[Ve,lr,rr]},ur,nr]}],"bg-color":[{bg:S()}],"gradient-from-pos":[{from:M()}],"gradient-via-pos":[{via:M()}],"gradient-to-pos":[{to:M()}],"gradient-from":[{from:S()}],"gradient-via":[{via:S()}],"gradient-to":[{to:S()}],rounded:[{rounded:D()}],"rounded-s":[{"rounded-s":D()}],"rounded-e":[{"rounded-e":D()}],"rounded-t":[{"rounded-t":D()}],"rounded-r":[{"rounded-r":D()}],"rounded-b":[{"rounded-b":D()}],"rounded-l":[{"rounded-l":D()}],"rounded-ss":[{"rounded-ss":D()}],"rounded-se":[{"rounded-se":D()}],"rounded-ee":[{"rounded-ee":D()}],"rounded-es":[{"rounded-es":D()}],"rounded-tl":[{"rounded-tl":D()}],"rounded-tr":[{"rounded-tr":D()}],"rounded-br":[{"rounded-br":D()}],"rounded-bl":[{"rounded-bl":D()}],"border-w":[{border:U()}],"border-w-x":[{"border-x":U()}],"border-w-y":[{"border-y":U()}],"border-w-s":[{"border-s":U()}],"border-w-e":[{"border-e":U()}],"border-w-t":[{"border-t":U()}],"border-w-r":[{"border-r":U()}],"border-w-b":[{"border-b":U()}],"border-w-l":[{"border-l":U()}],"divide-x":[{"divide-x":U()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":U()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:S()}],"border-color-x":[{"border-x":S()}],"border-color-y":[{"border-y":S()}],"border-color-s":[{"border-s":S()}],"border-color-e":[{"border-e":S()}],"border-color-t":[{"border-t":S()}],"border-color-r":[{"border-r":S()}],"border-color-b":[{"border-b":S()}],"border-color-l":[{"border-l":S()}],"divide-color":[{divide:S()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[Ge,lr,rr]}],"outline-w":[{outline:["",Ge,or,tr]}],"outline-color":[{outline:S()}],shadow:[{shadow:["","none",c,xr,ir]}],"shadow-color":[{shadow:S()}],"inset-shadow":[{"inset-shadow":["none",m,xr,ir]}],"inset-shadow-color":[{"inset-shadow":S()}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:S()}],"ring-offset-w":[{"ring-offset":[Ge,tr]}],"ring-offset-color":[{"ring-offset":S()}],"inset-ring-w":[{"inset-ring":U()}],"inset-ring-color":[{"inset-ring":S()}],"text-shadow":[{"text-shadow":["none",u,xr,ir]}],"text-shadow-color":[{"text-shadow":S()}],opacity:[{opacity:[Ge,lr,rr]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ge]}],"mask-image-linear-from-pos":[{"mask-linear-from":F()}],"mask-image-linear-to-pos":[{"mask-linear-to":F()}],"mask-image-linear-from-color":[{"mask-linear-from":S()}],"mask-image-linear-to-color":[{"mask-linear-to":S()}],"mask-image-t-from-pos":[{"mask-t-from":F()}],"mask-image-t-to-pos":[{"mask-t-to":F()}],"mask-image-t-from-color":[{"mask-t-from":S()}],"mask-image-t-to-color":[{"mask-t-to":S()}],"mask-image-r-from-pos":[{"mask-r-from":F()}],"mask-image-r-to-pos":[{"mask-r-to":F()}],"mask-image-r-from-color":[{"mask-r-from":S()}],"mask-image-r-to-color":[{"mask-r-to":S()}],"mask-image-b-from-pos":[{"mask-b-from":F()}],"mask-image-b-to-pos":[{"mask-b-to":F()}],"mask-image-b-from-color":[{"mask-b-from":S()}],"mask-image-b-to-color":[{"mask-b-to":S()}],"mask-image-l-from-pos":[{"mask-l-from":F()}],"mask-image-l-to-pos":[{"mask-l-to":F()}],"mask-image-l-from-color":[{"mask-l-from":S()}],"mask-image-l-to-color":[{"mask-l-to":S()}],"mask-image-x-from-pos":[{"mask-x-from":F()}],"mask-image-x-to-pos":[{"mask-x-to":F()}],"mask-image-x-from-color":[{"mask-x-from":S()}],"mask-image-x-to-color":[{"mask-x-to":S()}],"mask-image-y-from-pos":[{"mask-y-from":F()}],"mask-image-y-to-pos":[{"mask-y-to":F()}],"mask-image-y-from-color":[{"mask-y-from":S()}],"mask-image-y-to-color":[{"mask-y-to":S()}],"mask-image-radial":[{"mask-radial":[lr,rr]}],"mask-image-radial-from-pos":[{"mask-radial-from":F()}],"mask-image-radial-to-pos":[{"mask-radial-to":F()}],"mask-image-radial-from-color":[{"mask-radial-from":S()}],"mask-image-radial-to-color":[{"mask-radial-to":S()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[Ge]}],"mask-image-conic-from-pos":[{"mask-conic-from":F()}],"mask-image-conic-to-pos":[{"mask-conic-to":F()}],"mask-image-conic-from-color":[{"mask-conic-from":S()}],"mask-image-conic-to-color":[{"mask-conic-to":S()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:E()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:z()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",lr,rr]}],filter:[{filter:["","none",lr,rr]}],blur:[{blur:L()}],brightness:[{brightness:[Ge,lr,rr]}],contrast:[{contrast:[Ge,lr,rr]}],"drop-shadow":[{"drop-shadow":["","none",x,xr,ir]}],"drop-shadow-color":[{"drop-shadow":S()}],grayscale:[{grayscale:["",Ge,lr,rr]}],"hue-rotate":[{"hue-rotate":[Ge,lr,rr]}],invert:[{invert:["",Ge,lr,rr]}],saturate:[{saturate:[Ge,lr,rr]}],sepia:[{sepia:["",Ge,lr,rr]}],"backdrop-filter":[{"backdrop-filter":["","none",lr,rr]}],"backdrop-blur":[{"backdrop-blur":L()}],"backdrop-brightness":[{"backdrop-brightness":[Ge,lr,rr]}],"backdrop-contrast":[{"backdrop-contrast":[Ge,lr,rr]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ge,lr,rr]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ge,lr,rr]}],"backdrop-invert":[{"backdrop-invert":["",Ge,lr,rr]}],"backdrop-opacity":[{"backdrop-opacity":[Ge,lr,rr]}],"backdrop-saturate":[{"backdrop-saturate":[Ge,lr,rr]}],"backdrop-sepia":[{"backdrop-sepia":["",Ge,lr,rr]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":v()}],"border-spacing-x":[{"border-spacing-x":v()}],"border-spacing-y":[{"border-spacing-y":v()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",lr,rr]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ge,"initial",lr,rr]}],ease:[{ease:["linear","initial",f,lr,rr]}],delay:[{delay:[Ge,lr,rr]}],animate:[{animate:["none",b,lr,rr]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[h,lr,rr]}],"perspective-origin":[{"perspective-origin":y()}],rotate:[{rotate:R()}],"rotate-x":[{"rotate-x":R()}],"rotate-y":[{"rotate-y":R()}],"rotate-z":[{"rotate-z":R()}],scale:[{scale:$()}],"scale-x":[{"scale-x":$()}],"scale-y":[{"scale-y":$()}],"scale-z":[{"scale-z":$()}],"scale-3d":["scale-3d"],skew:[{skew:T()}],"skew-x":[{"skew-x":T()}],"skew-y":[{"skew-y":T()}],transform:[{transform:[lr,rr,"","none","gpu","cpu"]}],"transform-origin":[{origin:y()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:I()}],"translate-x":[{"translate-x":I()}],"translate-y":[{"translate-y":I()}],"translate-z":[{"translate-z":I()}],"translate-none":["translate-none"],accent:[{accent:S()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:S()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",lr,rr]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":v()}],"scroll-mx":[{"scroll-mx":v()}],"scroll-my":[{"scroll-my":v()}],"scroll-ms":[{"scroll-ms":v()}],"scroll-me":[{"scroll-me":v()}],"scroll-mt":[{"scroll-mt":v()}],"scroll-mr":[{"scroll-mr":v()}],"scroll-mb":[{"scroll-mb":v()}],"scroll-ml":[{"scroll-ml":v()}],"scroll-p":[{"scroll-p":v()}],"scroll-px":[{"scroll-px":v()}],"scroll-py":[{"scroll-py":v()}],"scroll-ps":[{"scroll-ps":v()}],"scroll-pe":[{"scroll-pe":v()}],"scroll-pt":[{"scroll-pt":v()}],"scroll-pr":[{"scroll-pr":v()}],"scroll-pb":[{"scroll-pb":v()}],"scroll-pl":[{"scroll-pl":v()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",lr,rr]}],fill:[{fill:["none",...S()]}],"stroke-w":[{stroke:[Ge,or,tr,ar]}],stroke:[{stroke:["none",...S()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}}));function Nr(...e){return kr(i(e))}const _r=[{id:"overview",label:"Overview",icon:c},{id:"admins",label:"Admin Management",icon:u},{id:"section-admins",label:"Section Admins",icon:x},{id:"analytics",label:"Analytics",icon:g},{id:"logs",label:"System Logs",icon:h},{id:"security",label:"Security Settings",icon:p}];function Cr({activeTab:r,onTabChange:t,isCollapsed:a,onToggleCollapse:s,isMobile:n=!1,isOpen:i=!1,onClose:c}){return n?e.jsxs(e.Fragment,{children:[i&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:c}),e.jsxs("div",{className:Nr("fixed inset-y-0 left-0 z-50 w-64 bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-800 transform transition-transform duration-300 lg:hidden",i?"translate-x-0":"-translate-x-full"),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-800",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Super Admin"}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:e.jsx(l,{className:"w-5 h-5"})})]}),e.jsx("nav",{className:"p-4 space-y-2",children:_r.map((a=>{const s=a.icon,n=r===a.id;return e.jsxs("button",{onClick:()=>{t(a.id),null==c||c()},className:Nr("w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors",n?"bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800"),children:[e.jsx(s,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:a.label})]},a.id)}))})]})]}):e.jsxs("div",{className:Nr("hidden lg:flex flex-col bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-800 transition-all duration-300",a?"w-20":"w-64"),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-800",children:[!a&&e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Super Admin"}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg ml-auto",children:a?e.jsx(o,{className:"w-5 h-5"}):e.jsx(d,{className:"w-5 h-5"})})]}),e.jsx("nav",{className:"flex-1 p-4 space-y-2",children:_r.map((s=>{const n=s.icon,i=r===s.id;return e.jsxs("button",{onClick:()=>t(s.id),className:Nr("w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors",i?"bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800",a&&"justify-center"),title:a?s.label:void 0,children:[e.jsx(n,{className:"w-5 h-5 flex-shrink-0"}),!a&&e.jsx("span",{className:"font-medium",children:s.label})]},s.id)}))})]})}const Ar=r.forwardRef((({className:r,...t},a)=>e.jsx("div",{ref:a,className:Nr("rounded-xl border border-gray-200 bg-white text-gray-950 shadow-sm dark:border-gray-800 dark:bg-gray-900 dark:text-gray-50",r),...t})));Ar.displayName="Card";const Sr=r.forwardRef((({className:r,...t},a)=>e.jsx("div",{ref:a,className:Nr("flex flex-col space-y-1.5 p-6",r),...t})));Sr.displayName="CardHeader";const Er=r.forwardRef((({className:r,...t},a)=>e.jsx("h3",{ref:a,className:Nr("font-semibold leading-none tracking-tight",r),...t})));Er.displayName="CardTitle";const zr=r.forwardRef((({className:r,...t},a)=>e.jsx("p",{ref:a,className:Nr("text-sm text-gray-500 dark:text-gray-400",r),...t})));zr.displayName="CardDescription";const Mr=r.forwardRef((({className:r,...t},a)=>e.jsx("div",{ref:a,className:Nr("p-6 pt-0",r),...t})));Mr.displayName="CardContent",r.forwardRef((({className:r,...t},a)=>e.jsx("div",{ref:a,className:Nr("flex items-center p-6 pt-0",r),...t}))).displayName="CardFooter";const Dr=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,Ur=i,Fr=(e,r)=>t=>{var a;if(null==(null==r?void 0:r.variants))return Ur(e,null==t?void 0:t.class,null==t?void 0:t.className);const{variants:s,defaultVariants:n}=r,i=Object.keys(s).map((e=>{const r=null==t?void 0:t[e],a=null==n?void 0:n[e];if(null===r)return null;const i=Dr(r)||Dr(a);return s[e][i]})),l=t&&Object.entries(t).reduce(((e,r)=>{let[t,a]=r;return void 0===a||(e[t]=a),e}),{}),o=null==r||null===(a=r.compoundVariants)||void 0===a?void 0:a.reduce(((e,r)=>{let{class:t,className:a,...s}=r;return Object.entries(s).every((e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...n,...l}[r]):{...n,...l}[r]===t}))?[...e,t,a]:e}),[]);return Ur(e,i,o,null==t?void 0:t.class,null==t?void 0:t.className)},Lr=Fr("inline-flex items-center rounded-md border border-gray-200 px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2 dark:border-gray-800 dark:focus:ring-gray-300",{variants:{variant:{default:"border-transparent bg-gray-900 text-gray-50 shadow hover:bg-gray-900/80 dark:bg-gray-50 dark:text-gray-900 dark:hover:bg-gray-50/80",secondary:"border-transparent bg-gray-100 text-gray-900 hover:bg-gray-100/80 dark:bg-gray-800 dark:text-gray-50 dark:hover:bg-gray-800/80",destructive:"border-transparent bg-red-500 text-gray-50 shadow hover:bg-red-500/80 dark:bg-red-900 dark:text-gray-50 dark:hover:bg-red-900/80",outline:"text-gray-950 dark:text-gray-50",success:"border-transparent bg-green-500 text-white shadow hover:bg-green-600 dark:bg-green-600 dark:hover:bg-green-700",warning:"border-transparent bg-yellow-500 text-white shadow hover:bg-yellow-600 dark:bg-yellow-600 dark:hover:bg-yellow-700",info:"border-transparent bg-blue-500 text-white shadow hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700"}},defaultVariants:{variant:"default"}});function Rr({className:r,variant:t,...a}){return e.jsx("div",{className:Nr(Lr({variant:t}),r),...a})}function $r(){const[a,s]=r.useState(null),[n,i]=r.useState([]),[l,o]=r.useState(!0);r.useEffect((()=>{d()}),[]);const d=async()=>{try{o(!0);const{data:e,error:r}=await t.rpc("get_dashboard_stats",{});if(r){const[e,r,a,n,i,l,o,d]=await Promise.all([t.from("users").select("*",{count:"exact",head:!0}),t.from("users").select("*",{count:"exact",head:!0}).eq("role","admin"),t.from("users").select("*",{count:"exact",head:!0}).eq("role","section_admin"),t.from("tasks").select("*",{count:"exact",head:!0}),t.from("tasks").select("*",{count:"exact",head:!0}).eq("status","completed"),t.from("departments").select("*",{count:"exact",head:!0}),t.from("batches").select("*",{count:"exact",head:!0}),t.from("sections").select("*",{count:"exact",head:!0})]);s({total_users:e.count||0,total_admins:r.count||0,total_section_admins:a.count||0,total_tasks:n.count||0,completed_tasks:i.count||0,total_departments:l.count||0,total_batches:o.count||0,total_sections:d.count||0})}else s(e);const{data:a}=await t.from("activities").select("\n          id,\n          type,\n          title,\n          metadata,\n          created_at,\n          user:users(name, email)\n        ").order("created_at",{ascending:!1}).limit(10);a&&i(a.map((e=>({...e,user:Array.isArray(e.user)?e.user[0]:e.user}))))}catch(e){}finally{o(!1)}},c=a?[{title:"Total Users",value:a.total_users,change:"+12%",icon:x,color:"text-blue-600",bgColor:"bg-blue-50 dark:bg-blue-900/20"},{title:"Admins",value:a.total_admins,change:"+3%",icon:u,color:"text-purple-600",bgColor:"bg-purple-50 dark:bg-purple-900/20"},{title:"Section Admins",value:a.total_section_admins,change:"+8%",icon:x,color:"text-green-600",bgColor:"bg-green-50 dark:bg-green-900/20"},{title:"Total Tasks",value:a.total_tasks,change:"+24%",icon:j,color:"text-orange-600",bgColor:"bg-orange-50 dark:bg-orange-900/20"},{title:"Completed Tasks",value:a.completed_tasks,change:`${a.total_tasks>0?Math.round(a.completed_tasks/a.total_tasks*100):0}%`,icon:j,color:"text-emerald-600",bgColor:"bg-emerald-50 dark:bg-emerald-900/20"},{title:"Departments",value:a.total_departments,change:"",icon:w,color:"text-indigo-600",bgColor:"bg-indigo-50 dark:bg-indigo-900/20"},{title:"Batches",value:a.total_batches,change:"",icon:D,color:"text-pink-600",bgColor:"bg-pink-50 dark:bg-pink-900/20"},{title:"Sections",value:a.total_sections,change:"",icon:D,color:"text-teal-600",bgColor:"bg-teal-50 dark:bg-teal-900/20"}]:[];return l?e.jsx("div",{className:"space-y-6 animate-pulse",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map((r=>e.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-800 rounded-xl"},r)))})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:c.map(((r,t)=>{var a;const s=r.icon;return e.jsxs(Ar,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(Sr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Er,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:r.title}),e.jsx("div",{className:`p-2 rounded-lg ${r.bgColor}`,children:e.jsx(s,{className:`w-5 h-5 ${r.color}`})})]}),e.jsxs(Mr,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Number(null!=(a=r.value)?a:0).toLocaleString()}),r.change&&e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 flex items-center gap-1 mt-1",children:[e.jsx(U,{className:"w-3 h-3"}),r.change," from last month"]})]})]},t)}))}),e.jsxs(Ar,{children:[e.jsxs(Sr,{children:[e.jsxs(Er,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-5 h-5"}),"Recent Activity"]}),e.jsx(zr,{children:"Latest system activities and updates"})]}),e.jsx(Mr,{children:0===n.length?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-8",children:"No recent activities to display"}):e.jsx("div",{className:"space-y-4",children:n.map((r=>e.jsxs("div",{className:"flex items-start justify-between p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-full bg-blue-50 dark:bg-blue-900/20",children:e.jsx(g,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:r.user&&"object"==typeof r.user&&!Array.isArray(r.user)?r.user.name||r.user.email:"System"})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx(Rr,{variant:"secondary",className:"text-xs",children:r.type}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(r.created_at).toLocaleDateString()})]})]},r.id)))})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(Ar,{children:[e.jsxs(Sr,{children:[e.jsxs(Er,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5"}),"Organization Structure"]}),e.jsx(zr,{children:"Hierarchical breakdown"})]}),e.jsx(Mr,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Departments"}),e.jsx(Rr,{variant:"info",children:(null==a?void 0:a.total_departments)||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Batches"}),e.jsx(Rr,{variant:"info",children:(null==a?void 0:a.total_batches)||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Sections"}),e.jsx(Rr,{variant:"info",children:(null==a?void 0:a.total_sections)||0})]})]})})]}),e.jsxs(Ar,{children:[e.jsxs(Sr,{children:[e.jsxs(Er,{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-5 h-5"}),"Task Overview"]}),e.jsx(zr,{children:"Current task statistics"})]}),e.jsx(Mr,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Total Tasks"}),e.jsx(Rr,{variant:"info",children:(null==a?void 0:a.total_tasks)||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Completed"}),e.jsx(Rr,{variant:"success",children:(null==a?void 0:a.completed_tasks)||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Pending"}),e.jsx(Rr,{variant:"warning",children:((null==a?void 0:a.total_tasks)||0)-((null==a?void 0:a.completed_tasks)||0)})]})]})})]})]})]})}function Tr(e,r){if("function"==typeof e)return e(r);null!=e&&(e.current=r)}var Ir=Symbol.for("react.lazy"),Pr=a[" use ".trim().toString()];function Or(e){return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===Ir&&"_payload"in e&&"object"==typeof(r=e._payload)&&null!==r&&"then"in r;var r}function qr(t){const a=Gr(t),s=r.forwardRef(((t,s)=>{let{children:n,...i}=t;Or(n)&&"function"==typeof Pr&&(n=Pr(n._payload));const l=r.Children.toArray(n),o=l.find(Wr);if(o){const t=o.props.children,n=l.map((e=>e===o?r.Children.count(t)>1?r.Children.only(null):r.isValidElement(t)?t.props.children:null:e));return e.jsx(a,{...i,ref:s,children:r.isValidElement(t)?r.cloneElement(t,void 0,n):null})}return e.jsx(a,{...i,ref:s,children:n})}));return s.displayName=`${t}.Slot`,s}var Br=qr("Slot");function Gr(e){const t=r.forwardRef(((e,t)=>{let{children:a,...s}=e;if(Or(a)&&"function"==typeof Pr&&(a=Pr(a._payload)),r.isValidElement(a)){const e=function(e){var r,t;let a=null==(r=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:r.get,s=a&&"isReactWarning"in a&&a.isReactWarning;return s?e.ref:(a=null==(t=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:t.get,s=a&&"isReactWarning"in a&&a.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}(a),n=function(e,r){const t={...r};for(const a in r){const s=e[a],n=r[a];/^on[A-Z]/.test(a)?s&&n?t[a]=(...e)=>{const r=n(...e);return s(...e),r}:s&&(t[a]=s):"style"===a?t[a]={...s,...n}:"className"===a&&(t[a]=[s,n].filter(Boolean).join(" "))}return{...e,...t}}(s,a.props);return a.type!==r.Fragment&&(n.ref=t?function(...e){return r=>{let t=!1;const a=e.map((e=>{const a=Tr(e,r);return t||"function"!=typeof a||(t=!0),a}));if(t)return()=>{for(let r=0;r<a.length;r++){const t=a[r];"function"==typeof t?t():Tr(e[r],null)}}}}(t,e):e),r.cloneElement(a,n)}return r.Children.count(a)>1?r.Children.only(null):null}));return t.displayName=`${e}.SlotClone`,t}var Vr=Symbol("radix.slottable");function Wr(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Vr}const Hr=Fr("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-gray-950 disabled:pointer-events-none disabled:opacity-50 dark:focus-visible:ring-gray-300",{variants:{variant:{default:"bg-gray-900 text-gray-50 shadow hover:bg-gray-900/90 dark:bg-gray-50 dark:text-gray-900 dark:hover:bg-gray-50/90",destructive:"bg-red-500 text-gray-50 shadow-sm hover:bg-red-500/90 dark:bg-red-900 dark:text-gray-50 dark:hover:bg-red-900/90",outline:"border border-gray-200 bg-white shadow-sm hover:bg-gray-100 hover:text-gray-900 dark:border-gray-800 dark:bg-gray-950 dark:hover:bg-gray-800 dark:hover:text-gray-50",secondary:"bg-gray-100 text-gray-900 shadow-sm hover:bg-gray-100/80 dark:bg-gray-800 dark:text-gray-50 dark:hover:bg-gray-800/80",ghost:"hover:bg-gray-100 hover:text-gray-900 dark:hover:bg-gray-800 dark:hover:text-gray-50",link:"text-gray-900 underline-offset-4 hover:underline dark:text-gray-50"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Yr=r.forwardRef((({className:r,variant:t,size:a,asChild:s=!1,...n},i)=>{const l=s?Br:"button";return e.jsx(l,{className:Nr(Hr({variant:t,size:a,className:r})),ref:i,...n})}));Yr.displayName="Button";const Jr=r.forwardRef((({className:r,type:t,...a},s)=>e.jsx("input",{type:t,className:Nr("flex h-9 w-full rounded-md border border-gray-200 bg-white px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-gray-950 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-800 dark:bg-gray-950 dark:placeholder:text-gray-400 dark:focus-visible:ring-gray-300",r),ref:s,...a})));Jr.displayName="Input";const Kr=r.forwardRef((({className:r,...t},a)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:a,className:Nr("w-full caption-bottom text-sm",r),...t})})));Kr.displayName="Table";const Xr=r.forwardRef((({className:r,...t},a)=>e.jsx("thead",{ref:a,className:Nr("[&_tr]:border-b",r),...t})));Xr.displayName="TableHeader";const Zr=r.forwardRef((({className:r,...t},a)=>e.jsx("tbody",{ref:a,className:Nr("[&_tr:last-child]:border-0",r),...t})));Zr.displayName="TableBody",r.forwardRef((({className:r,...t},a)=>e.jsx("tfoot",{ref:a,className:Nr("border-t bg-gray-100/50 font-medium [&>tr]:last:border-b-0 dark:bg-gray-800/50",r),...t}))).displayName="TableFooter";const Qr=r.forwardRef((({className:r,...t},a)=>e.jsx("tr",{ref:a,className:Nr("border-b transition-colors hover:bg-gray-100/50 data-[state=selected]:bg-gray-100 dark:hover:bg-gray-800/50 dark:data-[state=selected]:bg-gray-800",r),...t})));Qr.displayName="TableRow";const et=r.forwardRef((({className:r,...t},a)=>e.jsx("th",{ref:a,className:Nr("h-10 px-2 text-left align-middle font-medium text-gray-500 [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] dark:text-gray-400",r),...t})));et.displayName="TableHead";const rt=r.forwardRef((({className:r,...t},a)=>e.jsx("td",{ref:a,className:Nr("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...t})));function tt(...e){const t=e[0];if(1===e.length)return t;const a=()=>{const a=e.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(e){const s=a.reduce(((r,{useScope:t,scopeName:a})=>({...r,...t(e)[`__scope${a}`]})),{});return r.useMemo((()=>({[`__scope${t.scopeName}`]:s})),[s])}};return a.scopeName=t.scopeName,a}rt.displayName="TableCell",r.forwardRef((({className:r,...t},a)=>e.jsx("caption",{ref:a,className:Nr("mt-4 text-sm text-gray-500 dark:text-gray-400",r),...t}))).displayName="TableCaption";var at=(null==globalThis?void 0:globalThis.document)?r.useLayoutEffect:()=>{},st=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce(((t,a)=>{const s=qr(`Primitive.${a}`),n=r.forwardRef(((r,t)=>{const{asChild:n,...i}=r,l=n?s:a;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),e.jsx(l,{...i,ref:t})}));return n.displayName=`Primitive.${a}`,{...t,[a]:n}}),{}),nt={exports:{}},it={},lt=r,ot="function"==typeof Object.is?Object.is:function(e,r){return e===r&&(0!==e||1/e==1/r)||e!=e&&r!=r},dt=lt.useState,ct=lt.useEffect,mt=lt.useLayoutEffect,ut=lt.useDebugValue;function xt(e){var r=e.getSnapshot;e=e.value;try{var t=r();return!ot(e,t)}catch(a){return!0}}var gt="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,r){return r()}:function(e,r){var t=r(),a=dt({inst:{value:t,getSnapshot:r}}),s=a[0].inst,n=a[1];return mt((function(){s.value=t,s.getSnapshot=r,xt(s)&&n({inst:s})}),[e,t,r]),ct((function(){return xt(s)&&n({inst:s}),e((function(){xt(s)&&n({inst:s})}))}),[e]),ut(t),t};it.useSyncExternalStore=void 0!==lt.useSyncExternalStore?lt.useSyncExternalStore:gt,nt.exports=it;var ht=nt.exports;function pt(){return()=>{}}var ft="Avatar",[bt,yt]=function(t,a=[]){let s=[];const n=()=>{const e=s.map((e=>r.createContext(e)));return function(a){const s=(null==a?void 0:a[t])||e;return r.useMemo((()=>({[`__scope${t}`]:{...a,[t]:s}})),[a,s])}};return n.scopeName=t,[function(a,n){const i=r.createContext(n);i.displayName=a+"Context";const l=s.length;s=[...s,n];const o=a=>{var s;const{scope:n,children:o,...d}=a,c=(null==(s=null==n?void 0:n[t])?void 0:s[l])||i,m=r.useMemo((()=>d),Object.values(d));return e.jsx(c.Provider,{value:m,children:o})};return o.displayName=a+"Provider",[o,function(e,s){var o;const d=(null==(o=null==s?void 0:s[t])?void 0:o[l])||i,c=r.useContext(d);if(c)return c;if(void 0!==n)return n;throw new Error(`\`${e}\` must be used within \`${a}\``)}]},tt(n,...a)]}(ft),[vt,jt]=bt(ft),wt=r.forwardRef(((t,a)=>{const{__scopeAvatar:s,...n}=t,[i,l]=r.useState("idle");return e.jsx(vt,{scope:s,imageLoadingStatus:i,onImageLoadingStatusChange:l,children:e.jsx(st.span,{...n,ref:a})})}));wt.displayName=ft;var kt="AvatarImage",Nt=r.forwardRef(((t,a)=>{const{__scopeAvatar:s,src:n,onLoadingStatusChange:i=()=>{},...l}=t,o=jt(kt,s),d=function(e,{referrerPolicy:t,crossOrigin:a}){const s=ht.useSyncExternalStore(pt,(()=>!0),(()=>!1)),n=r.useRef(null),i=s?(n.current||(n.current=new window.Image),n.current):null,[l,o]=r.useState((()=>At(i,e)));return at((()=>{o(At(i,e))}),[i,e]),at((()=>{const e=e=>()=>{o(e)};if(!i)return;const r=e("loaded"),s=e("error");return i.addEventListener("load",r),i.addEventListener("error",s),t&&(i.referrerPolicy=t),"string"==typeof a&&(i.crossOrigin=a),()=>{i.removeEventListener("load",r),i.removeEventListener("error",s)}}),[i,a,t]),l}(n,l),c=function(e){const t=r.useRef(e);return r.useEffect((()=>{t.current=e})),r.useMemo((()=>(...e)=>{var r;return null==(r=t.current)?void 0:r.call(t,...e)}),[])}((e=>{i(e),o.onImageLoadingStatusChange(e)}));return at((()=>{"idle"!==d&&c(d)}),[d,c]),"loaded"===d?e.jsx(st.img,{...l,ref:a,src:n}):null}));Nt.displayName=kt;var _t="AvatarFallback",Ct=r.forwardRef(((t,a)=>{const{__scopeAvatar:s,delayMs:n,...i}=t,l=jt(_t,s),[o,d]=r.useState(void 0===n);return r.useEffect((()=>{if(void 0!==n){const e=window.setTimeout((()=>d(!0)),n);return()=>window.clearTimeout(e)}}),[n]),o&&"loaded"!==l.imageLoadingStatus?e.jsx(st.span,{...i,ref:a}):null}));function At(e,r){return e?r?(e.src!==r&&(e.src=r),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}Ct.displayName=_t;var St=wt,Et=Nt,zt=Ct;const Mt=r.forwardRef((({className:r,...t},a)=>e.jsx(St,{ref:a,className:Nr("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...t})));Mt.displayName=St.displayName,r.forwardRef((({className:r,...t},a)=>e.jsx(Et,{ref:a,className:Nr("aspect-square h-full w-full",r),...t}))).displayName=Et.displayName;const Dt=r.forwardRef((({className:r,...t},a)=>e.jsx(zt,{ref:a,className:Nr("flex h-full w-full items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800",r),...t})));async function Ut(e,r,a,s,n){try{const{data:i,error:l}=await t.from("users").select("name").eq("id",e).single();if(l)return;const{error:o}=await t.from("admin_logs").insert([{admin_id:e,admin_name:(null==i?void 0:i.name)||"Unknown",action:r,details:a,timestamp:(new Date).toISOString(),resource:s,resource_id:n}])}catch(i){}}function Ft(){const[e,a]=r.useState([]),[s,n]=r.useState(!0),[i,l]=r.useState(null),o=r.useCallback((async()=>{n(!0),l(null);try{const e=await async function(){try{const{data:{user:e}}=await t.auth.getUser(),{data:r,error:a}=await t.from("users").select("id, email, name, role, phone, student_id, last_active, created_at, department_id, batch_id, section_id").order("created_at",{ascending:!1});if(a)throw new Error(a.message||"Failed to fetch admin users");const{data:s}=await t.from("departments").select("id, name"),{data:n}=await t.from("batches").select("id, name"),{data:i}=await t.from("sections").select("id, name"),l=new Map((null==s?void 0:s.map((e=>[e.id,e.name])))||[]),o=new Map((null==n?void 0:n.map((e=>[e.id,e.name])))||[]),d=new Map((null==i?void 0:i.map((e=>[e.id,e.name])))||[]);return(null==r?void 0:r.map((e=>({id:e.id,username:e.name||"",email:e.email||"",role:e.role||"user",department:l.get(e.department_id)||"",departmentId:e.department_id,batch:o.get(e.batch_id)||"",batchId:e.batch_id,section:d.get(e.section_id)||"",sectionId:e.section_id,permissions:[],status:"active",isActive:!0,lastLogin:e.last_active,createdAt:e.created_at,phone:e.phone||"",studentId:e.student_id||""}))))||[]}catch(i){throw new Error(i.message||"Failed to fetch admin users")}}();a(e)}catch(e){l(e.message||"Failed to fetch admin users")}finally{n(!1)}}),[]);return r.useEffect((()=>{o()}),[o]),{admins:e,loading:s,error:i,createAdmin:async e=>{n(!0),l(null);try{const r=Math.random().toString(36).slice(-8)+Math.random().toString(36).slice(-8).toUpperCase()+"!1",a=await async function(e,r){try{const{data:{user:a}}=await t.auth.getUser(),{data:s,error:n}=await t.auth.admin.createUser({email:e.email,password:r,email_confirm:!0,user_metadata:{name:e.username,role:e.role,department:e.department||null}});if(n||!s.user)throw new Error((null==n?void 0:n.message)||"Failed to create admin user");const{data:i,error:l}=await t.from("users").update({permissions:e.permissions,status:e.status,department:e.department}).eq("id",s.user.id).select();if(l)throw new Error(l.message||"Failed to create admin user");return a&&await Ut(a.id,"create_admin",`Created admin user: ${e.email}`),{id:s.user.id,username:e.username,email:e.email,role:e.role,department:e.department,permissions:e.permissions,status:e.status,isActive:"active"===e.status,createdAt:(new Date).toISOString(),phone:e.phone,studentId:e.studentId}}catch(i){throw new Error(i.message||"Failed to create admin user")}}(e,r);return await o(),a}catch(r){throw l(r.message||"Failed to create admin user"),r}finally{n(!1)}},updateAdmin:async(e,r)=>{n(!0),l(null);try{await async function(e,r){try{const{data:{user:a}}=await t.auth.getUser();if(r.email||r.role||r.username){const{error:a}=await t.auth.admin.updateUserById(e,{email:r.email,user_metadata:{name:r.username,role:r.role,department:r.department}});if(a)throw new Error(a.message||"Failed to update admin user")}const s={};r.permissions&&(s.permissions=r.permissions),r.status&&(s.status=r.status),r.department&&(s.department=r.department);const{data:n,error:i}=await t.from("users").update(s).eq("id",e).select();if(i)throw new Error(i.message||"Failed to update admin user");a&&await Ut(a.id,"update_admin",`Updated admin user: ${e}`);const l=null==n?void 0:n[0];return{id:l.id,username:l.name||"",email:l.email||"",role:l.role||"admin",department:l.department,permissions:l.permissions||[],status:l.status||"active",isActive:"active"===l.status,lastLogin:l.last_active,createdAt:l.created_at,updatedAt:l.updated_at,phone:l.phone||"",studentId:l.student_id||""}}catch(i){throw new Error(i.message||"Failed to update admin user")}}(e,r),await o()}catch(a){throw l(a.message||"Failed to update admin user"),a}finally{n(!1)}},deleteAdmin:async e=>{n(!0),l(null);try{await async function(e){try{const{data:{user:a}}=await t.auth.getUser(),{data:s,error:n}=await t.from("users").select("*").eq("id",e).single();if(n)throw new Error(n.message||"Failed to delete admin user");try{const{error:r}=await t.from("admin_archives").insert([{admin_id:e,admin_data:s,archived_by:(null==a?void 0:a.id)||"system",archived_at:(new Date).toISOString()}])}catch(r){}const{error:i}=await t.auth.admin.deleteUser(e);if(i)throw new Error(i.message||"Failed to delete admin user");a&&await Ut(a.id,"delete_admin",`Deleted admin user: ${e}`)}catch(i){throw new Error(i.message||"Failed to delete admin user")}}(e),await o()}catch(r){throw l(r.message||"Failed to delete admin user"),r}finally{n(!1)}},resetPassword:async(e,r)=>{n(!0),l(null);try{const a=await async function(e,r){try{const{data:{user:s}}=await t.auth.getUser(),{error:n}=await t.auth.admin.updateUserById(e,{password:r});if(n)throw new Error(n.message||"Failed to reset admin password");try{s&&await Ut(s.id,"reset_password",`Reset password for admin: ${e}`)}catch(a){}return!0}catch(i){throw new Error(i.message||"Failed to reset admin password")}}(e,r);return await o(),a}catch(a){return l(a.message||"Failed to reset admin password"),!1}finally{n(!1)}},promoteToAdmin:async e=>{n(!0),l(null);try{await async function(e){var r;try{const{data:{user:a}}=await t.auth.getUser();let s="super-admin"===(null==(r=null==a?void 0:a.user_metadata)?void 0:r.role);if(!s){const{data:e,error:r}=await t.from("users").select("role").eq("id",null==a?void 0:a.id).single();!r&&e&&(s="super-admin"===e.role)}if(!s)throw new Error("Unauthorized: Only super admins can promote users to admin");const{error:n}=await t.from("users").update({role:"admin"}).eq("id",e);if(n)throw new Error(n.message||"Failed to promote user to admin");a&&await Ut(a.id,"promote_to_admin",`Promoted user ${e} to admin role`)}catch(i){throw new Error(i.message||"Failed to promote user to admin")}}(e),await o()}catch(r){throw l(r.message||"Failed to promote user to admin"),r}finally{n(!1)}},promoteToSectionAdmin:async r=>{n(!0),l(null);try{const a=e.find((e=>e.id===r));if(!a)throw new Error("User not found");if(!a.sectionId)throw new Error("User does not have a section assigned. Please assign a section first.");await async function(e){try{const{data:r,error:a}=await t.rpc("promote_user_to_section_admin",{input_user_id:e});if(a)throw new Error(a.message||"Failed to promote user to section admin")}catch(i){throw new Error(i.message||"Failed to promote user to section admin")}}(r),await o()}catch(a){throw l(a.message||"Failed to promote user to section admin"),a}finally{n(!1)}},demoteUser:async r=>{n(!0),l(null);try{const a=e.find((e=>e.id===r));if(!a)throw new Error("User not found");if("super-admin"===a.role)throw new Error("Super admins cannot be demoted through this interface");await async function(e){try{const{data:r,error:a}=await t.rpc("demote_user_to_regular",{user_id:e});if(a)throw new Error(a.message||"Failed to demote user")}catch(i){throw new Error(i.message||"Failed to demote user")}}(r),await o()}catch(a){throw l(a.message||"Failed to demote user"),a}finally{n(!1)}},getSectionUsers:async e=>{n(!0),l(null);try{const r=await async function(e){try{const{data:{user:r}}=await t.auth.getUser();if(!e)throw new Error("No section ID provided");const{data:a,error:s}=await t.from("sections").select("id, name, batch_id").eq("id",e).single(),{data:n,error:i}=await t.from("users").select("id, email, name, role, phone, student_id, last_active, created_at, department_id, batch_id, section_id").eq("section_id",e).order("created_at",{ascending:!1});if(i)throw new Error(i.message||"Failed to fetch section users");const{data:l}=await t.from("departments").select("id, name"),{data:o}=await t.from("batches").select("id, name"),{data:d}=await t.from("sections").select("id, name"),c=new Map((null==l?void 0:l.map((e=>[e.id,e.name])))||[]),m=new Map((null==o?void 0:o.map((e=>[e.id,e.name])))||[]),u=new Map((null==d?void 0:d.map((e=>[e.id,e.name])))||[]),x=(null==n?void 0:n.map((e=>({id:e.id,username:e.name||"",email:e.email||"",role:e.role||"user",department:c.get(e.department_id)||"",departmentId:e.department_id,batch:m.get(e.batch_id)||"",batchId:e.batch_id,section:u.get(e.section_id)||"",sectionId:e.section_id,permissions:[],status:"active",isActive:!0,lastLogin:e.last_active,createdAt:e.created_at,phone:e.phone||"",studentId:e.student_id||""}))))||[];if(0===x.length){const{data:e,error:r}=await t.from("users").select("id, email, section_id").not("section_id","is",null).limit(5);r||e.length}return x}catch(i){throw new Error(i.message||"Failed to fetch section users")}}(e);return r}catch(r){throw l(r.message||"Failed to fetch section users"),r}finally{n(!1)}},getSections:async(e,r)=>{n(!0),l(null);try{const a=await async function(e,r){try{let a=t.from("sections").select("id, name, batch_id");e&&(a=a.eq("batch_id",e));const{data:s,error:n}=await a.order("name");if(n)throw new Error(n.message||"Failed to fetch sections");if(r&&!e){const{data:e,error:a}=await t.from("batches").select("id").eq("department_id",r);if(a)throw new Error(a.message||"Failed to fetch batches");const n=e.map((e=>e.id));return s.filter((e=>n.includes(e.batch_id)))}return s||[]}catch(i){throw new Error(i.message||"Failed to fetch sections")}}(e,r);return a}catch(a){throw l(a.message||"Failed to fetch sections"),a}finally{n(!1)}},refreshAdmins:o}}function Lt(){const[t,a]=r.useState(""),[s,n]=r.useState("all"),[i,l]=r.useState("all"),{admins:o,loading:d,error:c,refreshAdmins:m}=Ft(),x=o.filter((e=>{var r,a,n;const l=(null==(r=e.username)?void 0:r.toLowerCase().includes(t.toLowerCase()))||(null==(a=e.email)?void 0:a.toLowerCase().includes(t.toLowerCase()))||(null==(n=e.department)?void 0:n.toLowerCase().includes(t.toLowerCase())),o="all"===s||e.role===s,d="all"===i||("active"===i?e.isActive:!e.isActive);return l&&o&&d})),g=r=>{switch(r){case"super-admin":return e.jsx(Rr,{variant:"destructive",children:"Super Admin"});case"admin":return e.jsx(Rr,{variant:"info",children:"Admin"});case"section_admin":return e.jsx(Rr,{variant:"warning",children:"Section Admin"});default:return e.jsx(Rr,{variant:"secondary",children:"User"})}};return d&&0===o.length?e.jsxs("div",{className:"space-y-4 animate-pulse",children:[e.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-800 rounded-xl"}),e.jsx("div",{className:"h-96 bg-gray-200 dark:bg-gray-800 rounded-xl"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Ar,{children:[e.jsx(Sr,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Er,{className:"text-2xl",children:"Admin Management"}),e.jsx(zr,{children:"Manage system administrators and their permissions"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Yr,{variant:"outline",size:"sm",onClick:async()=>{try{await m(),F("Admins refreshed successfully")}catch(e){L("Failed to refresh admins")}},disabled:d,children:[e.jsx(R,{className:"w-4 h-4 mr-2 "+(d?"animate-spin":"")}),"Refresh"]}),e.jsxs(Yr,{size:"sm",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Add Admin"]})]})]})}),e.jsx(Mr,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Jr,{placeholder:"Search by name, email, or department...",value:t,onChange:e=>a(e.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:s,onChange:e=>n(e.target.value),className:"px-3 py-2 border border-gray-200 dark:border-gray-800 rounded-md bg-white dark:bg-gray-950 text-sm",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"super-admin",children:"Super Admin"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"section_admin",children:"Section Admin"}),e.jsx("option",{value:"user",children:"User"})]}),e.jsxs("select",{value:i,onChange:e=>l(e.target.value),className:"px-3 py-2 border border-gray-200 dark:border-gray-800 rounded-md bg-white dark:bg-gray-950 text-sm",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]}),e.jsxs(Yr,{variant:"outline",size:"sm",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"Export"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(Ar,{children:e.jsxs(Sr,{className:"pb-2",children:[e.jsx(zr,{children:"Total Admins"}),e.jsx(Er,{className:"text-3xl",children:o.length})]})}),e.jsx(Ar,{children:e.jsxs(Sr,{className:"pb-2",children:[e.jsx(zr,{children:"Active"}),e.jsx(Er,{className:"text-3xl text-green-600",children:o.filter((e=>e.isActive)).length})]})}),e.jsx(Ar,{children:e.jsxs(Sr,{className:"pb-2",children:[e.jsx(zr,{children:"Super Admins"}),e.jsx(Er,{className:"text-3xl text-purple-600",children:o.filter((e=>"super-admin"===e.role)).length})]})}),e.jsx(Ar,{children:e.jsxs(Sr,{className:"pb-2",children:[e.jsx(zr,{children:"Section Admins"}),e.jsx(Er,{className:"text-3xl text-blue-600",children:o.filter((e=>"section_admin"===e.role)).length})]})})]}),e.jsxs(Ar,{children:[e.jsxs(Sr,{children:[e.jsxs(Er,{children:["Administrators (",x.length,")"]}),e.jsx(zr,{children:t||"all"!==s||"all"!==i?`Showing ${x.length} of ${o.length} admins`:"All system administrators"})]}),e.jsxs(Mr,{children:[c&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-600 dark:text-red-400",children:c}),0===x.length?e.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(u,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No admins found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Kr,{children:[e.jsx(Xr,{children:e.jsxs(Qr,{children:[e.jsx(et,{children:"Admin"}),e.jsx(et,{children:"Role"}),e.jsx(et,{children:"Department"}),e.jsx(et,{children:"Status"}),e.jsx(et,{children:"Joined"}),e.jsx(et,{className:"text-right",children:"Actions"})]})}),e.jsx(Zr,{children:x.map((r=>{var t,a,s;return e.jsxs(Qr,{children:[e.jsx(rt,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Mt,{className:"h-10 w-10",children:e.jsx(Dt,{className:"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400",children:(null==(t=r.username)?void 0:t.charAt(0).toUpperCase())||(null==(a=r.email)?void 0:a.charAt(0).toUpperCase())})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:r.username||"N/A"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.email})]})]})}),e.jsx(rt,{children:g(r.role||"user")}),e.jsx(rt,{className:"text-gray-600 dark:text-gray-400",children:r.department||"N/A"}),e.jsx(rt,{children:(s=r.isActive,s?e.jsx(Rr,{variant:"success",children:"Active"}):e.jsx(Rr,{variant:"secondary",children:"Inactive"}))}),e.jsx(rt,{className:"text-gray-600 dark:text-gray-400",children:r.createdAt?new Date(r.createdAt).toLocaleDateString():"N/A"}),e.jsx(rt,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(Yr,{variant:"ghost",size:"sm",children:e.jsx(P,{className:"w-4 h-4"})}),e.jsx(Yr,{variant:"ghost",size:"sm",children:e.jsx(k,{className:"w-4 h-4"})}),e.jsx(Yr,{variant:"ghost",size:"sm",children:e.jsx(O,{className:"w-4 h-4"})})]})})]},r.id)}))})]})})]})]})]})}function Rt({stats:t,loading:a}){const[s,n]=r.useState("30d"),[i,l]=r.useState("all"),[o,d]=r.useState(!1),[c,m]=r.useState(!1),[h,p]=r.useState({admins:0,active:0,disabled:0,permissions:0}),f=(null==t?void 0:t.departmentDistribution)?["all",...t.departmentDistribution.map((e=>e.department))]:["all"];r.useEffect((()=>{t&&p({admins:Math.floor(20*Math.random())-10,active:Math.floor(15*Math.random()),disabled:Math.floor(10*Math.random())-7,permissions:Math.floor(30*Math.random())-10})}),[t]);const b=r.useCallback((()=>{m(!0),setTimeout((()=>{m(!1)}),1500)}),[]),y=r.useCallback((()=>{const r=(null==t?void 0:t.departmentDistribution)||[],a=Math.max(...r.map((e=>e.count)),1);return e.jsx("div",{className:"space-y-3",children:r.map((r=>e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 truncate max-w-[70%]",children:r.department}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 font-medium",children:r.count}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 ml-1",children:"admins"})]})]}),e.jsx("div",{className:"overflow-hidden h-2.5 text-xs flex rounded-full bg-gray-200 dark:bg-gray-700",children:e.jsx("div",{style:{width:r.count/a*100+"%"},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-500 dark:bg-blue-600 rounded-full transition-all duration-500"})})]},r.department)))})}),[null==t?void 0:t.departmentDistribution]),v=r.useCallback((()=>{const r=(null==t?void 0:t.totalAdmins)||0,a=(null==t?void 0:t.activeAdmins)||0,s=(null==t?void 0:t.disabledAdmins)||0,n=r>0?Math.round(a/r*100):0,i=2*Math.PI*16,l=n/100*i;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"relative h-32 w-32",children:e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 36 36",children:[e.jsx("circle",{cx:"18",cy:"18",r:"16",fill:"none",stroke:"#E5E7EB",strokeWidth:"3.6",className:"dark:stroke-gray-700"}),e.jsx("circle",{cx:"18",cy:"18",r:"16",fill:"none",stroke:"#3B82F6",strokeWidth:"3.6",strokeDasharray:`${l} ${i}`,strokeDashoffset:"0",strokeLinecap:"round",className:"dark:stroke-blue-500 transition-all duration-1000 ease-in-out",transform:"rotate(-90 18 18)"}),e.jsxs("text",{x:"18",y:"18",dy:".35em",dominantBaseline:"middle",textAnchor:"middle",fill:"#4B5563",className:"dark:fill-white text-3xl font-bold",children:[n,"%"]})]})}),e.jsx("div",{className:"flex-1 pl-5",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-blue-500 dark:bg-blue-500 mr-2"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Active"})]}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("p",{className:"text-xl font-bold text-gray-800 dark:text-white",children:a}),h.active>0&&e.jsxs("div",{className:"flex items-center ml-2 text-xs text-green-500",children:[e.jsx(N,{className:"h-3 w-3"}),e.jsxs("span",{children:[h.active,"%"]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-gray-300 dark:bg-gray-600 mr-2"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Disabled"})]}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("p",{className:"text-xl font-bold text-gray-800 dark:text-white",children:s}),h.disabled<0&&e.jsxs("div",{className:"flex items-center ml-2 text-xs text-red-500",children:[e.jsx(_,{className:"h-3 w-3"}),e.jsxs("span",{children:[Math.abs(h.disabled),"%"]})]})]})]})]})})]})}),[null==t?void 0:t.totalAdmins,null==t?void 0:t.activeAdmins,null==t?void 0:t.disabledAdmins,h]),j=r.useCallback((()=>{const r=(null==t?void 0:t.permissionUsage)||[];return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map((r=>{const a=Math.min(100,Math.round(r.count/((null==t?void 0:t.totalAdmins)||1)*100));return e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex justify-between mb-1.5",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 truncate max-w-[80%]",children:r.permission}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsxs("span",{className:"text-xs font-semibold text-gray-900 dark:text-white",children:[a,"%"]}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",r.count,")"]})]})]}),e.jsx("div",{className:"overflow-hidden h-2 text-xs flex rounded-full bg-gray-200 dark:bg-gray-700",children:e.jsx("div",{style:{width:`${a}%`},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center rounded-full transition-all duration-500 "+(a>75?"bg-green-500 dark:bg-green-600":a>50?"bg-blue-500 dark:bg-blue-600":a>25?"bg-amber-500 dark:bg-amber-600":"bg-red-500 dark:bg-red-600")})})]},r.permission)}))})}),[null==t?void 0:t.permissionUsage,null==t?void 0:t.totalAdmins]),w=r.useCallback((()=>{if(!(null==t?void 0:t.monthlyActivity)||0===t.monthlyActivity.length)return e.jsx("div",{className:"flex items-center justify-center h-40 text-gray-500 dark:text-gray-400",children:"No activity data available"});const r=t.monthlyActivity,a=Math.max(...r.map((e=>e.logins))),s=Math.max(...r.map((e=>e.actions)));return e.jsxs("div",{className:"pt-5",children:[e.jsx("div",{className:"flex items-end justify-between space-x-1 h-[180px]",children:r.map((r=>e.jsxs("div",{className:"flex-1 flex flex-col items-center group",children:[e.jsxs("div",{className:"relative w-full flex justify-center",children:[e.jsxs("div",{className:"absolute bottom-full mb-2 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-900 text-white text-xs rounded py-1 px-2 pointer-events-none z-10 whitespace-nowrap",children:[e.jsx("div",{className:"font-medium",children:r.month}),e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsx("span",{children:"Logins:"}),e.jsx("span",{children:r.logins})]}),e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsx("span",{children:"Actions:"}),e.jsx("span",{children:r.actions})]})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-3 bg-blue-500 dark:bg-blue-600 rounded-t hover:bg-blue-600 dark:hover:bg-blue-700 transition-all cursor-pointer group-hover:opacity-90",style:{height:r.logins/a*100+"%"}}),e.jsx("div",{className:"w-3 bg-purple-500 dark:bg-purple-600 rounded-t hover:bg-purple-600 dark:hover:bg-purple-700 transition-all cursor-pointer group-hover:opacity-90",style:{height:r.actions/s*100+"%"}})]})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:r.month.substring(0,3)})]},r.month)))}),e.jsxs("div",{className:"flex justify-center mt-4 space-x-8",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-3 w-3 rounded bg-blue-500 dark:bg-blue-600 mr-2"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Logins"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-3 w-3 rounded bg-purple-500 dark:bg-purple-600 mr-2"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Actions"})]})]})]})}),[null==t?void 0:t.monthlyActivity]),k=r.useCallback((()=>(null==t?void 0:t.mostActiveAdmins)&&0!==t.mostActiveAdmins.length?e.jsx("div",{className:"space-y-3",children:t.mostActiveAdmins.map(((r,t)=>e.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 dark:hover:bg-gray-750 rounded-lg transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 mr-3 font-semibold",children:t+1}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:r.adminName}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.adminId.substring(0,8)})]})]}),e.jsxs("div",{className:"flex items-center bg-blue-50 dark:bg-blue-900/20 px-2 py-1 rounded-full",children:[e.jsx(g,{className:"h-3.5 w-3.5 text-blue-600 dark:text-blue-400 mr-1.5"}),e.jsx("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:r.actionsCount})]})]},r.adminId)))}):e.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No activity data available"})),[null==t?void 0:t.mostActiveAdmins]),A=r.useCallback((()=>(null==t?void 0:t.recentLogins)&&0!==t.recentLogins.length?e.jsx("div",{className:"space-y-3",children:t.recentLogins.map((r=>{const t=new Date(r.timestamp),a=(new Date).getTime()-t.getTime(),s=Math.floor(a/864e5),n=Math.floor(a/36e5),i=Math.floor(a/6e4);let l;return l=s>0?`${s}d ago`:n>0?`${n}h ago`:`${i}m ago`,e.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 dark:hover:bg-gray-750 rounded-lg transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400 mr-3",children:e.jsx(q,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:r.adminName}),e.jsxs("div",{className:"flex items-center text-xs",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:r.ipAddress}),e.jsx("span",{className:"mx-1.5 h-1 w-1 rounded-full bg-gray-300 dark:bg-gray-700"}),e.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:l})]})]})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap",children:t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},r.adminId)}))}):e.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No recent login data available"})),[null==t?void 0:t.recentLogins]);return e.jsxs("div",{children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-5 mb-6 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center",children:[e.jsx(g,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mr-2"}),"Admin Analytics Dashboard"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:"Comprehensive analytics for monitoring admin activity and usage patterns."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:s,onChange:e=>n(e.target.value),className:"appearance-none bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-300 py-2 px-3 pr-8 rounded-lg text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"1y",children:"Last year"})]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-300",children:e.jsx(B,{className:"h-4 w-4"})})]}),e.jsxs("button",{onClick:()=>d(!o),className:"flex items-center justify-center gap-1.5 bg-gray-50 hover:bg-gray-100 dark:bg-gray-700 dark:hover:bg-gray-650 border border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-300 py-2 px-3 rounded-lg text-sm font-medium transition-colors",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{children:"Filters"}),o?e.jsx(V,{className:"h-4 w-4"}):e.jsx(B,{className:"h-4 w-4"})]}),e.jsxs("button",{onClick:b,disabled:c,className:"flex items-center justify-center gap-1.5 bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 border border-blue-200 dark:border-blue-800 text-blue-700 dark:text-blue-400 py-2 px-3 rounded-lg text-sm font-medium transition-colors "+(c?"opacity-70 cursor-not-allowed":""),children:[e.jsx(R,{className:"h-4 w-4 "+(c?"animate-spin":"")}),e.jsx("span",{children:c?"Refreshing...":"Refresh Data"})]})]})]}),o&&e.jsx("div",{className:"bg-gray-50 dark:bg-gray-750 border border-gray-200 dark:border-gray-700 rounded-lg p-4 mb-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Department"}),e.jsx("select",{value:i,onChange:e=>l(e.target.value),className:"w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 py-2 px-3 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:f.map((r=>e.jsx("option",{value:r,children:"all"===r?"All Departments":r},r)))})]})})}),a?e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded-lg"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[...Array(4)].map(((r,t)=>e.jsx("div",{className:"h-24 bg-gray-200 dark:bg-gray-700 rounded-lg"},t)))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[...Array(4)].map(((r,t)=>e.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-700 rounded-lg"},t)))})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 p-4 rounded-lg shadow-sm hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Admins"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(null==t?void 0:t.totalAdmins)||0}),e.jsxs("div",{className:"flex items-center ml-2 text-xs "+(h.admins>0?"text-green-500":h.admins<0?"text-red-500":"text-gray-500"),children:[h.admins>0?e.jsx(N,{className:"h-3 w-3 mr-0.5"}):h.admins<0?e.jsx(_,{className:"h-3 w-3 mr-0.5"}):null,e.jsxs("span",{children:[Math.abs(h.admins),"%"]})]})]})]}),e.jsx("div",{className:"h-12 w-12 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400",children:e.jsx(x,{className:"h-6 w-6"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 p-4 rounded-lg shadow-sm hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Active Admins"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(null==t?void 0:t.activeAdmins)||0}),e.jsxs("div",{className:"flex items-center ml-2 text-xs text-green-500",children:[e.jsx(N,{className:"h-3 w-3 mr-0.5"}),e.jsxs("span",{children:[h.active,"%"]})]})]})]}),e.jsx("div",{className:"h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400",children:e.jsx(q,{className:"h-6 w-6"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 p-4 rounded-lg shadow-sm hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Disabled Admins"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(null==t?void 0:t.disabledAdmins)||0}),0!==h.disabled&&e.jsxs("div",{className:"flex items-center ml-2 text-xs "+(h.disabled<0?"text-green-500":"text-red-500"),children:[h.disabled<0?e.jsx(_,{className:"h-3 w-3 mr-0.5"}):e.jsx(N,{className:"h-3 w-3 mr-0.5"}),e.jsxs("span",{children:[Math.abs(h.disabled),"%"]})]})]})]}),e.jsx("div",{className:"h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center text-red-600 dark:text-red-400",children:e.jsx(C,{className:"h-6 w-6"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 p-4 rounded-lg shadow-sm hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Permission Changes"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(null==t?void 0:t.permissionChanges)||0}),e.jsx("div",{className:"flex items-center ml-2 text-xs "+(h.permissions>0?"text-amber-500":h.permissions<0?"text-blue-500":"text-gray-500"),children:0!==h.permissions&&e.jsxs(e.Fragment,{children:[h.permissions>0?e.jsx(N,{className:"h-3 w-3 mr-0.5"}):e.jsx(_,{className:"h-3 w-3 mr-0.5"}),e.jsxs("span",{children:[Math.abs(h.permissions),"%"]})]})})]})]}),e.jsx("div",{className:"h-12 w-12 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center text-amber-600 dark:text-amber-400",children:e.jsx(u,{className:"h-6 w-6"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 p-5 rounded-lg shadow-sm hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Active vs Disabled Admins"}),e.jsx(W,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"})]}),v()]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 p-5 rounded-lg shadow-sm hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Admin Distribution by Department"}),e.jsx(Y,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"})]}),y()]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 p-5 rounded-lg shadow-sm hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Monthly Admin Activity"}),e.jsx(H,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"})]}),w()]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 p-5 rounded-lg shadow-sm hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Permission Usage Patterns"}),e.jsx(u,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"})]}),j()]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 p-5 rounded-lg shadow-sm hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Most Active Admins"}),e.jsx(g,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"})]}),k(),(null==t?void 0:t.mostActiveAdmins)&&t.mostActiveAdmins.length>0&&e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("button",{className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-500 font-medium flex items-center justify-center w-full",children:[e.jsx(I,{className:"h-4 w-4 mr-1.5"}),"Export Activity Report"]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 p-5 rounded-lg shadow-sm hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Recent Admin Logins"}),e.jsx(J,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"})]}),A(),(null==t?void 0:t.recentLogins)&&t.recentLogins.length>0&&e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("button",{className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-500 font-medium flex items-center justify-center w-full",children:[e.jsx(I,{className:"h-4 w-4 mr-1.5"}),"Export Login Report"]})})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-center text-sm text-gray-500 dark:text-gray-400 gap-2 mb-6",children:[e.jsx(R,{className:"h-3.5 w-3.5 "+(c?"animate-spin text-blue-500":"")}),e.jsx("span",{className:"flex items-center",children:c?"Refreshing data...":`Last updated: ${(new Date).toLocaleString()}`})]})]})}function $t({logs:t,loading:a}){const[s,n]=r.useState(""),[i,o]=r.useState([]),[d,c]=r.useState("all"),[m,u]=r.useState({from:"",to:""}),[x,g]=r.useState("desc");r.useEffect((()=>{let e=[...t];if(s){const r=s.toLowerCase();e=e.filter((e=>e.adminName.toLowerCase().includes(r)||e.action.toLowerCase().includes(r)||e.details.toLowerCase().includes(r)))}if("all"!==d&&(e=e.filter((e=>e.action===d))),m.from){const r=new Date(m.from);e=e.filter((e=>new Date(e.timestamp)>=r))}if(m.to){const r=new Date(m.to);r.setHours(23,59,59,999),e=e.filter((e=>new Date(e.timestamp)<=r))}e.sort(((e,r)=>{const t=new Date(e.timestamp),a=new Date(r.timestamp);return"desc"===x?+a-+t:+t-+a})),o(e)}),[t,s,d,m,x]);const h=e=>{const{name:r,value:t}=e.target;u((e=>({...e,[r]:t})))},p=e=>{switch(e){case"create_admin":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300";case"update_admin":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300";case"delete_admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300";case"reset_password":return"bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-300";case"login":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},f=e=>e.split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ");return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-750 rounded-lg border border-gray-200 dark:border-gray-700 p-4 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center",children:[e.jsx(A,{className:"h-5 w-5 text-indigo-600 dark:text-indigo-400 mr-2"}),"Admin Activity Logs"]}),e.jsxs("button",{onClick:()=>{if(0===i.length)return;const e=[["Admin","Action","Details","Timestamp","IP Address"].join(","),...i.map((e=>[`"${e.adminName}"`,`"${e.action}"`,`"${e.details.replace(/"/g,'""')}"`,`"${new Date(e.timestamp).toLocaleString()}"`,`"${e.ipAddress||""}"`].join(",")))].join("\n"),r=new Blob([e],{type:"text/csv;charset=utf-8;"}),t=URL.createObjectURL(r),a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("download",`admin-logs-${(new Date).toISOString().split("T")[0]}.csv`),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)},disabled:0===i.length,className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-indigo-700 bg-indigo-100 border border-transparent rounded-lg hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:bg-indigo-900/20 dark:text-indigo-300 dark:hover:bg-indigo-900/30 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(I,{className:"h-4 w-4 mr-1.5"}),"Export CSV"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search logs...",value:s,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 pl-9 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"}),e.jsx(T,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:d,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 pl-9 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white appearance-none",children:["all","create_admin","update_admin","delete_admin","reset_password","login","logout"].map((r=>e.jsx("option",{value:r,children:"all"===r?"All Actions":f(r)},r)))}),e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",name:"from",value:m.from,onChange:h,className:"w-full px-3 py-2 pl-9 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white",placeholder:"From date"}),e.jsx(A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",name:"to",value:m.to,onChange:h,className:"w-full px-3 py-2 pl-9 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white",placeholder:"To date"}),e.jsx(A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 pt-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:(s||"all"!==d||m.from||m.to)&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Active filters:"}),s&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:["Search: ",s,e.jsx(l,{size:14,className:"ml-1 cursor-pointer",onClick:()=>n("")})]}),"all"!==d&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:["Action: ",f(d),e.jsx(l,{size:14,className:"ml-1 cursor-pointer",onClick:()=>c("all")})]}),m.from&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:["From: ",m.from,e.jsx(l,{size:14,className:"ml-1 cursor-pointer",onClick:()=>u((e=>({...e,from:""})))})]}),m.to&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:["To: ",m.to,e.jsx(l,{size:14,className:"ml-1 cursor-pointer",onClick:()=>u((e=>({...e,to:""})))})]}),e.jsx("button",{onClick:()=>{n(""),c("all"),u({from:"",to:""})},className:"text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300",children:"Clear all"})]})}),e.jsxs("button",{onClick:()=>g((e=>"desc"===e?"asc":"desc")),className:"inline-flex items-center px-2 py-1 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",children:[e.jsx(J,{className:"h-4 w-4 mr-1"}),"desc"===x?e.jsxs(e.Fragment,{children:["Newest first ",e.jsx(S,{className:"h-3 w-3 ml-1"})]}):e.jsxs(e.Fragment,{children:["Oldest first ",e.jsx(E,{className:"h-3 w-3 ml-1"})]})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-750 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:a?e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded"}),[...Array(5)].map(((r,t)=>e.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded"},t)))]})}):0===i.length?e.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:0===t.length?"No activity logs found in the system.":"No logs match your current filters."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Admin"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Action"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Details"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Timestamp"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"IP Address"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-750 divide-y divide-gray-200 dark:divide-gray-700",children:i.map((r=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/40 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:e.jsx(K,{className:"h-4 w-4"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.adminName}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.adminId.substring(0,8)})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2.5 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${p(r.action)}`,children:f(r.action)})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white max-w-xs truncate",children:r.details}),r.resource&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Resource: ",r.resource," ",r.resourceId&&`#${r.resourceId.substring(0,8)}`]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(r.timestamp).toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:r.ipAddress||"-"})]},r.id)))})]})})}),!a&&t.length>0&&e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 text-right",children:["Showing ",i.length," of ",t.length," logs"]})]})}function Tt({admins:t,onResetPassword:a}){const[s,n]=r.useState(""),[i,l]=r.useState(""),[o,d]=r.useState(!1),[c,m]=r.useState(!1),[x,g]=r.useState(!1);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:"Security Settings"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage security settings and reset passwords"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Password Reset"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"admin-select",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select User"}),e.jsxs("select",{id:"admin-select",value:s,onChange:e=>n(e.target.value),className:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a user"}),t.filter((e=>"super-admin"!==e.role)).map((r=>e.jsxs("option",{value:r.id,children:[r.username," (",r.email,") - ",r.role]},r.id)))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"New Password"}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"flex",children:[e.jsx("input",{id:"password",type:o?"text":"password",value:i,onChange:e=>l(e.target.value),className:"flex-1 rounded-l-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Generate a secure password",readOnly:!0}),e.jsx("button",{type:"button",onClick:()=>d(!o),className:"bg-gray-100 dark:bg-gray-600 border-y border-r border-gray-300 dark:border-gray-600 rounded-r-lg px-3",children:o?e.jsx(X,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"}):e.jsx(Z,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"})})]})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>{let e="";e+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(26*Math.random())],e+="abcdefghijklmnopqrstuvwxyz"[Math.floor(26*Math.random())],e+="0123456789"[Math.floor(10*Math.random())],e+="!@#$%^&*()_+"[Math.floor(12*Math.random())];for(let r=4;r<12;r++)e+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+"[Math.floor(74*Math.random())];e=e.split("").sort((()=>Math.random()-.5)).join(""),l(e)},className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{children:"Generate Password"})]}),i&&e.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(i).then((()=>{g(!0),setTimeout((()=>g(!1)),2e3)})).catch((e=>{L("Failed to copy password to clipboard")}))},className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 px-4 py-2 rounded-lg transition-colors",children:x?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{children:"Copied!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx("span",{children:"Copy"})]})})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{type:"button",onClick:async()=>{if(s)if(!i||i.length<8)L("Please generate a secure password");else{m(!0);try{await a(s,i)?(F("Password reset successfully"),n(""),l("")):L("Failed to reset password")}catch(e){L(e.message||"Failed to reset password")}finally{m(!1)}}else L("Please select an admin")},disabled:!s||!i||c,className:"flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg transition-colors disabled:bg-red-300 dark:disabled:bg-red-800/50 disabled:cursor-not-allowed",children:[c?e.jsx(R,{className:"h-4 w-4 animate-spin"}):e.jsx(u,{className:"h-4 w-4"}),e.jsx("span",{children:"Reset Password"})]})}),s&&i&&e.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800/50 rounded-lg flex items-start gap-2 text-sm",children:[e.jsx(te,{className:"h-5 w-5 text-yellow-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-800 dark:text-yellow-400",children:"Important:"}),e.jsx("p",{className:"text-yellow-700 dark:text-yellow-300",children:"You are about to reset the password for this user. Make sure to share the new password with them securely. They should change their password after logging in."})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Security Policies"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Two-factor Authentication"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Require 2FA for all admin accounts"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Password Expiry"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Force password change every 90 days"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Session Timeout"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Auto logout after 30 minutes of inactivity"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Failed Login Lockout"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Lock account after 5 failed login attempts"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{type:"button",className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[e.jsx(u,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Security Settings"})]})})]})]})}Dt.displayName=zt.displayName;var It=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce(((t,a)=>{const s=qr(`Primitive.${a}`),n=r.forwardRef(((r,t)=>{const{asChild:n,...i}=r,l=n?s:a;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),e.jsx(l,{...i,ref:t})}));return n.displayName=`Primitive.${a}`,{...t,[a]:n}}),{}),Pt=r.forwardRef(((r,t)=>e.jsx(It.label,{...r,ref:t,onMouseDown:e=>{var t;e.target.closest("button, input, select, textarea")||(null==(t=r.onMouseDown)||t.call(r,e),!e.defaultPrevented&&e.detail>1&&e.preventDefault())}})));Pt.displayName="Label";var Ot=Pt;const qt=Fr("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Bt=r.forwardRef((({className:r,...t},a)=>e.jsx(Ot,{ref:a,className:Nr(qt(),r),...t})));Bt.displayName=Ot.displayName;const Gt=({open:r,onOpenChange:t,children:a})=>r?e.jsxs("div",{className:"fixed inset-0 z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>t(!1)}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:a})]}):null,Vt=r.forwardRef((({className:r,children:t,onClose:a,...s},n)=>e.jsxs("div",{ref:n,className:Nr("relative bg-white dark:bg-gray-950 rounded-lg shadow-xl border border-gray-200 dark:border-gray-800 w-full max-w-lg max-h-[90vh] overflow-y-auto",r),onClick:e=>e.stopPropagation(),...s,children:[a&&e.jsxs("button",{onClick:a,className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2 disabled:pointer-events-none dark:ring-offset-gray-950 dark:focus:ring-gray-300",children:[e.jsx(l,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),t]})));Vt.displayName="DialogContent";const Wt=({className:r,...t})=>e.jsx("div",{className:Nr("flex flex-col space-y-1.5 p-6 pb-4",r),...t});Wt.displayName="DialogHeader";const Ht=({className:r,...t})=>e.jsx("div",{className:Nr("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 p-6 pt-4",r),...t});Ht.displayName="DialogFooter";const Yt=r.forwardRef((({className:r,...t},a)=>e.jsx("h2",{ref:a,className:Nr("text-lg font-semibold leading-none tracking-tight text-gray-900 dark:text-white",r),...t})));Yt.displayName="DialogTitle";const Jt=r.forwardRef((({className:r,...t},a)=>e.jsx("p",{ref:a,className:Nr("text-sm text-gray-500 dark:text-gray-400",r),...t})));Jt.displayName="DialogDescription";const Kt=({className:r,...t})=>e.jsx("div",{className:Nr("px-6 py-2",r),...t});async function Xt(){try{const{data:e,error:r}=await t.from("users").select("*").order("created_at",{ascending:!1});if(r)throw new Error(r.message);return e||[]}catch(e){throw e}}async function Zt(){try{const{data:e,error:r}=await t.from("departments").select("*").order("name");if(r)throw new Error(r.message);return e||[]}catch(e){throw e}}async function Qt(e){try{let e=t.from("batches").select("*").order("name");const{data:r,error:a}=await e;if(a)throw new Error(a.message);return r||[]}catch(r){throw r}}async function ea(e){try{let e=t.from("sections").select("*").order("name");const{data:r,error:a}=await e;if(a)throw new Error(a.message);return r||[]}catch(r){throw r}}Kt.displayName="DialogBody";const ra={"super-admin":{label:"Super Admin",color:"text-red-600 dark:text-red-400",icon:M,badgeVariant:"destructive"},admin:{label:"Admin",color:"text-blue-600 dark:text-blue-400",icon:ee,badgeVariant:"info"},section_admin:{label:"Section Admin",color:"text-orange-600 dark:text-orange-400",icon:u,badgeVariant:"warning"},user:{label:"User",color:"text-gray-600 dark:text-gray-400",icon:K,badgeVariant:"secondary"}};function ta({open:t,onClose:a,user:s,departments:n,batches:i,sections:l,onSubmit:o,mode:d}){const[c,m]=r.useState({email:"",password:"",name:"",role:"user",phone:"",student_id:"",department_id:"",batch_id:"",section_id:""}),[u,x]=r.useState(!1),[g,h]=r.useState([]),[p,f]=r.useState([]);return r.useEffect((()=>{m("edit"===d&&s?{email:s.email||"",password:"",name:s.name||"",role:s.role,phone:s.phone||"",student_id:s.student_id||"",department_id:s.department_id||"",batch_id:s.batch_id||"",section_id:s.section_id||""}:{email:"",password:"",name:"",role:"user",phone:"",student_id:"",department_id:"",batch_id:"",section_id:""})}),[s,d,t]),r.useEffect((()=>{c.department_id?h(i.filter((e=>e.department_id===c.department_id))):h(i)}),[c.department_id,i]),r.useEffect((()=>{c.batch_id?f(l.filter((e=>e.batch_id===c.batch_id))):f(l)}),[c.batch_id,l]),e.jsx(Gt,{open:t,onOpenChange:a,children:e.jsxs(Vt,{onClose:a,className:"max-w-2xl",children:[e.jsxs(Wt,{children:[e.jsx(Yt,{children:"create"===d?"Create New User":"Edit User"}),e.jsx(Jt,{children:"create"===d?"Add a new user to the system with specified role and details.":`Update user information for ${(null==s?void 0:s.name)||(null==s?void 0:s.email)}`})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),"create"!==d||c.email&&c.password)if(c.name){x(!0);try{const e="create"===d?c:{name:c.name,role:c.role,phone:c.phone||void 0,student_id:c.student_id||void 0,department_id:c.department_id||void 0,batch_id:c.batch_id||void 0,section_id:c.section_id||void 0};await o(e),a()}catch(r){L(r.message||"Failed to save user")}finally{x(!1)}}else L("Name is required");else L("Email and password are required")},children:[e.jsxs(Kt,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["create"===d&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Bt,{htmlFor:"email",children:"Email *"}),e.jsx(Jr,{id:"email",type:"email",placeholder:"user@example.com",value:c.email,onChange:e=>m((r=>({...r,email:e.target.value}))),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Bt,{htmlFor:"password",children:"Password *"}),e.jsx(Jr,{id:"password",type:"password",placeholder:"",value:c.password,onChange:e=>m((r=>({...r,password:e.target.value}))),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Bt,{htmlFor:"name",children:"Full Name *"}),e.jsx(Jr,{id:"name",placeholder:"John Doe",value:c.name,onChange:e=>m((r=>({...r,name:e.target.value}))),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Bt,{htmlFor:"role",children:"Role *"}),e.jsxs("select",{id:"role",value:c.role,onChange:e=>m((r=>({...r,role:e.target.value}))),className:"w-full h-9 px-3 border border-gray-200 dark:border-gray-800 rounded-md bg-white dark:bg-gray-950 text-sm",children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"section_admin",children:"Section Admin"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"super-admin",children:"Super Admin"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Bt,{htmlFor:"phone",children:"Phone"}),e.jsx(Jr,{id:"phone",placeholder:"+1234567890",value:c.phone,onChange:e=>m((r=>({...r,phone:e.target.value})))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Bt,{htmlFor:"student_id",children:"Student ID"}),e.jsx(Jr,{id:"student_id",placeholder:"STU-123456",value:c.student_id,onChange:e=>m((r=>({...r,student_id:e.target.value})))})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-800 pt-4 mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-4",children:"Organization"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Bt,{htmlFor:"department",children:"Department"}),e.jsxs("select",{id:"department",value:c.department_id,onChange:e=>m((r=>({...r,department_id:e.target.value,batch_id:"",section_id:""}))),className:"w-full h-9 px-3 border border-gray-200 dark:border-gray-800 rounded-md bg-white dark:bg-gray-950 text-sm",children:[e.jsx("option",{value:"",children:"Select Department"}),n.map((r=>e.jsx("option",{value:r.id,children:r.name},r.id)))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Bt,{htmlFor:"batch",children:"Batch"}),e.jsxs("select",{id:"batch",value:c.batch_id,onChange:e=>m((r=>({...r,batch_id:e.target.value,section_id:""}))),className:"w-full h-9 px-3 border border-gray-200 dark:border-gray-800 rounded-md bg-white dark:bg-gray-950 text-sm",disabled:!c.department_id,children:[e.jsx("option",{value:"",children:"Select Batch"}),g.map((r=>e.jsx("option",{value:r.id,children:r.name},r.id)))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Bt,{htmlFor:"section",children:"Section"}),e.jsxs("select",{id:"section",value:c.section_id,onChange:e=>m((r=>({...r,section_id:e.target.value}))),className:"w-full h-9 px-3 border border-gray-200 dark:border-gray-800 rounded-md bg-white dark:bg-gray-950 text-sm",disabled:!c.batch_id,children:[e.jsx("option",{value:"",children:"Select Section"}),p.map((r=>e.jsx("option",{value:r.id,children:r.name},r.id)))]})]})]})]})]}),e.jsxs(Ht,{children:[e.jsx(Yr,{type:"button",variant:"outline",onClick:a,disabled:u,children:"Cancel"}),e.jsx(Yr,{type:"submit",disabled:u,children:u?"Saving...":"create"===d?"Create User":"Update User"})]})]})]})})}function aa({open:t,onClose:a,user:s,sections:n,onRoleChange:i}){var l,o;const[d,c]=r.useState("user"),[m,u]=r.useState(""),[x,g]=r.useState(!1);return r.useEffect((()=>{s&&(c(s.role),u(s.section_id||""))}),[s,t]),s?e.jsx(Gt,{open:t,onOpenChange:a,children:e.jsxs(Vt,{onClose:a,children:[e.jsxs(Wt,{children:[e.jsx(Yt,{children:"Change User Role"}),e.jsxs(Jt,{children:["Change the role for ",s.name||s.email]})]}),e.jsxs(Kt,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx(Mt,{className:"h-12 w-12",children:e.jsx(Dt,{className:"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400 text-lg",children:(null==(l=s.name)?void 0:l.charAt(0).toUpperCase())||(null==(o=s.email)?void 0:o.charAt(0).toUpperCase())})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email}),e.jsxs(Rr,{variant:ra[s.role].badgeVariant,className:"mt-1",children:["Current: ",ra[s.role].label]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Bt,{children:"New Role"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(ra).map((([r,t])=>{const a=t.icon;return e.jsxs("button",{type:"button",onClick:()=>c(r),className:"flex items-center gap-2 p-3 border rounded-lg transition-all "+(d===r?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-800 hover:border-gray-300"),children:[e.jsx(a,{className:`w-4 h-4 ${t.color}`}),e.jsx("span",{className:"text-sm font-medium",children:t.label})]},r)}))})]}),"section_admin"===d&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Bt,{children:"Assign to Section *"}),e.jsxs("select",{value:m,onChange:e=>u(e.target.value),className:"w-full h-9 px-3 border border-gray-200 dark:border-gray-800 rounded-md bg-white dark:bg-gray-950 text-sm",children:[e.jsx("option",{value:"",children:"Select Section"}),n.map((r=>e.jsx("option",{value:r.id,children:r.name},r.id)))]})]})]}),e.jsxs(Ht,{children:[e.jsx(Yr,{variant:"outline",onClick:a,disabled:x,children:"Cancel"}),e.jsx(Yr,{onClick:async()=>{if(s)if("section_admin"!==d||m){g(!0);try{await i(s.id,d,m||void 0),F(`Role changed to ${ra[d].label}`),a()}catch(e){L(e.message||"Failed to change role")}finally{g(!1)}}else L("Please select a section for section admin")},disabled:x||d===s.role,children:x?"Updating...":"Change Role"})]})]})}):null}function sa({open:t,onClose:a,user:s,onDelete:n}){var i,l;const[o,d]=r.useState(!1),[c,m]=r.useState("");if(r.useEffect((()=>{t||m("")}),[t]),!s)return null;const u="delete"===c.toLowerCase();return e.jsx(Gt,{open:t,onOpenChange:a,children:e.jsxs(Vt,{onClose:a,children:[e.jsxs(Wt,{children:[e.jsx(Yt,{className:"text-red-600",children:"Delete User"}),e.jsx(Jt,{children:"This action cannot be undone. This will permanently delete the user account."})]}),e.jsxs(Kt,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[e.jsx(Mt,{className:"h-12 w-12",children:e.jsx(Dt,{className:"bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-400 text-lg",children:(null==(i=s.name)?void 0:i.charAt(0).toUpperCase())||(null==(l=s.email)?void 0:l.charAt(0).toUpperCase())})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email}),e.jsx(Rr,{variant:ra[s.role].badgeVariant,className:"mt-1",children:ra[s.role].label})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Bt,{children:'Type "delete" to confirm'}),e.jsx(Jr,{value:c,onChange:e=>m(e.target.value),placeholder:"delete",className:"border-red-200 dark:border-red-800 focus:border-red-500"})]})]}),e.jsxs(Ht,{children:[e.jsx(Yr,{variant:"outline",onClick:a,disabled:o,children:"Cancel"}),e.jsx(Yr,{variant:"destructive",onClick:async()=>{if(s){d(!0);try{await n(s.id),F("User deleted successfully"),a()}catch(e){L(e.message||"Failed to delete user")}finally{d(!1)}}},disabled:o||!u,children:o?"Deleting...":"Delete User"})]})]})})}function na({onEdit:t,onChangeRole:a,onDelete:s}){const[n,i]=r.useState(!1);return e.jsxs("div",{className:"relative",children:[e.jsx(Yr,{variant:"ghost",size:"icon",onClick:()=>i(!n),children:e.jsx(O,{className:"w-4 h-4"})}),n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>i(!1)}),e.jsxs("div",{className:"absolute right-0 mt-1 w-48 py-1 bg-white dark:bg-gray-950 border border-gray-200 dark:border-gray-800 rounded-lg shadow-lg z-50",children:[e.jsxs("button",{onClick:()=>{t(),i(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-800 flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4"}),"Edit User"]}),e.jsxs("button",{onClick:()=>{a(),i(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-800 flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4"}),"Change Role"]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-800 my-1"}),e.jsxs("button",{onClick:()=>{s(),i(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[e.jsx(oe,{className:"w-4 h-4"}),"Delete User"]})]})]})]})}function ia({title:r,value:t,icon:a,color:s,bgColor:n}){return e.jsx(Ar,{children:e.jsx(Mr,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r}),e.jsx("p",{className:`text-2xl font-bold ${s}`,children:t})]}),e.jsx("div",{className:`p-3 rounded-full ${n}`,children:e.jsx(a,{className:`w-5 h-5 ${s}`})})]})})})}function la(){const[a,s]=r.useState([]),[n,i]=r.useState([]),[l,o]=r.useState([]),[d,c]=r.useState([]),[m,g]=r.useState(!0),[h,p]=r.useState(""),[f,b]=r.useState("all"),[y,v]=r.useState(!1),[j,w]=r.useState(!1),[k,N]=r.useState(!1),[_,C]=r.useState(null),[A,S]=r.useState("create"),E=r.useCallback((async()=>{try{g(!0);const[e,r,t,a]=await Promise.all([Xt(),Zt(),Qt(),ea()]);s(e),i(r),o(t),c(a)}catch(e){L(e.message||"Failed to load data")}finally{g(!1)}}),[]);r.useEffect((()=>{E()}),[E]);const D=r.useMemo((()=>function(e){const r=e.length,t=e.filter((e=>"super-admin"===e.role)).length,a=e.filter((e=>"admin"===e.role)).length,s=e.filter((e=>"section_admin"===e.role)).length,n=e.filter((e=>"user"===e.role)).length,i=new Date;return i.setDate(i.getDate()-7),{totalUsers:r,superAdmins:t,admins:a,sectionAdmins:s,regularUsers:n,activeUsers:e.filter((e=>e.last_active&&new Date(e.last_active)>i)).length,newUsersThisWeek:e.filter((e=>e.created_at&&new Date(e.created_at)>i)).length}}(a)),[a]),U=r.useMemo((()=>{let e=function(e,r){if(!r)return e;const t=r.toLowerCase();return e.filter((e=>{var r,a,s,n;return(null==(r=e.name)?void 0:r.toLowerCase().includes(t))||(null==(a=e.email)?void 0:a.toLowerCase().includes(t))||(null==(s=e.student_id)?void 0:s.toLowerCase().includes(t))||(null==(n=e.phone)?void 0:n.toLowerCase().includes(t))}))}(a,h);return e=function(e,r){return"all"===r?e:e.filter((e=>e.role===r))}(e,f),e}),[a,h,f]),$=e=>{C(e),S("edit"),v(!0)},I=e=>{C(e),w(!0)},P=e=>{C(e),N(!0)},O=e=>{var r;return e&&(null==(r=n.find((r=>r.id===e)))?void 0:r.name)||""},q=e=>{var r;return e&&(null==(r=d.find((r=>r.id===e)))?void 0:r.name)||""};return m?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx(R,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading users..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"User Management"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage all users, roles and permissions"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Yr,{variant:"outline",onClick:E,children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Refresh"]}),e.jsxs(Yr,{onClick:()=>{C(null),S("create"),v(!0)},children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Add User"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[e.jsx(ia,{title:"Total Users",value:D.totalUsers,icon:x,color:"text-gray-700 dark:text-gray-300",bgColor:"bg-gray-100 dark:bg-gray-800"}),e.jsx(ia,{title:"Super Admins",value:D.superAdmins,icon:M,color:"text-red-600 dark:text-red-400",bgColor:"bg-red-100 dark:bg-red-900/30"}),e.jsx(ia,{title:"Admins",value:D.admins,icon:ee,color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-100 dark:bg-blue-900/30"}),e.jsx(ia,{title:"Section Admins",value:D.sectionAdmins,icon:u,color:"text-orange-600 dark:text-orange-400",bgColor:"bg-orange-100 dark:bg-orange-900/30"}),e.jsx(ia,{title:"Regular Users",value:D.regularUsers,icon:K,color:"text-green-600 dark:text-green-400",bgColor:"bg-green-100 dark:bg-green-900/30"}),e.jsx(ia,{title:"Active (7d)",value:D.activeUsers,icon:ae,color:"text-purple-600 dark:text-purple-400",bgColor:"bg-purple-100 dark:bg-purple-900/30"})]}),e.jsx(Ar,{children:e.jsx(Mr,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Jr,{placeholder:"Search by name, email, student ID or phone...",value:h,onChange:e=>p(e.target.value),className:"pl-10"})]}),e.jsxs("select",{value:f,onChange:e=>b(e.target.value),className:"h-9 px-3 border border-gray-200 dark:border-gray-800 rounded-md bg-white dark:bg-gray-950 text-sm min-w-[150px]",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"super-admin",children:"Super Admins"}),e.jsx("option",{value:"admin",children:"Admins"}),e.jsx("option",{value:"section_admin",children:"Section Admins"}),e.jsx("option",{value:"user",children:"Users"})]})]})})}),e.jsxs(Ar,{children:[e.jsx(Sr,{children:e.jsx(Er,{className:"flex items-center justify-between",children:e.jsxs("span",{children:["Users (",U.length,")"]})})}),e.jsx(Mr,{children:0===U.length?e.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(se,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"No users found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Kr,{children:[e.jsx(Xr,{children:e.jsxs(Qr,{children:[e.jsx(et,{children:"User"}),e.jsx(et,{children:"Role"}),e.jsx(et,{className:"hidden lg:table-cell",children:"Department"}),e.jsx(et,{className:"hidden md:table-cell",children:"Section"}),e.jsx(et,{className:"hidden lg:table-cell",children:"Joined"}),e.jsx(et,{className:"text-right",children:"Actions"})]})}),e.jsx(Zr,{children:U.map((r=>{var t,a,s,n,i,l;const o=(null==(t=ra[r.role])?void 0:t.icon)||K;return e.jsxs(Qr,{children:[e.jsx(rt,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Mt,{className:"h-10 w-10",children:e.jsx(Dt,{className:"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400",children:(null==(a=r.name)?void 0:a.charAt(0).toUpperCase())||(null==(s=r.email)?void 0:s.charAt(0).toUpperCase())})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:r.name||""}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[e.jsx(ne,{className:"w-3 h-3"}),r.email]}),r.phone&&e.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(ie,{className:"w-3 h-3"}),r.phone]})]})]})}),e.jsx(rt,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{className:`w-4 h-4 ${(null==(n=ra[r.role])?void 0:n.color)||""}`}),e.jsx(Rr,{variant:(null==(i=ra[r.role])?void 0:i.badgeVariant)||"secondary",children:(null==(l=ra[r.role])?void 0:l.label)||r.role})]})}),e.jsx(rt,{className:"hidden lg:table-cell text-gray-600 dark:text-gray-400",children:O(r.department_id)}),e.jsx(rt,{className:"hidden md:table-cell text-gray-600 dark:text-gray-400",children:q(r.section_id)}),e.jsx(rt,{className:"hidden lg:table-cell text-gray-600 dark:text-gray-400",children:r.created_at?new Date(r.created_at).toLocaleDateString():""}),e.jsx(rt,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsxs(Yr,{variant:"ghost",size:"sm",onClick:()=>I(r),className:"hidden sm:inline-flex",children:[e.jsx(u,{className:"w-4 h-4 mr-1"}),"Role"]}),e.jsx(Yr,{variant:"ghost",size:"sm",onClick:()=>$(r),className:"hidden sm:inline-flex",children:e.jsx(le,{className:"w-4 h-4"})}),e.jsx(Yr,{variant:"ghost",size:"sm",onClick:()=>P(r),className:"hidden sm:inline-flex text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20",children:e.jsx(oe,{className:"w-4 h-4"})}),e.jsx("div",{className:"sm:hidden",children:e.jsx(na,{user:r,onEdit:()=>$(r),onChangeRole:()=>I(r),onDelete:()=>P(r)})})]})})]},r.id)}))})]})})})]}),e.jsx(ta,{open:y,onClose:()=>v(!1),user:_,departments:n,batches:l,sections:d,onSubmit:"create"===A?async e=>{await async function(e){try{const{data:r}=await t.auth.getUser();if(!r.user)throw new Error("You must be logged in to create users");const{data:a,error:s}=await t.auth.signUp({email:e.email,password:e.password,options:{data:{name:e.name,role:e.role}}});if(s)throw new Error(s.message);if(!a.user)throw new Error("Failed to create user account");const{data:n,error:i}=await t.from("users").upsert({id:a.user.id,email:e.email,name:e.name,role:e.role,phone:e.phone||null,student_id:e.student_id||null,department_id:e.department_id||null,batch_id:e.batch_id||null,section_id:e.section_id||null}).select().single();if(i)throw new Error(i.message);return await t.from("activities").insert({type:"user_created",title:`New user created: ${e.name}`,user_id:r.user.id,metadata:{target_user_id:a.user.id,email:e.email,role:e.role}}),n}catch(r){throw r}}(e),F("User created successfully"),await E()}:async e=>{_&&(await async function(e,r){try{const{data:a}=await t.auth.getUser();if(!a.user)throw new Error("You must be logged in to update users");const{data:s}=await t.from("users").select("*").eq("id",e).single(),{data:n,error:i}=await t.from("users").update({name:r.name,role:r.role,phone:r.phone,student_id:r.student_id,department_id:r.department_id,batch_id:r.batch_id,section_id:r.section_id}).eq("id",e).select().single();if(i)throw new Error(i.message);return"section_admin"===r.role&&r.section_id&&"section_admin"!==(null==s?void 0:s.role)&&await t.from("section_admins").upsert({user_id:e,section_id:r.section_id,assigned_by:a.user.id}),"section_admin"===(null==s?void 0:s.role)&&"section_admin"!==r.role&&await t.from("section_admins").delete().eq("user_id",e),await t.from("activities").insert({type:"user_updated",title:`User updated: ${n.name}`,user_id:a.user.id,metadata:{target_user_id:e,changes:r,previous:s}}),n}catch(a){throw a}}(_.id,e),F("User updated successfully"),await E())},mode:A}),e.jsx(aa,{open:j,onClose:()=>w(!1),user:_,sections:d,onRoleChange:async(e,r,a)=>{await async function(e,r,a){try{const{data:s}=await t.auth.getUser();if(!s.user)throw new Error("You must be logged in to change user roles");const{data:n}=await t.from("users").select("*").eq("id",e).single(),i={role:r};a&&(i.section_id=a);const{data:l,error:o}=await t.from("users").update(i).eq("id",e).select().single();if(o)throw new Error(o.message);return"section_admin"===r&&a?(await t.from("section_admins").delete().eq("user_id",e),await t.from("section_admins").insert({user_id:e,section_id:a,assigned_by:s.user.id})):"section_admin"===(null==n?void 0:n.role)&&"section_admin"!==r&&await t.from("section_admins").delete().eq("user_id",e),await t.from("activities").insert({type:"role_change",title:`User role changed: ${null==n?void 0:n.role}  ${r}`,user_id:s.user.id,metadata:{target_user_id:e,previous_role:null==n?void 0:n.role,new_role:r,section_id:a}}),l}catch(s){throw s}}(e,r,a),await E()}}),e.jsx(sa,{open:k,onClose:()=>N(!1),user:_,onDelete:async e=>{await async function(e){try{const{data:r}=await t.auth.getUser();if(!r.user)throw new Error("You must be logged in to delete users");const{data:a}=await t.from("users").select("*").eq("id",e).single();await t.from("section_admins").delete().eq("user_id",e);const{error:s}=await t.from("users").delete().eq("id",e);if(s)throw new Error(s.message);await t.from("activities").insert({type:"user_deleted",title:`User deleted: ${(null==a?void 0:a.name)||(null==a?void 0:a.email)}`,user_id:r.user.id,metadata:{deleted_user:a}})}catch(r){throw r}}(e),await E()}})]})}function oa(){return e.jsx(la,{})}function da(){const{admins:t,loading:a}=Ft(),[s,n]=r.useState(null),[i,l]=r.useState(!0);return r.useEffect((()=>{!a&&t.length>0&&(async()=>{try{l(!0);const e={totalAdmins:t.length,activeAdmins:t.filter((e=>e.isActive)).length,disabledAdmins:t.filter((e=>!e.isActive)).length,permissionChanges:Math.floor(15*Math.random())+5,departmentDistribution:[],roleDistribution:[],monthlyActivity:[],permissionUsage:[],recentLogins:[],mostActiveAdmins:[],adminsByDepartment:{}};n(e)}catch(e){}finally{l(!1)}})()}),[t,a]),e.jsx(Rt,{stats:s,loading:i})}function ca(){const[a,s]=r.useState([]),[n,i]=r.useState(!0);return r.useEffect((()=>{(async()=>{try{i(!0);const{data:e}=await t.from("activities").select("*").order("created_at",{ascending:!1}).limit(100);if(e){const r=e.map((e=>({id:e.id,timestamp:e.created_at,adminId:e.user_id||"",adminName:"Admin",action:e.type,target:e.title,details:{description:e.title,metadata:e.metadata},ipAddress:"0.0.0.0",userAgent:"N/A",status:"success"})));s(r)}}catch(e){}finally{i(!1)}})()}),[]),e.jsx($t,{logs:a,loading:n})}function ma(){const{admins:r,resetPassword:t}=Ft();return e.jsx(Tt,{admins:r,onResetPassword:t})}function ua(){var t;const a=s(),i=n(),[l,o]=r.useState("overview"),[d,c]=r.useState(!1),[u,x]=r.useState(!1),[g,h]=r.useState(!1),[p,j]=r.useState(!1),{isDark:w,toggle:k}=f(),{logout:N,user:_}=de(),{refreshAdmins:C}=Ft();return r.useEffect((()=>{const e=i.pathname;o({"/superadmin/dashboard":"overview","/superadmin/overview":"overview","/superadmin/admins":"admins","/superadmin/sectionadmins":"section-admins","/superadmin/analytics":"analytics","/superadmin/logs":"logs","/superadmin/security":"security"}[e]||"overview")}),[i.pathname]),r.useEffect((()=>{const e=()=>{const e=window.innerWidth<1024;h(e),!e&&u&&x(!1)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[u]),r.useEffect((()=>{localStorage.setItem("is_super_admin","true"),sessionStorage.setItem("is_super_admin","true"),C()}),[C]),e.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-950",children:[e.jsx(Cr,{activeTab:l,onTabChange:e=>{o(e),a({overview:"/superadmin/dashboard",admins:"/superadmin/admins","section-admins":"/superadmin/sectionadmins",analytics:"/superadmin/analytics",logs:"/superadmin/logs",security:"/superadmin/security"}[e]||"/superadmin/dashboard",{replace:!0})},isCollapsed:d,onToggleCollapse:()=>c(!d),isMobile:g,isOpen:u,onClose:()=>x(!1)}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("header",{className:"bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 px-4 lg:px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>x(!0),className:"lg:hidden p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:e.jsx(m,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl lg:text-2xl font-bold text-gray-900 dark:text-white",children:{overview:"Dashboard Overview",admins:"Admin Management","section-admins":"Section Admin Management",analytics:"Analytics & Reports",logs:"System Logs",security:"Security Settings"}[l]||"Dashboard"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 hidden sm:block",children:{overview:"Monitor your system at a glance",admins:"Manage system administrators and their permissions","section-admins":"Manage section-level administrators",analytics:"View detailed analytics and performance metrics",logs:"Monitor system activities and audit logs",security:"Configure security settings and permissions"}[l]||""})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg relative",children:[e.jsx(ce,{className:"w-5 h-5"}),e.jsx(Rr,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-[10px]",children:"3"})]}),e.jsx("button",{onClick:k,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:w?e.jsx(b,{className:"w-5 h-5"}):e.jsx(y,{className:"w-5 h-5"})}),e.jsxs("div",{className:"hidden sm:flex items-center gap-2 pl-2 border-l border-gray-200 dark:border-gray-800",children:[e.jsx(Mt,{className:"h-8 w-8",children:e.jsx(Dt,{className:"bg-blue-600 text-white text-sm",children:(null==(t=null==_?void 0:_.name)?void 0:t.charAt(0).toUpperCase())||"SA"})}),e.jsxs("div",{className:"hidden lg:block",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:(null==_?void 0:_.name)||"Super Admin"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:null==_?void 0:_.email})]})]}),e.jsxs(Yr,{variant:"ghost",size:"sm",onClick:async()=>{if(!p)try{j(!0),await N(),a("/auth",{replace:!0})}catch(e){j(!1)}},disabled:p,className:"gap-2",children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:p?"Logging out...":"Logout"})]})]})]})}),e.jsx("main",{className:"flex-1 overflow-auto p-4 lg:p-6",children:e.jsx("div",{className:"max-w-[1600px] mx-auto",children:(()=>{switch(l){case"overview":default:return e.jsx($r,{});case"admins":return e.jsx(Lt,{});case"section-admins":return e.jsx(oa,{});case"analytics":return e.jsx(da,{});case"logs":return e.jsx(ca,{});case"security":return e.jsx(ma,{})}})()})})]})]})}export{ua as SuperAdminDashboard};
