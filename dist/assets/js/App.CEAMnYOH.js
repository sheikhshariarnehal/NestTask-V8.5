const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/icons.B5_ZQj31.js","assets/js/react-vendor.BQ9wcLSU.js","assets/js/charts.DuHk9BWv.js","assets/js/vendor.Vy3uO1vB.js","assets/js/TaskCategories.B_CxM1jD.js","assets/js/UpcomingPage.BY6_2PoS.js","assets/js/capacitor-vendor.WkpnXCg6.js","assets/js/useTasks.CxrSvweo.js","assets/js/index.u2ZZMBhh.js","assets/js/ionic-vendor.ClmuHuJk.js","assets/css/ionic-vendor.5aKpPXL6.css","assets/js/supabase-vendor.nnmAzafq.js","assets/css/index.CS2pJ8e2.css","assets/js/telegram.service.CKSqE0Xu.js","assets/js/dateUtils.8XYiGfWV.js","assets/js/useAuth.BFXRZAYD.js","assets/js/dataCache.DP4PyhNH.js","assets/js/authErrors.BDay5vyW.js","assets/js/date-utils.CA8GdWm1.js","assets/js/SearchPage.DuHEAlrQ.js","assets/js/AuthPage.D-mWUv39.js","assets/js/AuthSubmitButton.Ak0RWPSY.js","assets/js/useTheme.CGN4hm2q.js","assets/js/framer-vendor.DjTtDeWL.js","assets/js/ResetPasswordPage.B0HU7PnA.js","assets/js/linkParser.CRNpH1Sh.js","assets/js/googleDriveUtils.DgFtRDYK.js","assets/js/LectureSlidesPage.DvstsGtx.js","assets/js/lectureSlide.service.oMulEzYt.js","assets/js/LoadingScreen.DY9CiPqQ.js","assets/js/RoutinePage.CQC1g8UV.js"])))=>i.map(i=>d[i]);
import{C as e,A as a,N as t,P as s,_ as r,S as n,a as l}from"./capacitor-vendor.WkpnXCg6.js";import{r as i,j as d,R as o,b as c,u as m}from"./react-vendor.BQ9wcLSU.js";import{u}from"./useAuth.BFXRZAYD.js";import{u as g,a as x}from"./useTasks.CxrSvweo.js";import{s as h,g as b}from"./index.u2ZZMBhh.js";import{AuthPage as p}from"./AuthPage.D-mWUv39.js";import{LucideX as f,LucideMapPin as y,Github as v,Linkedin as k,LucideTwitter as w,LucideMail as j,Globe as N,Briefcase as C,GraduationCap as S,Award as D,Loader2 as E,Bell as _,CheckCircle2 as A,AlertCircle as T,LucideSmartphone as L,LucideMoon as P,LucideShield as M,Code as R,LucideSettings as I,BookOpen as $,Layers as O,LucideUsers as U,ChevronRight as z,LogOut as F,LucideSun as V,Calendar as B,Home as W,Clock as Y,LucideSearch as X,FileText as q,FileSpreadsheet as G,LucidePresentation as H,Folder as K,FileImage as J,Link as Q,LucideTag as Z,Copy as ee,LucidePaperclip as ae,Download as te,Eye as se,ExternalLink as re,ListTodo as ne}from"./icons.B5_ZQj31.js";import{u as le}from"./useTheme.CGN4hm2q.js";import{u as ie,m as de,A as oe}from"./framer-vendor.DjTtDeWL.js";import{g as ce,s as me,e as ue,a as ge,b as xe,f as he,i as be}from"./date-utils.CA8GdWm1.js";import{i as pe,a as fe}from"./dateUtils.8XYiGfWV.js";import{ResetPasswordPage as ye}from"./ResetPasswordPage.B0HU7PnA.js";import{p as ve}from"./linkParser.CRNpH1Sh.js";import{g as ke,e as we,a as je,b as Ne}from"./googleDriveUtils.DgFtRDYK.js";import{I as Ce,a as Se,b as De,c as Ee,s as _e}from"./ionic-vendor.ClmuHuJk.js";function Ae(s={}){const r=i.useRef(s),n=i.useRef({isVisible:!document.hidden,isOnline:navigator.onLine,isActive:!0}),l=i.useRef(Date.now()),d=i.useRef(Date.now()),o=e.isNativePlatform(),c=i.useCallback((()=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("app-resume"))}),[]);i.useEffect((()=>{r.current=s}),[s]);const m=i.useCallback((()=>{var e,a,t,s,l,i;null==(a=(e=r.current).onFocus)||a.call(e),n.current.isActive||(n.current.isActive=!0,null==(s=(t=r.current).onAppStateChange)||s.call(t,!0)),Date.now()-d.current>250&&(null==(i=(l=r.current).onResume)||i.call(l),c())}),[]),u=i.useCallback((()=>{var e,a,t,s;null==(a=(e=r.current).onBlur)||a.call(e),n.current.isActive=!1,null==(s=(t=r.current).onAppStateChange)||s.call(t,!1),d.current=Date.now()}),[]),g=i.useCallback((()=>{var e,a,t,s;const i=!document.hidden,d=n.current.isVisible;n.current.isVisible=i,i&&!d?(Date.now(),l.current,null==(a=(e=r.current).onResume)||a.call(e),c()):i||(l.current=Date.now()),null==(s=(t=r.current).onVisibilityChange)||s.call(t,i)}),[]),x=i.useCallback((()=>{var e,a,t,s;n.current.isOnline=!0,null==(a=(e=r.current).onNetworkChange)||a.call(e,!0),null==(s=(t=r.current).onResume)||s.call(t),c()}),[]),h=i.useCallback((()=>{var e,a;n.current.isOnline=!1,null==(a=(e=r.current).onNetworkChange)||a.call(e,!1)}),[]);return i.useEffect((()=>{window.addEventListener("focus",m),window.addEventListener("blur",u),document.addEventListener("visibilitychange",g),window.addEventListener("online",x),window.addEventListener("offline",h);let e=null,s=null;return o&&(a.addListener("appStateChange",(e=>{var a,t,s,l;const i=n.current.isActive;n.current.isActive=e.isActive,null==(t=(a=r.current).onAppStateChange)||t.call(a,e.isActive),e.isActive&&!i&&(null==(l=(s=r.current).onResume)||l.call(s),c())})).then((e=>{s=e})).catch((e=>{})),t.addListener("networkStatusChange",(e=>{var a,t,s,l,i,d;const o=n.current.isOnline;n.current.isOnline=e.connected,e.connected&&!o?(null==(t=(a=r.current).onNetworkChange)||t.call(a,!0),null==(l=(s=r.current).onResume)||l.call(s),c()):e.connected||null==(d=(i=r.current).onNetworkChange)||d.call(i,!1)})).then((a=>{e=a})).catch((e=>{}))),()=>{window.removeEventListener("focus",m),window.removeEventListener("blur",u),document.removeEventListener("visibilitychange",g),window.removeEventListener("online",x),window.removeEventListener("offline",h),o&&(null==s||s.remove(),null==e||e.remove())}}),[m,u,g,x,h,o,c]),{isVisible:n.current.isVisible,isOnline:n.current.isOnline,isActive:n.current.isActive}}const Te={isSupported:!1,isRegistered:!1,permissionStatus:"unknown",token:null,error:null,loading:!0};let Le={...Te};const Pe=new Set;let Me=null,Re=!1,Ie=!1,$e=null,Oe=null;function Ue(e){return"object"==typeof e&&null!==e}function ze(e){if("string"==typeof e)return e;if(Ue(e)){const a=e.message,t=e.error;if("string"==typeof t)return t;if("string"==typeof a)return a}return String(e)}function Fe(e){Le=e;for(const a of Pe)a(Le)}function Ve(e){Fe(e(Le))}async function Be(a){if(!Re)if(Re=!0,a){s.addListener("registration",(async a=>{const t=null==a?void 0:a.value;if(t&&(Ve((e=>({...e,isRegistered:!0,token:t,loading:!1,error:null}))),Me))try{await async function(a,t){const s=Date.now();if(Oe&&Oe.userId===a&&Oe.token===t&&s-Oe.savedAt<12e4)return;const r={platform:e.getPlatform(),model:"unknown",osVersion:"unknown",appVersion:"1.0.0"},n={user_id:a,token:t,platform:e.getPlatform(),device_info:r,is_active:!0,updated_at:(new Date).toISOString()},{data:l,error:i}=await h.from("fcm_tokens").upsert(n,{onConflict:"token",ignoreDuplicates:!1}).select();if(i)throw i;Oe={userId:a,token:t,savedAt:s}}(Me,t)}catch(s){const e=function(e){if(!Ue(e))return String(e);const a="string"==typeof e.message?e.message:function(e){try{return JSON.stringify(e)}catch(a){return String(e)}}(e),t="string"==typeof e.details?e.details:void 0,s="string"==typeof e.hint?e.hint:void 0,r="string"==typeof e.code?e.code:void 0;return[a,t&&`details=${t}`,s&&`hint=${s}`,r&&`code=${r}`].filter(Boolean).join(" | ")}(s);Ve((a=>({...a,error:e})))}})),s.addListener("registrationError",(e=>{const a=ze(e);Ve((e=>({...e,isRegistered:!1,loading:!1,error:a||"Registration failed"})))})),s.addListener("pushNotificationReceived",(e=>{}));try{const e=await s.checkPermissions();Ve((a=>({...a,isSupported:!0,permissionStatus:e.receive,loading:!1})))}catch(t){Ve((e=>({...e,loading:!1})))}}else Fe({...Te,isSupported:!1,loading:!1,error:"Push notifications are only supported on native platforms"})}function We(){const{user:a}=u(),[t,r]=i.useState(Le),n=e.isNativePlatform(),l=i.useCallback((async()=>n?$e||($e=(async()=>{try{Ve((e=>({...e,loading:!0,error:null}))),"android"!==e.getPlatform()||Ie||(await s.createChannel({id:"tasks",name:"Task Notifications",description:"Notifications for new tasks and updates",importance:4,visibility:1,sound:"default",vibration:!0,lights:!0,lightColor:"#3b82f6"}),Ie=!0);let a=await s.checkPermissions();return"prompt"===a.receive&&(a=await s.requestPermissions()),"granted"!==a.receive?(Ve((e=>({...e,permissionStatus:a.receive,loading:!1,error:"Push notification permission denied"}))),!1):(await s.register(),Ve((e=>({...e,isSupported:!0,permissionStatus:"granted",loading:!1}))),!0)}catch(a){const e=ze(a);return Ve((a=>({...a,loading:!1,error:e||"Failed to register for push notifications"}))),!1}finally{$e=null}})(),$e):(Ve((e=>({...e,isSupported:!1,loading:!1,error:"Push notifications are only supported on native platforms"}))),Promise.resolve(!1))),[n]),d=i.useCallback((async()=>{if(!n||!t.token)return!1;try{return Me&&await async function(e,a){const{error:t}=await h.from("fcm_tokens").update({is_active:!1}).eq("token",a).eq("user_id",e);if(t)throw t}(Me,t.token),Ve((e=>({...e,isRegistered:!1,token:null}))),!0}catch(e){return!1}}),[n,t.token]);return i.useEffect((()=>{const e=e=>r(e);return Pe.add(e),r(Le),()=>{Pe.delete(e)}}),[]),i.useEffect((()=>{var e;Me=null!=(e=null==a?void 0:a.id)?e:null}),[null==a?void 0:a.id]),i.useEffect((()=>{Be(n)}),[n]),{...t,register:l,unregister:d,isNativePlatform:n}}function Ye({onClose:e}){return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm z-40",onClick:e}),d.jsxs("div",{className:"fixed inset-x-4 top-[5%] md:inset-x-auto md:left-1/2 md:-translate-x-1/2 md:w-full md:max-w-3xl bg-white rounded-2xl shadow-xl z-50 max-h-[90vh] overflow-y-auto",children:[d.jsx("div",{className:"absolute right-4 top-4 z-10",children:d.jsx("button",{onClick:e,className:"p-2 bg-white/90 hover:bg-white rounded-lg transition-colors",children:d.jsx(f,{className:"w-5 h-5 text-gray-500"})})}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"h-48 bg-gradient-to-r from-blue-600 to-indigo-600"}),d.jsx("div",{className:"absolute bottom-0 left-0 right-0 translate-y-1/2 px-6 flex justify-center",children:d.jsx("img",{src:"https://avatars.githubusercontent.com/u/113442689?s=400&u=ffb680dccfc0664b39c3990bef4a63c4639c2979&v=4",alt:"Sheikh Shariar Nehal",className:"w-32 h-32 rounded-full border-4 border-white shadow-lg object-cover"})})]}),d.jsxs("div",{className:"px-6 pt-20 pb-8",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Sheikh Shariar Nehal"}),d.jsx("p",{className:"text-gray-600 mt-1",children:"Full Stack Developer & UI/UX Designer"}),d.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2 text-gray-500 text-sm",children:[d.jsx(y,{className:"w-4 h-4"}),d.jsx("span",{children:"Dhaka, Bangladesh"})]})]}),d.jsx("div",{className:"flex justify-center gap-4 mb-8",children:[{icon:v,href:"https://github.com/sheikhshariarnehal",label:"GitHub"},{icon:k,href:"https://www.linkedin.com/in/sheikhshariarnehal/",label:"LinkedIn"},{icon:w,href:"https://twitter.com/SheikhNehal",label:"Twitter"},{icon:j,href:"mailto:sheikhshariarnehal@gmail.com",label:"Email"},{icon:N,href:"https://www.sheikhshariarnehal.com",label:"Website"}].map((e=>d.jsx("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors","aria-label":e.label,children:d.jsx(e.icon,{className:"w-5 h-5"})},e.label)))}),d.jsxs("div",{className:"mb-8",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"About Me"}),d.jsx("p",{className:"text-gray-600 leading-relaxed",children:"I am a passionate Full Stack Developer and UI/UX Designer with expertise in creating innovative digital solutions. With a strong foundation in both front-end and back-end development, I specialize in building responsive web applications and creating intuitive user experiences. Currently pursuing my BSc in Computer Science and Engineering at Daffodil International University."})]}),d.jsxs("div",{className:"mb-8",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Experience"}),d.jsx("div",{className:"space-y-4",children:[{role:"Full Stack Developer",company:"Freelance",period:"2021 - Present",description:"Developing full-stack web applications using React, Node.js, and MongoDB. Creating responsive UI/UX designs and implementing modern web technologies."},{role:"UI/UX Designer",company:"Various Projects",period:"2020 - Present",description:"Designing user interfaces and experiences for web and mobile applications. Creating wireframes, prototypes, and high-fidelity designs."}].map(((e,a)=>d.jsxs("div",{className:"flex gap-4",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx(C,{className:"w-5 h-5 text-blue-600"})}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium text-gray-900",children:e.role}),d.jsx("p",{className:"text-gray-600",children:e.company}),d.jsx("p",{className:"text-sm text-gray-500",children:e.period}),d.jsx("p",{className:"text-gray-600 mt-1",children:e.description})]})]},a)))})]}),d.jsxs("div",{className:"mb-8",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Education"}),d.jsxs("div",{className:"flex gap-4",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx(S,{className:"w-5 h-5 text-blue-600"})}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium text-gray-900",children:"BSc in Computer Science and Engineering"}),d.jsx("p",{className:"text-gray-600",children:"Daffodil International University"}),d.jsx("p",{className:"text-sm text-gray-500",children:"2020 - Present"})]})]})]}),d.jsxs("div",{className:"mb-8",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Certifications"}),d.jsx("div",{className:"space-y-3",children:["Meta Front-End Developer Professional Certificate","Google UX Design Professional Certificate","IBM Full Stack Software Developer Professional Certificate"].map(((e,a)=>d.jsxs("div",{className:"flex gap-3",children:[d.jsx(D,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),d.jsx("p",{className:"text-gray-600",children:e})]},a)))})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Skills"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:["JavaScript","TypeScript","React.js","Next.js","Node.js","Express.js","MongoDB","PostgreSQL","Figma","Adobe XD","TailwindCSS","Material-UI","Git","REST API","GraphQL","Responsive Design","UI/UX Design","Web Accessibility"].map((e=>d.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-sm font-medium",children:e},e)))})]})]})]})]})}function Xe(){const{isSupported:e,isRegistered:a,permissionStatus:t,loading:s,error:r,register:n,unregister:l,isNativePlatform:o}=We(),[c,m]=i.useState(!1);return s?d.jsx("div",{className:"flex items-center justify-center p-6 bg-white dark:bg-gray-800 rounded-xl",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(E,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 animate-spin"}),d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Checking notification status..."})]})}):d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 space-y-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-xl",children:d.jsx(_,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Push Notifications"}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:o?a?"You will receive notifications for new tasks and announcements":"Enable notifications to stay updated with new tasks and announcements":"Push notifications are available on the mobile app"})]})]}),o&&e&&d.jsxs("button",{onClick:async()=>{m(!0);try{a?await l():await n()}finally{m(!1)}},disabled:c||"denied"===t,className:`\n              relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent\n              transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\n              ${a?"bg-blue-600 dark:bg-blue-500":"bg-gray-200 dark:bg-gray-700"}\n              ${c||"denied"===t?"opacity-50 cursor-not-allowed":""}\n            `,"aria-pressed":a,children:[d.jsx("span",{className:"sr-only",children:a?"Disable notifications":"Enable notifications"}),d.jsx("span",{className:`\n                pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0\n                transition duration-200 ease-in-out\n                ${a?"translate-x-5":"translate-x-0"}\n                ${c?"animate-pulse":""}\n              `})]})]}),o&&d.jsx("div",{className:"flex items-center gap-2 text-sm",children:a?d.jsxs(d.Fragment,{children:[d.jsx(A,{className:"w-4 h-4 text-green-500"}),d.jsx("span",{className:"text-green-600 dark:text-green-400",children:"Push notifications enabled"})]}):"denied"===t?d.jsxs(d.Fragment,{children:[d.jsx(T,{className:"w-4 h-4 text-red-500"}),d.jsx("span",{className:"text-red-600 dark:text-red-400",children:"Permission denied - enable in device settings"})]}):d.jsxs(d.Fragment,{children:[d.jsx(L,{className:"w-4 h-4 text-gray-400"}),d.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Push notifications disabled"})]})}),r&&d.jsxs("div",{className:"flex items-start gap-2 p-4 rounded-lg bg-red-50 dark:bg-red-900/20",children:[d.jsx(T,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Notification Error"}),d.jsx("p",{className:"mt-1 text-sm text-red-700 dark:text-red-300",children:r})]})]}),d.jsxs("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-700",children:[d.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"You will receive notifications for:"}),d.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[d.jsxs("li",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-1.5 h-1.5 bg-blue-600 dark:bg-blue-400 rounded-full"}),"New tasks assigned to you"]}),d.jsxs("li",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-1.5 h-1.5 bg-blue-600 dark:bg-blue-400 rounded-full"}),"Important announcements"]}),d.jsxs("li",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-1.5 h-1.5 bg-blue-600 dark:bg-blue-400 rounded-full"}),"Task status updates"]})]})]})]})}function qe({onClose:e}){const{user:a}=u(),[t,s]=i.useState((()=>{const e=localStorage.getItem("dark-mode");return"true"===e||"false"!==e&&!!e&&JSON.parse(e)}));return i.useEffect((()=>{document.documentElement.classList.toggle("dark",t)}),[t]),d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 dark-transition",onClick:e}),d.jsx("div",{className:"fixed z-50 w-full max-w-md transform transition-all duration-300 ease-in-out\n                    top-[10%] left-1/2 -translate-x-1/2 px-4 sm:px-0",children:d.jsxs("div",{className:"bg-white dark:bg-dark-700 rounded-2xl shadow-xl overflow-hidden dark-transition",children:[d.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-dark-600",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Settings"}),d.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-dark-600 rounded-lg transition-colors","aria-label":"Close settings",children:d.jsx(f,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),d.jsxs("div",{className:"p-6 space-y-6",children:[d.jsx(Xe,{}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-blue-900/10 dark:bg-blue-100/10 rounded-lg",children:d.jsx(P,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Dark Mode"}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Toggle dark theme"})]})]}),d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t,onChange:()=>{const e=!t;s(e),localStorage.setItem("dark-mode",JSON.stringify(e)),document.documentElement.classList.toggle("dark",e)}}),d.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-dark-600 peer-focus:outline-none peer-focus:ring-4 \n                              peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer \n                              peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full \n                              peer-checked:after:border-white after:content-[''] after:absolute \n                              after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 \n                              after:border after:rounded-full after:h-5 after:w-5 after:transition-all \n                              peer-checked:bg-blue-600 dark:peer-checked:bg-blue-500"})]})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-blue-900/10 dark:bg-blue-100/10 rounded-lg",children:d.jsx(M,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Account Type"}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Your current account level"})]})]}),d.jsx("span",{className:"px-3 py-1 text-sm font-medium rounded-full "+(null==a||a.role,"bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300"),children:"admin"===(null==a?void 0:a.role)?"Admin":"User"})]})]})]})})]})}function Ge({onLogout:e}){var a,t;const[s,r]=i.useState(!1),[n,l]=i.useState(!1),[o,c]=i.useState(!1),{user:m}=u(),g=(null==m?void 0:m.departmentName)||null,x=(null==m?void 0:m.batchName)||null,h=(null==m?void 0:m.sectionName)||null,b=[{id:"developer",label:"Developer",icon:R,description:"API Access & Documentation",onClick:()=>{r(!1),l(!0)}},{id:"settings",label:"Settings",icon:I,description:"Preferences & Security",onClick:()=>{r(!1),c(!0)}},..."admin"===(null==m?void 0:m.role)?[{id:"admin",label:"Admin Panel",icon:M,description:"System Management",onClick:()=>{}}]:[]],p=(null==(a=null==m?void 0:m.name)?void 0:a.charAt(0).toUpperCase())||(null==(t=null==m?void 0:m.email)?void 0:t.charAt(0).toUpperCase())||"?";return d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>r(!s),className:"flex items-center justify-center w-8 h-8 sm:w-9 sm:h-9 rounded-lg bg-gray-50/90 dark:bg-gray-800/90 hover:bg-gray-100 dark:hover:bg-gray-700 hover:shadow-md transition-all duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/50 dark:focus-visible:ring-blue-400/50 active:scale-95","aria-label":"Open profile menu",children:(null==m?void 0:m.avatar)?d.jsx("img",{src:m.avatar,alt:m.name,className:"w-6 h-6 sm:w-7 sm:h-7 rounded-md object-cover border border-white/30 dark:border-gray-700/80"}):d.jsx("div",{className:"w-6 h-6 sm:w-7 sm:h-7 rounded-md bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white text-xs sm:text-sm font-medium shadow-inner",children:p})}),s&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>r(!1)}),d.jsxs("div",{className:"\n            absolute right-0 sm:-right-2 md:right-0 \n            mt-2 \n            w-[calc(100vw-2rem)] xs:w-[280px] sm:w-[300px] md:w-[320px] \n            max-h-[calc(100vh-80px)] overflow-y-auto\n            bg-white dark:bg-gray-800 \n            rounded-xl shadow-xl \n            ring-1 ring-black/5 dark:ring-white/5 \n            z-20 \n            animate-scale-in origin-top-right \n            divide-y divide-gray-100 dark:divide-gray-700\n          ",children:[d.jsxs("div",{className:"p-3 xs:p-4",children:[d.jsxs("div",{className:"flex items-center gap-3.5",children:[(null==m?void 0:m.avatar)?d.jsx("img",{src:m.avatar,alt:m.name,className:"w-10 h-10 xs:w-12 xs:h-12 rounded-lg object-cover shadow-md border-2 border-white/50 dark:border-gray-700"}):d.jsx("div",{className:"w-10 h-10 xs:w-12 xs:h-12 rounded-lg bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white shadow-md text-base xs:text-xl font-semibold",children:p}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h3",{className:"font-medium text-gray-900 dark:text-white truncate",children:(null==m?void 0:m.name)||"User"}),d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:(null==m?void 0:m.email)||"user@example.com"}),d.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 text-xs font-medium rounded-md bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",children:(null==m?void 0:m.role)||"user"})]})]}),(g||x||h)&&d.jsxs("div",{className:"mt-3.5 pt-3.5 border-t border-gray-100 dark:border-gray-700 space-y-2.5",children:[g&&d.jsxs("div",{className:"flex items-center gap-2.5 text-xs",children:[d.jsx("div",{className:"p-1 rounded-md bg-blue-50 dark:bg-blue-900/20",children:d.jsx($,{className:"w-3.5 h-3.5 text-blue-500"})}),d.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:g})]}),x&&d.jsxs("div",{className:"flex items-center gap-2.5 text-xs",children:[d.jsx("div",{className:"p-1 rounded-md bg-blue-50 dark:bg-blue-900/20",children:d.jsx(O,{className:"w-3.5 h-3.5 text-blue-500"})}),d.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:x})]}),h&&d.jsxs("div",{className:"flex items-center gap-2.5 text-xs",children:[d.jsx("div",{className:"p-1 rounded-md bg-blue-50 dark:bg-blue-900/20",children:d.jsx(U,{className:"w-3.5 h-3.5 text-blue-500"})}),d.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:h})]})]})]}),d.jsx("div",{className:"p-2",children:b.map((e=>d.jsxs("button",{onClick:e.onClick,className:"w-full flex items-center gap-2.5 p-2.5 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors group",children:[d.jsx("div",{className:"p-1.5 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-400 group-hover:bg-blue-50 dark:group-hover:bg-blue-900/20 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:d.jsx(e.icon,{className:"w-3.5 h-3.5"})}),d.jsxs("div",{className:"flex-grow text-left",children:[d.jsx("div",{className:"font-medium text-sm text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:e.label}),d.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.description})]}),d.jsx(z,{className:"w-3.5 h-3.5 text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors opacity-70 group-hover:opacity-100"})]},e.id)))}),d.jsx("div",{className:"p-2",children:d.jsxs("button",{onClick:()=>{r(!1),e()},className:"w-full flex items-center gap-2.5 p-2.5 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors group",children:[d.jsx("div",{className:"p-1.5 rounded-lg bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 group-hover:bg-red-100 dark:group-hover:bg-red-900/50 transition-colors",children:d.jsx(F,{className:"w-3.5 h-3.5"})}),d.jsxs("div",{className:"flex-grow text-left",children:[d.jsx("div",{className:"font-medium text-sm",children:"Logout"}),d.jsx("div",{className:"text-xs text-red-500 dark:text-red-400",children:"End your session"})]})]})})]})]}),n&&d.jsx(Ye,{onClose:()=>l(!1)}),o&&d.jsx(qe,{onClose:()=>c(!1)})]})}const He={hidden:{opacity:0,scale:1},visible:{opacity:1,scale:1},exit:{opacity:0,scale:1}},Ke={duration:.15,ease:[.25,.1,.25,1]},Je={hidden:{opacity:0},visible:{opacity:1},exit:{opacity:0}},Qe={hidden:{opacity:0},visible:{opacity:1},exit:{opacity:0}},Ze={initial:{opacity:0},animate:{opacity:1,transition:{duration:.15,ease:"easeOut"}}},ea={initial:{scale:1},hover:{scale:1,transition:{duration:.15,ease:"easeOut"}},tap:{scale:.98,transition:{duration:.1,ease:"easeOut"}}},aa=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ta=i.memo((({isOpen:e,onClose:a,selectedDate:t,onSelectDate:s,tasks:r})=>{const n=ie(),[l,o]=i.useState(t);i.useEffect((()=>{o(t)}),[t]);const[c,m]=i.useState(null),[u,g]=i.useState({x:0,y:0}),[x,h]=i.useState(null),[b,p]=i.useState("calendar"),f=i.useRef(),y=i.useRef(null),v=i.useRef([]),k=i.useRef(!1),w=i.useRef(null),j=i.useRef(null),N=i.useRef(new Map),C=(e,a)=>{try{return e.getFullYear()===a.getFullYear()&&e.getMonth()===a.getMonth()&&e.getDate()===a.getDate()}catch(t){return!1}},S=i.useCallback((e=>{try{return`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`}catch(a){return""}}),[]),D=e=>new Date(e.getFullYear(),e.getMonth(),e.getDate(),12,0,0);i.useEffect((()=>{e&&(p("calendar"),o(t),h(null),setTimeout((()=>{var e;null==(e=y.current)||e.focus()}),100))}),[e,t]);const E=ce(new Date),_=i.useMemo((()=>Array.from({length:21},((e,a)=>E-10+a))),[E]);i.useEffect((()=>{const e=()=>{k.current=window.innerWidth<768};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e),f.current&&clearTimeout(f.current),w.current=null,j.current=null}}),[]);const A=i.useMemo((()=>{const e=new Map;if(!r||0===r.length)return e;const a=Math.ceil(r.length/50);for(let s=0;s<a;s++){const a=50*s,n=Math.min(50*(s+1),r.length);for(let s=a;s<n;s++){const a=r[s];try{const t=new Date(a.dueDate),s=S(t);e.has(s)||e.set(s,[]),e.get(s).push(a)}catch(t){}}}return e}),[r,S]),T=i.useMemo((()=>{const e=me(l),a=ue(l),t=ge(e),s=a.getDate(),r=new Array(t+s);r.fill(null,0,t);const n=e.getFullYear(),i=e.getMonth();for(let l=0;l<s;l++)r[t+l]=new Date(n,i,l+1,12,0,0);return r}),[l]),L=i.useCallback((e=>{if(!e)return{total:0,completed:0,overdue:0,inProgress:0};if(!A.size)return{total:0,completed:0,overdue:0,inProgress:0};const a=S(e),t=A.get(a);if(!t||0===t.length)return{total:0,completed:0,overdue:0,inProgress:0};if(N.current.has(a))return N.current.get(a);let s=0,r=0,n=0;const l=(new Date).getTime(),i=t.length;for(let c=0;c<i;c++){const e=t[c];if("completed"!==e.status)try{new Date(e.dueDate).getTime()<l?r++:n++}catch(o){n++}else s++}const d={total:i,completed:s,overdue:r,inProgress:n};return N.current.set(a,d),d}),[A,S]),P=i.useCallback((e=>{if(!e)return[];if(!A.size)return[];const a=S(e),t=A.get(a)||[];return 0===t.length?r.filter((a=>{try{const t=new Date(a.dueDate);return C(t,e)}catch(t){return!1}})):t}),[A,r,C,S]),M=i.useCallback((()=>{o((e=>xe(e,-1))),h(null)}),[]),R=i.useCallback((()=>{o((e=>xe(e,1))),h(null)}),[]),I=i.useCallback((()=>{p((e=>"calendar"===e?"year":"calendar"))}),[]),$=i.useCallback((e=>{const a=new Date(e,l.getMonth(),1,12,0,0);o(a),p("calendar"),h(null)}),[l]),O=i.useCallback(((e,a)=>{if(!k.current){m(e);const t=a.currentTarget.getBoundingClientRect(),s=220,r=t.top-10,n=r<s?t.bottom+10:r,l=r<s?"translateY(0)":"translate(-50%, -100%)";g({x:t.left+t.width/2,y:n,transformOrigin:l})}}),[]),U=i.useCallback((()=>{m(null)}),[]),z=i.useMemo((()=>({onPointerDown:e=>{w.current=e.clientX,j.current=e.clientY},onPointerMove:e=>{null!==w.current&&Math.abs(e.clientX-w.current)>10&&m(null)},onPointerUp:e=>{if(null!==w.current){const a=e.clientX-w.current,t=null!==j.current?e.clientY-j.current:0,s=Math.min(.15*window.innerWidth,80);Math.abs(a)>Math.abs(t)&&Math.abs(a)>s&&requestAnimationFrame((()=>{a>0?M():R()}))}w.current=null,j.current=null},style:{touchAction:"pan-y"}})),[M,R]),F=i.useCallback((e=>{w.current=e.touches[0].clientX,j.current=e.touches[0].clientY}),[]),V=i.useCallback((e=>{null!==w.current&&Math.abs(e.touches[0].clientX-w.current)>10&&m(null)}),[]),B=i.useCallback((e=>{if(null!==w.current&&null!==j.current){const a=e.changedTouches[0].clientX,t=e.changedTouches[0].clientY,s=a-w.current,r=t-j.current,n=Math.min(.15*window.innerWidth,80);Math.abs(s)>Math.abs(r)&&Math.abs(s)>n&&requestAnimationFrame((()=>{s>0?M():R()}))}w.current=null,j.current=null}),[M,R]),W=i.useCallback((e=>{try{const t=D(e);a(),s(t);const r=new CustomEvent("preventAutoTaskSelect",{detail:{date:t}});window.dispatchEvent(r)}catch(t){}}),[s,a]),Y=i.useCallback((e=>{if("calendar"===b){if("ArrowLeft"===e.key&&(e.ctrlKey||e.metaKey)||"PageUp"===e.key)return M(),void e.preventDefault();if("ArrowRight"===e.key&&(e.ctrlKey||e.metaKey)||"PageDown"===e.key)return R(),void e.preventDefault();if("Escape"===e.key)return a(),void e.preventDefault();switch(e.key){case"ArrowLeft":h(null===x?15:e=>null===e?15:Math.max(0,e-1)),e.preventDefault();break;case"ArrowRight":h(null===x?15:e=>null===e?15:Math.min(T.length-1,e+1)),e.preventDefault();break;case"ArrowUp":h(null===x?15:e=>null===e?15:Math.max(0,e-7)),e.preventDefault();break;case"ArrowDown":h(null===x?15:e=>null===e?15:Math.min(T.length-1,e+7)),e.preventDefault();break;case"Home":h(T.findIndex((e=>null!==e))),e.preventDefault();break;case"End":h(T.length-1),e.preventDefault()}null!==x&&requestAnimationFrame((()=>{var e;v.current[x]&&(null==(e=v.current[x])||e.focus())}))}}),[x,T,M,R,b,a]),X=i.useCallback(((e,a)=>{switch(e.key){case"Enter":case" ":const t=T[a];t&&(W(t),e.preventDefault())}}),[T,W]);i.useEffect((()=>{const t=e=>{y.current&&!y.current.contains(e.target)&&a()};return e&&document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}}),[e,a]),i.useEffect((()=>{v.current=v.current.slice(0,T.length)}),[T.length]);const q=i.useCallback((()=>{const e=D(new Date);o(e),W(e)}),[W]),G=i.useCallback((e=>e.length>30?e.substring(0,30)+"...":e),[]),H=i.useCallback((e=>e.replace(/-/g," ").split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")),[]),K=i.useMemo((()=>{if(!c)return null;if(k.current&&window.innerWidth<480)return null;const e=P(c);if(0===e.length)return null;const a="translateY(0)"===u.transformOrigin,t=k.current?5:10,s=e.length>t?e.slice(0,t):e,r=e.length>t,n=Math.round(u.x),l=Math.round(u.y);return d.jsxs(de.div,{className:"absolute z-50 bg-white dark:bg-gray-800 shadow-lg rounded-lg px-3 sm:px-5 py-2 sm:py-3 text-left min-w-[180px] sm:min-w-[220px]",style:{top:`${l}px`,left:`${n}px`,transform:u.transformOrigin||"translate(-50%, -100%)",pointerEvents:"none",boxShadow:"0 10px 25px -5px rgba(0,0,0,0.1), 0 5px 10px -5px rgba(0,0,0,0.05)",imageRendering:"crisp-edges"},variants:Qe,initial:"hidden",animate:"visible",exit:"exit",transition:{duration:.15},children:[d.jsxs("div",{className:"font-medium text-xs sm:text-sm text-gray-900 dark:text-white mb-1 sm:mb-1.5 pb-1.5 sm:pb-2 border-b border-gray-100 dark:border-gray-700",children:[he(c,"MMMM d, yyyy")," - ",e.length," ",1===e.length?"task":"tasks"]}),d.jsxs("ul",{className:"space-y-2 sm:space-y-3.5 max-h-[140px] sm:max-h-[170px] overflow-y-auto pt-1",children:[s.map((e=>d.jsxs("li",{className:"flex items-start",children:[d.jsx("div",{className:`w-2.5 h-2.5 sm:w-3.5 sm:h-3.5 rounded-full mt-0.5 mr-2 sm:mr-3 flex-shrink-0 ${(()=>{const a=e.category.toLowerCase();return"quiz"===a?"bg-blue-500":"lab-report"===a?"bg-red-500":"project"===a?"bg-emerald-500":a.includes("lab")?"bg-red-500":["quiz","data","science"].some((t=>a.includes(t)||e.name.toLowerCase().includes(t)))?"bg-blue-500":["project","research","development"].some((t=>a.includes(t)||e.name.toLowerCase().includes(t)))?"bg-emerald-500":"bg-gray-500"})()}`}),d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-800 dark:text-gray-200 leading-tight",children:G(e.name)}),d.jsx("span",{className:"text-[10px] sm:text-xs text-gray-500 leading-tight",children:H(e.category)})]})]},e.id))),r&&d.jsxs("li",{className:"text-[10px] sm:text-xs text-center text-gray-500 italic pt-1",children:["+ ",e.length-t," more tasks..."]})]}),d.jsx("div",{className:"absolute w-3 h-3 sm:w-4 sm:h-4 bg-white dark:bg-gray-800 transform rotate-45 \n            "+(a?"-top-1.5 sm:-top-2 left-1/2 -translate-x-1/2":"-bottom-1.5 sm:-bottom-2 left-1/2 -translate-x-1/2")})]})}),[c,u,P,G,H,k]);return i.useEffect((()=>{N.current.clear()}),[r,l]),d.jsx(oe,{children:e&&d.jsx(de.div,{variants:n?Je:He,initial:"hidden",animate:"visible",exit:"exit",transition:Ke,className:"fixed inset-0 z-50 flex items-center justify-center p-0 sm:p-4 bg-black/30 backdrop-blur-sm",style:{willChange:"opacity",backfaceVisibility:"hidden"},children:d.jsxs("div",{className:"flex flex-col bg-white dark:bg-gray-800 rounded-xl shadow-2xl overflow-hidden w-[92vw] sm:w-full sm:max-w-md md:max-w-lg lg:max-w-xl mx-auto my-auto max-h-[95vh] sm:max-h-[85vh] touch-manipulation",ref:y,role:"dialog","aria-modal":"true","aria-label":"Monthly Calendar",onClick:e=>e.stopPropagation(),...z,onKeyDown:Y,tabIndex:0,style:{margin:"0 auto",overflowY:"auto",overflowX:"hidden",WebkitOverflowScrolling:"touch",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",maxWidth:k.current?"calc(100% - 16px)":void 0,imageRendering:"crisp-edges"},children:[d.jsxs("div",{className:"flex justify-between items-center p-3 sm:p-4 border-b border-gray-100 dark:border-gray-700",children:[d.jsx("div",{className:"flex-1",children:d.jsx("button",{onClick:M,className:"p-1.5 sm:p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400","aria-label":"Previous month",children:d.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})})}),d.jsx("button",{onClick:I,className:"flex-1 text-base sm:text-xl font-semibold text-gray-800 dark:text-white mx-1 sm:mx-2 hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-md py-1 sm:py-1.5 px-2 sm:px-3 transition-colors","aria-label":`Current month and year: ${he(l,"MMMM yyyy")}. Click to select year.`,children:he(l,k.current?"MMM yyyy":"MMMM yyyy")}),d.jsx("div",{className:"flex-1 flex justify-end",children:d.jsx("button",{onClick:R,className:"p-1.5 sm:p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400","aria-label":"Next month",children:d.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})})})]}),d.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2 sm:gap-4 py-2 sm:py-3 px-2 sm:px-4 text-[10px] sm:text-xs font-medium text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-750 border-b border-gray-100 dark:border-gray-700",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("div",{className:"w-2 h-2 sm:w-2.5 sm:h-2.5 rounded-full bg-green-500"}),d.jsx("span",{children:"Completed"})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("div",{className:"w-2 h-2 sm:w-2.5 sm:h-2.5 rounded-full bg-red-500"}),d.jsx("span",{children:"Overdue"})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("div",{className:"w-2 h-2 sm:w-2.5 sm:h-2.5 rounded-full bg-blue-500"}),d.jsx("span",{children:"In Progress"})]}),!k.current&&d.jsx("div",{className:"hidden sm:flex items-center text-xs gap-1 ml-2 text-gray-500 italic",children:d.jsx("span",{children:"Swipe or use arrow keys"})})]}),d.jsx(oe,{mode:"wait",children:"year"===b?d.jsx(de.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.15},className:"p-3 sm:p-4 pb-4 sm:pb-6 max-h-[250px] overflow-y-auto",children:d.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 lg:grid-cols-5 gap-2 sm:gap-3",children:_.map((e=>d.jsx("button",{onClick:()=>$(e),className:`\n                          py-1.5 sm:py-2.5 rounded-md text-center transition-colors text-xs sm:text-sm\n                          ${e===ce(l)?"bg-blue-500 text-white font-medium shadow-sm":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-100 dark:border-gray-700"}\n                        `,"aria-label":`${e}${e===ce(l)?", selected":""}`,"aria-selected":e===ce(l),children:e},e)))})},"year-selector"):d.jsx(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.15,ease:"easeOut"},className:"calendar-container w-full",onTouchStart:e=>{e.target.closest("button")||F(e)},onTouchMove:e=>{V(e)},onTouchEnd:e=>{e.target.closest("button")||B(e)},children:d.jsxs("div",{className:"p-2 sm:p-3 md:p-4 pb-4 sm:pb-5 md:pb-6 overflow-x-hidden w-full",children:[d.jsx("div",{className:"grid grid-cols-7 mb-2 sm:mb-3 md:mb-4 w-full",children:aa.map((e=>d.jsx("div",{className:"text-center text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 py-1 sm:py-2",children:k.current?e.charAt(0):e},e)))}),d.jsx("div",{className:"grid grid-cols-7 gap-1 sm:gap-1.5 md:gap-2.5 content-start w-full",children:T.map(((e,a)=>{if(!e)return d.jsx("div",{className:"aspect-square"},`empty-${a}`);const s=L(e);let r=!1,n=!1;try{r=C(e,t),n=be(e)}catch(i){}const l=x===a;return d.jsxs(de.button,{ref:e=>{v.current[a]=e},onClick:()=>W(e),whileHover:k.current?void 0:"hover",whileTap:"tap",variants:ea,initial:"initial",style:{touchAction:"manipulation",imageRendering:"crisp-edges",WebkitFontSmoothing:"subpixel-antialiased"},onPointerDown:e=>{w.current=e.clientX,j.current=e.clientY},onPointerUp:a=>{if(null!==w.current){const t=a.clientX-w.current,s=null!==j.current?a.clientY-j.current:0,r=10;Math.abs(t)<r&&Math.abs(s)<r&&W(e)}w.current=null,j.current=null},onMouseEnter:a=>O(e,a),onMouseLeave:U,tabIndex:l?0:-1,onKeyDown:e=>X(e,a),className:`\n                              relative aspect-square rounded-md\n                              flex flex-col items-center justify-center\n                              touch-manipulation border border-transparent\n                              min-w-[28px] min-h-[28px] sm:min-w-[32px] sm:min-h-[32px] md:min-w-[36px] md:min-h-[36px]\n                              ${r?"bg-blue-500 text-white shadow-md z-10":n?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 border-blue-200 dark:border-blue-800":s.total>0?"hover:bg-gray-50 dark:hover:bg-gray-700/50 bg-white dark:bg-gray-800 shadow-sm":"hover:bg-gray-50 dark:hover:bg-gray-700/50 bg-white dark:bg-gray-800"}\n                              ${l?"ring-2 ring-blue-400 dark:ring-blue-600 z-10":""}\n                              focus:outline-none focus:ring-2 focus:ring-blue-400 dark:focus:ring-blue-600\n                              transition-colors\n                            `,"aria-label":`${he(e,"MMMM d, yyyy")}${s.total>0?`, ${s.total} tasks`:""}${r?", selected":""}${n?", today":""}`,"aria-selected":r,"aria-current":n?"date":void 0,children:[d.jsx("span",{className:`\n                              text-xs sm:text-sm md:text-base font-medium\n                              ${r?"text-white":n?"text-blue-600 dark:text-blue-400":"text-gray-800 dark:text-gray-200"}\n                            `,children:he(e,"d")}),s.total>0&&d.jsx(de.div,{className:`absolute ${r?"top-0 right-0 translate-x-1/3 -translate-y-1/3 bg-white text-blue-500 border-blue-500":"-top-0.5 -right-0.5 sm:-top-1 sm:-right-1 bg-blue-500 text-white border-white dark:border-gray-800"} \n                                  min-w-[14px] h-[14px] sm:min-w-[16px] sm:h-[16px] rounded-full \n                                  text-[8px] sm:text-[10px] font-medium flex items-center justify-center px-1\n                                  border shadow-sm`,variants:Ze,initial:"initial",animate:"animate",style:{willChange:"transform, opacity"},children:s.total},`badge-${e.toISOString()}-${s.total}`),s.total>0&&!r&&d.jsxs("div",{className:"absolute bottom-1 left-1/2 transform -translate-x-1/2 flex gap-1 justify-center",children:[s.completed>0&&d.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full bg-green-500"}),s.overdue>0&&d.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full bg-red-500"}),s.inProgress>0&&d.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full bg-blue-500"})]}),n&&!r&&d.jsx("div",{className:"absolute inset-0 rounded-md ring-1 ring-blue-400 dark:ring-blue-500/50"})]},e.toISOString())}))})]})},"calendar-view")}),d.jsxs("div",{className:"flex justify-between items-center p-3 sm:p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:[d.jsx("div",{children:k.current?d.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:"Tap to select"}):d.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:"Swipe or use arrows"})}),d.jsxs("div",{className:"flex space-x-1 sm:space-x-2",children:[d.jsx("button",{className:"px-2 sm:px-3 py-1 sm:py-1.5 bg-blue-50 text-blue-600 rounded-md hover:bg-blue-100 transition-colors text-xs sm:text-sm font-medium",onClick:q,children:"Today"}),d.jsx("button",{className:"px-2 sm:px-3 py-1 sm:py-1.5 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-xs sm:text-sm font-medium",onClick:a,children:"Close"})]})]}),d.jsx(oe,{children:c&&K})]})},"monthly-calendar-overlay")})}),((e,a)=>e.isOpen===a.isOpen&&e.selectedDate.getTime()===a.selectedDate.getTime()&&e.tasks.length===a.tasks.length&&e.onClose===a.onClose&&e.onSelectDate===a.onSelectDate)),sa={MonthlyCalendar:ta},ra=Object.freeze(Object.defineProperty({__proto__:null,MonthlyCalendar:ta,default:sa},Symbol.toStringTag,{value:"Module"}));function na({onLogout:e,hasUnreadNotifications:a,onNotificationsClick:t,activePage:s,onPageChange:r,user:n,taskStats:l,tasks:o=[]}){const{isDark:c,toggle:m}=le(),[u,g]=i.useState(!1),[x,h]=i.useState(new Date),b=i.useCallback((()=>{g((e=>!e))}),[]),p=i.useCallback((e=>{h(e),g(!1),r("upcoming");try{const a=e.getFullYear(),t=e.getMonth()+1,s=e.getDate(),r=`${a}-${t.toString().padStart(2,"0")}-${s.toString().padStart(2,"0")}`,n=new URLSearchParams(window.location.search);n.set("selectedDate",r);const l=`${window.location.pathname}?${n.toString()}`;window.history.replaceState({path:l,date:r},"",l),window.dispatchEvent(new CustomEvent("dateSelected",{detail:{date:e}}))}catch(a){}}),[r]),f=i.useCallback((()=>{g(!1)}),[]);return d.jsxs(d.Fragment,{children:[d.jsx("nav",{className:"sticky top-0 z-50 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 shadow-sm",style:{paddingTop:"env(safe-area-inset-top)",paddingLeft:"env(safe-area-inset-left)",paddingRight:"env(safe-area-inset-right)"},children:d.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-6",children:d.jsxs("div",{className:"flex justify-between items-center h-12 sm:h-14",children:[d.jsx("div",{className:"flex-shrink-0 flex items-center",children:d.jsx("h1",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent transition-all duration-300 whitespace-nowrap",children:"NestTask"})}),d.jsx("div",{className:"flex items-center",children:d.jsxs("div",{className:"inline-flex items-center justify-center bg-gray-50/30 dark:bg-gray-800/30 rounded-xl px-1.5 py-1 gap-2.5 sm:gap-3 md:gap-4",children:[d.jsx("button",{onClick:m,className:"flex items-center justify-center w-8 h-8 sm:w-9 sm:h-9 rounded-lg bg-gray-50/90 dark:bg-gray-800/90 hover:bg-gray-100 dark:hover:bg-gray-700 hover:shadow-md transition-all duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/50 dark:focus-visible:ring-blue-400/50 active:scale-95","aria-label":"Toggle theme",children:c?d.jsx(V,{className:"w-4 h-4 sm:w-4.5 sm:h-4.5 text-amber-500",strokeWidth:1.75}):d.jsx(P,{className:"w-4 h-4 sm:w-4.5 sm:h-4.5 text-indigo-600",strokeWidth:1.75})}),d.jsx("button",{onClick:b,className:"flex items-center justify-center w-8 h-8 sm:w-9 sm:h-9 rounded-lg bg-gray-50/90 dark:bg-gray-800/90 hover:bg-gray-100 dark:hover:bg-gray-700 hover:shadow-md transition-all duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/50 dark:focus-visible:ring-blue-400/50 active:scale-95","aria-label":"Show calendar",children:d.jsx(B,{className:"w-4 h-4 sm:w-4.5 sm:h-4.5 text-blue-600 dark:text-blue-400",strokeWidth:1.75})}),d.jsx(Ge,{onLogout:e})]})})]})})}),d.jsx(ta,{isOpen:u,onClose:f,selectedDate:x,onSelectDate:p,tasks:o})]})}const la=o.memo((({id:e,icon:a,label:t,ariaLabel:s,isActive:r,onClick:n,badge:l})=>d.jsxs("button",{onClick:n,"aria-label":s,"aria-current":r?"page":void 0,className:"\n        relative flex flex-col items-center justify-center w-full\n        px-1 py-1 transition-colors duration-100\n        "+(r?"text-blue-600 dark:text-blue-400":"text-gray-700 dark:text-gray-300"),style:{contain:"layout style paint",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[d.jsxs("div",{className:"relative",children:[d.jsx(a,{className:"w-5 h-5 transition-none",strokeWidth:r?2.5:1.8}),void 0!==l&&l>0&&d.jsx("span",{className:"absolute -top-1 -right-1 min-w-[14px] h-3.5 px-0.5 text-[9px] font-medium text-white bg-red-500 rounded-full flex items-center justify-center",children:l>99?"99+":l})]}),d.jsx("span",{className:"text-[10px] mt-0.5 "+(r?"font-medium":"font-normal opacity-70"),children:t})]})));function ia({activePage:e,onPageChange:a,hasUnreadNotifications:t,todayTaskCount:s=0}){const[r,n]=i.useState(null),l=i.useMemo((()=>[{id:"home",icon:W,label:"Home",ariaLabel:"Go to home page",badge:void 0},{id:"upcoming",icon:B,label:"Upcoming",ariaLabel:"View upcoming tasks",badge:s>0?s:void 0},{id:"routine",icon:Y,label:"Routine",ariaLabel:"View routine",badge:void 0},{id:"search",icon:X,label:"Search",ariaLabel:"Search content",badge:void 0}]),[s]),o=i.useMemo((()=>l.findIndex((a=>a.id===e))),[l,e]);i.useEffect((()=>{const t=t=>{var s,r;if("INPUT"===(null==(s=document.activeElement)?void 0:s.tagName)||"TEXTAREA"===(null==(r=document.activeElement)?void 0:r.tagName))return;const n=l.findIndex((a=>a.id===e));"ArrowRight"===t.key&&n<l.length-1?a(l[n+1].id):"ArrowLeft"===t.key&&n>0&&a(l[n-1].id)};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)}),[e,a,l]);const c=i.useCallback((e=>{n(e.touches[0].clientX)}),[]),m=i.useCallback((e=>{if(null===r)return;const t=e.changedTouches[0].clientX,s=r-t;Math.abs(s)<70||(s>0&&o<l.length-1?a(l[o+1].id):s<0&&o>0&&a(l[o-1].id)),n(null)}),[r,o,a,l]);return d.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white/95 dark:bg-gray-900/95 border-t border-gray-200 dark:border-gray-800 shadow-[0_-1px_3px_rgba(0,0,0,0.05)] backdrop-blur-sm",style:{paddingBottom:"env(safe-area-inset-bottom)",transform:"translateZ(0)",contain:"layout style paint"},onTouchStart:c,onTouchEnd:m,children:d.jsx("div",{className:"max-w-7xl mx-auto",children:d.jsxs("div",{className:"grid grid-cols-4 h-[50px]",children:[d.jsx("div",{className:"absolute top-0 h-0.5 bg-blue-500 dark:bg-blue-400 transition-transform duration-150 ease-out",style:{width:100/l.length+"%",transform:`translateX(${100*o}%)`,backfaceVisibility:"hidden"}}),l.map((({id:t,icon:s,label:r,ariaLabel:n,badge:l})=>d.jsx(la,{id:t,icon:s,label:r,ariaLabel:n,isActive:e===t,onClick:()=>a(t),badge:l},t)))]})})})}function da({task:e,onClose:a,onStatusUpdate:t,isUpdating:s=!1}){var r,n,l;const[o,m]=i.useState(!1),[u,g]=i.useState(new Set),[x,b]=i.useState(new Map);i.useEffect((()=>{let e;return o&&(e=setTimeout((()=>m(!1)),2e3)),()=>clearTimeout(e)}),[o]);const p=e.description.replace(/\*This task is assigned to section ID: [0-9a-f-]+\*/g,"").trim();let y=p,v=[];if(p.includes("\nAttached Files:")){const e=p.split("\nAttached Files:");y=e[0],v=(null==(r=e[1])?void 0:r.split("\n").filter((e=>e.trim()&&e.includes("]("))))||[]}else if(p.includes("**Attachments:**")){const e=p.split("**Attachments:**");y=e[0],v=(null==(n=e[1])?void 0:n.split("\n").filter((e=>e.trim()&&e.includes("]("))))||[]}const k=e.attachments&&e.attachments.length>0?e.attachments.map(((e,a)=>{const t=e.split("/"),s=t[t.length-1];let r=decodeURIComponent(s);const n=r.match(/^(\d+)-([a-z0-9]+)\.([^.]+)$/i);if(n)r=`Attachment_${a+1}.${n[3]}`;else{const e=r.match(/^(.+?)(?:_\d{13}_[a-z0-9]+)?(\.[^.]+)$/i);e&&(r=e[1]+e[2])}return{url:e,name:r}})):[],w=y.split("\n\n").filter((e=>e.trim())).map((e=>({lines:e.split("\n").filter((e=>void 0!==e)).map((e=>ve(e)))}))),j=new Date(e.dueDate)<new Date,N=i.useCallback((async(e,a)=>{try{if(e.includes("supabase.co/storage/v1/object/public/task-attachments/")){const t=e.split("/task-attachments/")[1];if(t){const{data:e,error:s}=await h.storage.from("task-attachments").download(t);if(s)throw s;if(e){const t=URL.createObjectURL(e),s=document.createElement("a");return s.href=t,s.download=a,document.body.appendChild(s),s.click(),void setTimeout((()=>{document.body.removeChild(s),URL.revokeObjectURL(t)}),100)}}}window.open(e,"_blank","noopener,noreferrer")}catch(t){window.open(e,"_blank","noopener,noreferrer")}}),[]),C=i.useCallback((e=>{const a=e.match(/\[(.*?)\]\((.*?)\)/);return a?{filename:a[1],url:a[2]}:null}),[]),S=i.useCallback((e=>{const a=ke(e).toLowerCase();return a.includes("document")?q:a.includes("spreadsheet")?G:a.includes("presentation")?H:a.includes("folder")?K:a.includes("image")?J:Q}),[]),D=i.useCallback((async e=>{const a=we(e);if(a){g((a=>new Set(a.add(e)))),b((a=>{const t=new Map(a);return t.delete(e),t}));try{const t=ke(e);let s="";s=t.includes("Document")?`https://docs.google.com/document/d/${a}/export?format=pdf`:t.includes("Spreadsheet")?`https://docs.google.com/spreadsheets/d/${a}/export?format=xlsx`:t.includes("Presentation")?`https://docs.google.com/presentation/d/${a}/export?format=pptx`:`https://drive.google.com/uc?export=download&id=${a}`,window.open(s,"_blank","noopener,noreferrer"),setTimeout((()=>{g((a=>{const t=new Set(a);return t.delete(e),t}))}),2e3)}catch(t){b((a=>new Map(a.set(e,"Download failed. Please try opening the link directly.")))),g((a=>{const t=new Set(a);return t.delete(e),t}))}}else b((a=>new Map(a.set(e,"Invalid Google Drive URL"))))}),[]),_=i.useCallback((e=>{const a=je(e);window.open(a||e,"_blank","noopener,noreferrer")}),[]),L=i.useMemo((()=>new Date(e.dueDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})),[e.dueDate]),P=i.useCallback((()=>{const a=` TASK: ${e.name}\n Due Date: ${L}${j?" (Overdue)":""}\n Category: ${e.category.replace("-"," ")}\n${e.isAdminTask?" Admin Task\n":""}\n Description:\n${y}\n\n View: https://nesttask.vercel.app/`;navigator.clipboard.writeText(a).then((()=>m(!0))).catch((()=>{}))}),[e.name,e.category,e.isAdminTask,L,j,y]);return c.createPortal(d.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4 sm:p-6",role:"dialog","aria-modal":"true",children:[d.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:a,"aria-hidden":"true"}),d.jsxs("div",{className:"relative w-full max-w-3xl lg:max-w-4xl bg-white dark:bg-gray-800 rounded-3xl shadow-2xl max-h-[85vh] overflow-hidden animate-scale-in flex flex-col","aria-labelledby":"task-details-title",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-gray-100 dark:border-gray-700/50 flex-shrink-0",children:[d.jsx("div",{className:"flex-1 min-w-0 pr-3",children:d.jsx("h2",{id:"task-details-title",className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white line-clamp-2 leading-tight",children:e.name})}),d.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",children:d.jsx("button",{onClick:a,disabled:s,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed touch-manipulation","aria-label":"Close",children:d.jsx(f,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto overscroll-contain p-4 sm:p-5",children:[d.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-2 mb-4",children:[d.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[d.jsx(Z,{className:"w-3.5 h-3.5 text-blue-600 dark:text-blue-400 flex-shrink-0"}),d.jsx("span",{className:"text-xs text-blue-900 dark:text-blue-300 font-medium capitalize",children:e.category.replace("-"," ")})]}),d.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[d.jsx(B,{className:"w-3.5 h-3.5 flex-shrink-0 "+(j?"text-red-500 dark:text-red-400":"text-gray-600 dark:text-gray-400")}),d.jsx("span",{className:"text-xs font-medium "+(j?"text-red-600 dark:text-red-400":"text-gray-700 dark:text-gray-300"),children:new Date(e.dueDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),d.jsx("button",{onClick:P,disabled:s,className:`\n                inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg transition-all touch-manipulation\n                ${o?"bg-green-50 text-green-600 dark:bg-green-900/20 dark:text-green-400":"bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}\n                disabled:opacity-50 disabled:cursor-not-allowed\n              `,"aria-label":o?"Copied":"Copy",children:o?d.jsxs(d.Fragment,{children:[d.jsx(A,{className:"w-3.5 h-3.5"}),d.jsx("span",{className:"text-xs font-medium",children:"Copied!"})]}):d.jsxs(d.Fragment,{children:[d.jsx(ee,{className:"w-3.5 h-3.5"}),d.jsx("span",{className:"text-xs font-medium",children:"Copy"})]})})]}),y&&d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx(q,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),d.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Description"})]}),d.jsx("div",{className:"prose dark:prose-invert max-w-none prose-sm",children:d.jsx("div",{className:"text-gray-600 dark:text-gray-300 whitespace-pre-wrap text-sm leading-relaxed bg-gray-50 dark:bg-gray-700/30 rounded-xl p-3",children:w.map(((e,a)=>d.jsx("div",{className:"mb-2.5 last:mb-0",children:e.lines.map(((e,a)=>d.jsx("div",{className:"min-h-[1.5em]",children:e.map(((e,a)=>"link"===e.type?d.jsx("a",{href:e.content,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 underline break-all transition-colors",onClick:e=>e.stopPropagation(),children:e.content},a):d.jsx("span",{children:e.content},a)))},a)))},a)))})})]}),(v.length>0||k.length>0)&&d.jsxs("div",{className:"mb-5",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx("div",{className:"p-1.5 bg-purple-50 dark:bg-purple-900/30 rounded-lg",children:d.jsx(ae,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})}),d.jsx("h3",{className:"text-sm font-bold text-gray-900 dark:text-white",children:"Attached Files"}),d.jsx("span",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded-full",children:k.length+v.length})]}),d.jsxs("div",{className:"space-y-2.5",children:[k.map(((e,a)=>d.jsxs("div",{className:"group flex items-center justify-between p-3.5 rounded-xl bg-gradient-to-r from-white to-purple-50/30 dark:from-gray-800 dark:to-purple-900/10 border border-gray-200 dark:border-gray-700 hover:border-purple-400 dark:hover:border-purple-500/50 hover:shadow-md transition-all",children:[d.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[d.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/40 rounded-lg group-hover:scale-110 transition-transform",children:d.jsx(q,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})}),d.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 truncate",children:e.name})]}),d.jsx("button",{onClick:()=>N(e.url,e.name),className:"p-2.5 rounded-lg text-purple-600 dark:text-purple-400 hover:bg-purple-100 dark:hover:bg-purple-900/40 transition-all touch-manipulation flex-shrink-0 group-hover:scale-110","aria-label":`Download ${e.name}`,children:d.jsx(te,{className:"w-4 h-4"})})]},`db-${a}`))),v.map(((e,a)=>{const t=C(e);return t?d.jsxs("div",{className:"group flex items-center justify-between p-3.5 rounded-xl bg-gradient-to-r from-white to-purple-50/30 dark:from-gray-800 dark:to-purple-900/10 border border-gray-200 dark:border-gray-700 hover:border-purple-400 dark:hover:border-purple-500/50 hover:shadow-md transition-all",children:[d.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[d.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/40 rounded-lg group-hover:scale-110 transition-transform",children:d.jsx(q,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})}),d.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 truncate",children:t.filename})]}),d.jsx("button",{onClick:()=>N(t.url,t.filename),className:"p-2.5 rounded-lg text-purple-600 dark:text-purple-400 hover:bg-purple-100 dark:hover:bg-purple-900/40 transition-all touch-manipulation flex-shrink-0 group-hover:scale-110","aria-label":`Download ${t.filename}`,children:d.jsx(te,{className:"w-4 h-4"})})]},`desc-${a}`):null}))]})]}),e.googleDriveLinks&&e.googleDriveLinks.length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b border-gray-200 dark:border-gray-700",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"p-1.5 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:d.jsx(Q,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),d.jsx("h3",{className:"text-sm sm:text-base font-bold text-gray-900 dark:text-white",children:"Google Drive Files"})]}),d.jsx("span",{className:"text-[10px] sm:text-xs font-bold text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full",children:e.googleDriveLinks.length})]}),d.jsx("div",{className:"space-y-2",children:null==(l=e.googleDriveLinks)?void 0:l.map(((a,t)=>{const s=S(a),r=ke(a),n=Ne(e.googleDriveLinks||[])[t],l=u.has(a),i=x.get(a);return d.jsx("div",{className:"group relative bg-gradient-to-r from-white to-gray-50 dark:from-gray-800 dark:to-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-xl hover:border-blue-300 dark:hover:border-blue-600/50 hover:shadow-lg transition-all duration-200",children:d.jsxs("div",{className:"p-2.5 sm:p-3",children:[d.jsxs("div",{className:"flex items-center gap-2.5",children:[d.jsx("div",{className:"flex-shrink-0 p-2 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/30 dark:to-indigo-900/20 rounded-lg group-hover:scale-110 transition-transform shadow-sm",children:d.jsx(s,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h4",{className:"text-xs sm:text-sm font-bold text-gray-900 dark:text-white truncate mb-1",title:n,children:n}),d.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md text-[10px] font-semibold bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 border border-blue-100 dark:border-blue-900/50",children:r}),i&&d.jsxs("div",{className:"flex items-center gap-1.5 mt-2 text-[10px] text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 p-1.5 rounded-lg",children:[d.jsx(T,{className:"w-3 h-3 flex-shrink-0"}),d.jsx("span",{children:i})]})]})]}),d.jsxs("div",{className:"flex items-center gap-1.5 mt-2.5 pt-2.5 border-t border-gray-100 dark:border-gray-700",children:[d.jsxs("button",{onClick:()=>_(a),className:"flex-1 inline-flex items-center justify-center gap-1.5 px-2.5 py-1.5 text-[11px] sm:text-xs font-semibold text-blue-700 dark:text-blue-300 bg-blue-50 dark:bg-blue-900/30 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-lg transition-all focus:outline-none focus:ring-2 focus:ring-blue-500 touch-manipulation shadow-sm border border-blue-100 dark:border-blue-900/50","aria-label":`Preview ${r}`,children:[d.jsx(se,{className:"w-3.5 h-3.5"}),d.jsx("span",{className:"leading-none",children:"Preview"})]}),d.jsx("button",{onClick:()=>D(a),disabled:l,className:"flex-1 inline-flex items-center justify-center gap-1.5 px-2.5 py-1.5 text-[11px] sm:text-xs font-semibold text-green-700 dark:text-green-300 bg-green-50 dark:bg-green-900/30 hover:bg-green-100 dark:hover:bg-green-900/50 rounded-lg transition-all focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed touch-manipulation shadow-sm border border-green-100 dark:border-green-900/50","aria-label":`Download ${r}`,children:l?d.jsxs(d.Fragment,{children:[d.jsx(E,{className:"w-3.5 h-3.5 animate-spin"}),d.jsx("span",{className:"leading-none",children:"Downloading"})]}):d.jsxs(d.Fragment,{children:[d.jsx(te,{className:"w-3.5 h-3.5"}),d.jsx("span",{className:"leading-none",children:"Download"})]})}),d.jsxs("button",{onClick:()=>window.open(a,"_blank","noopener,noreferrer"),className:"flex-1 inline-flex items-center justify-center gap-1.5 px-2.5 py-1.5 text-[11px] sm:text-xs font-semibold text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-all focus:outline-none focus:ring-2 focus:ring-gray-500 touch-manipulation shadow-sm border border-gray-200 dark:border-gray-600","aria-label":`Open ${r} in new tab`,children:[d.jsx(re,{className:"w-3.5 h-3.5"}),d.jsx("span",{className:"leading-none",children:"Open"})]})]})]})},t)}))})]})]})]})]}),document.body)}la.displayName="BottomNavigationItem";const oa=Object.freeze(Object.defineProperty({__proto__:null,TaskDetailsPopup:da,default:da},Symbol.toStringTag,{value:"Module"})),ca={quiz:i.lazy((()=>r((()=>import("./icons.B5_ZQj31.js")),__vite__mapDeps([0,1,2,3])).then((e=>({default:e.BookOpen}))))),assignment:i.lazy((()=>r((()=>import("./icons.B5_ZQj31.js")),__vite__mapDeps([0,1,2,3])).then((e=>({default:e.PenSquare}))))),presentation:i.lazy((()=>r((()=>import("./icons.B5_ZQj31.js")),__vite__mapDeps([0,1,2,3])).then((e=>({default:e.Presentation}))))),project:i.lazy((()=>r((()=>import("./icons.B5_ZQj31.js")),__vite__mapDeps([0,1,2,3])).then((e=>({default:e.Folder}))))),labreport:i.lazy((()=>r((()=>import("./icons.B5_ZQj31.js")),__vite__mapDeps([0,1,2,3])).then((e=>({default:e.Beaker}))))),labfinal:i.lazy((()=>r((()=>import("./icons.B5_ZQj31.js")),__vite__mapDeps([0,1,2,3])).then((e=>({default:e.Microscope}))))),labperformance:i.lazy((()=>r((()=>import("./icons.B5_ZQj31.js")),__vite__mapDeps([0,1,2,3])).then((e=>({default:e.Activity}))))),documents:i.lazy((()=>r((()=>import("./icons.B5_ZQj31.js")),__vite__mapDeps([0,1,2,3])).then((e=>({default:e.FileText}))))),blc:i.lazy((()=>r((()=>import("./icons.B5_ZQj31.js")),__vite__mapDeps([0,1,2,3])).then((e=>({default:e.Building}))))),groups:i.lazy((()=>r((()=>import("./icons.B5_ZQj31.js")),__vite__mapDeps([0,1,2,3])).then((e=>({default:e.Users}))))),default:i.lazy((()=>r((()=>import("./icons.B5_ZQj31.js")),__vite__mapDeps([0,1,2,3])).then((e=>({default:e.GraduationCap})))))},ma=new RegExp([/\*This task is assigned to section ID: [0-9a-f-]+\*/,/\n\nFor section: [0-9a-f-]+/,/\n\n\*\*Attachments:\*\*[\s\S]*?((\n\n)|$)/,/\[.*?\]\(attachment:.*?\)/,/\nAttached Files:[\s\S]*?((\n\n)|$)/,/\s*\[(data_analysis_report.*?)\]\s*/].map((e=>e.source)).join("|"),"g"),ua={quiz:"text-blue-600 dark:text-blue-400",assignment:"text-orange-600 dark:text-orange-400",presentation:"text-red-600 dark:text-red-400",project:"text-indigo-600 dark:text-indigo-400","lab-report":"text-green-600 dark:text-green-400","lab-final":"text-purple-600 dark:text-purple-400","lab-performance":"text-pink-600 dark:text-pink-400",documents:"text-yellow-600 dark:text-yellow-400",blc:"text-cyan-600 dark:text-cyan-400",groups:"text-teal-600 dark:text-teal-400",default:"text-gray-600 dark:text-gray-400"},ga={completed:{textColor:"text-green-600 dark:text-green-400",bgColor:"bg-green-500",cardStyle:"md:border-green-200 md:dark:border-green-900/80 bg-green-50 dark:bg-gray-800 md:bg-white md:dark:bg-gray-800"},overdue:{textColor:"text-red-600 dark:text-red-400",bgColor:"bg-red-500",cardStyle:"md:border-red-200 md:dark:border-red-900/80 bg-red-50 dark:bg-gray-800 md:bg-white md:dark:bg-gray-800"},default:{textColor:"text-sky-600 dark:text-sky-400",bgColor:"bg-sky-500",cardStyle:"md:border-sky-100 md:dark:border-sky-800/30 md:hover:border-sky-200 md:dark:hover:border-sky-700/50"}},xa=i.memo((({status:e,overdue:a})=>{let t="status-dot-default";return"completed"===e?t="status-dot-completed":a&&(t="status-dot-overdue"),d.jsx("span",{className:`status-dot ${t}`})})),ha=i.memo((({category:e,className:a="w-3.5 h-3.5"})=>{const t=e.toLowerCase().replace(/-/g,""),s=ca[t]||ca.default;return d.jsx(i.Suspense,{fallback:d.jsx("div",{className:a}),children:d.jsx(s,{className:a})})})),ba=i.memo((({task:e,index:a,onSelect:t})=>{i.useMemo((()=>{if(!document.getElementById("pulse-animation-style")){const e=document.createElement("style");e.id="pulse-animation-style",e.textContent="\n  @keyframes simplePulse {\n    0%, 100% { opacity: 1; }\n    50% { opacity: 0.6; }\n  }\n  .animate-pulse-light {\n    animation: simplePulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n  }\n",document.head.appendChild(e)}}),[]);const s=pe(e.dueDate),r=e.category.replace(/-/g," "),n=(e=>{const a=e.toLowerCase();return ua[a]||ua.default})(e.category),l=i.useMemo((()=>"completed"===e.status?ga.completed:s?ga.overdue:ga.default),[e.status,s]),o=i.useMemo((()=>{return e.description&&(a=e.description)?a.replace(ma,"").trim():"";var a}),[e.description]),c=i.useMemo((()=>o&&o.includes("http")?ve(o):[]),[o]),m=i.useMemo((()=>{try{return new Date(e.dueDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch(a){return"No date"}}),[e.dueDate]),u=`${Math.min(30*a,200)}ms`;return d.jsxs("div",{onClick:()=>t(e),className:`task-card-base ${"completed"===e.status?"task-card-completed":s?"task-card-overdue":""} motion-safe:animate-fade-in`,style:{animationDelay:u,animationDuration:"500ms"},children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-start justify-between gap-3",children:[d.jsx("h3",{className:"text-base md:text-sm font-semibold\n            text-gray-900 dark:text-gray-100\n            leading-snug\n            line-clamp-2\n            break-words flex-1",children:e.name}),d.jsxs("span",{className:`inline-flex items-center gap-1\n            px-1.5 py-0.5\n            rounded-md text-[10px] font-bold uppercase tracking-wider\n            bg-gray-50 dark:bg-gray-700/50\n            border border-gray-200 dark:border-gray-600/50\n            flex-shrink-0 mt-0.5\n            ${n}`,children:[d.jsx(ha,{category:e.category,className:"w-2.5 h-2.5 hidden md:inline-block"}),d.jsx("span",{className:"truncate max-w-[70px] md:max-w-[90px]",children:r})]})]}),o&&d.jsx("p",{className:"text-sm\n            text-gray-600 dark:text-gray-400\n            leading-relaxed\n            line-clamp-2 md:line-clamp-1\n            break-words",children:c.length>0?c.map(((e,a)=>"link"===e.type?d.jsx("a",{href:e.content,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"text-sky-600 dark:text-sky-400\n                      hover:text-sky-700 dark:hover:text-sky-300\n                      underline underline-offset-2\n                      transition-colors",children:e.content},a):d.jsx("span",{children:e.content},a))):o})]}),d.jsxs("div",{className:"flex items-center justify-between\n        mt-3 pt-3\n        border-t border-gray-100 dark:border-gray-700/50\n        gap-3",children:[d.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[d.jsx(xa,{status:e.status,overdue:s}),d.jsx("span",{className:`text-xs font-medium truncate ${l.textColor}`,children:"completed"===e.status?"Completed":s?"Overdue":"In Progress"})]}),d.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[d.jsx(B,{className:`w-3.5 h-3.5 ${l.textColor}`}),d.jsx("span",{className:`text-xs font-medium whitespace-nowrap ${l.textColor}`,children:m})]})]}),d.jsx("div",{className:"md:hidden absolute inset-0 rounded-2xl pointer-events-none\n        bg-gray-900/0 active:bg-gray-900/5 dark:active:bg-gray-900/20\n        transition-colors duration-150"})]})}),((e,a)=>e.task.id===a.task.id&&e.task.status===a.task.status&&e.task.dueDate===a.task.dueDate&&e.task.name===a.task.name&&e.index===a.index)),pa=i.memo((({tasks:e=[],onDeleteTask:a,showDeleteButton:t=!1})=>{const[s,r]=i.useState(null),[n,l]=i.useState(20),o=i.useCallback((e=>{r(e)}),[]),c=i.useCallback((()=>{l((a=>Math.min(a+20,e.length)))}),[e.length]),m=i.useMemo((()=>[...e].sort(((e,a)=>{const t="completed"!==e.status&&pe(e.dueDate),s="completed"!==a.status&&pe(a.dueDate);return"completed"===e.status&&"completed"!==a.status?1:"completed"!==e.status&&"completed"===a.status?-1:t&&!s?1:!t&&s?-1:new Date(e.dueDate).getTime()-new Date(a.dueDate).getTime()}))),[e]),u=i.useMemo((()=>m.slice(0,n)),[m,n]),g=n<m.length,x=i.useMemo((()=>d.jsxs("div",{className:"text-center py-8 sm:py-12 animate-fade-in",children:[d.jsx("img",{src:"https://images.unsplash.com/photo-1496115965489-21be7e6e59a0?auto=format&fit=crop&q=80&w=400",alt:"Empty tasks",className:"w-32 h-32 sm:w-48 sm:h-48 object-cover rounded-2xl mx-auto mb-4 opacity-50 shadow-lg"}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-base sm:text-lg font-medium",children:"No tasks found in this category"}),d.jsx("p",{className:"text-gray-400 dark:text-gray-500 mt-2 text-sm sm:text-base",children:"Time to add some new tasks!"})]})),[]);return 0===m.length?x:d.jsxs("div",{children:[d.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3\n          gap-2 xs:gap-3 md:gap-4 lg:gap-6\n          px-1 xs:px-2 md:px-0\n          pb-4 md:pb-0",children:u.map(((e,a)=>d.jsx(ba,{task:e,index:a,onSelect:o},e.id)))}),g&&d.jsx("div",{className:"flex justify-center mt-6",children:d.jsxs("button",{onClick:c,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200 shadow-sm",children:["Load More (",m.length-n," remaining)"]})})]}),s&&d.jsx(da,{task:s,onClose:()=>r(null)})]})})),fa=i.lazy((()=>r((()=>import("./TaskCategories.B_CxM1jD.js")),__vite__mapDeps([4,1,2,3,0])).then((e=>({default:e.TaskCategories}))))),ya={all:{icon:ne,label:"Total Tasks",activeClasses:"ring-2 ring-blue-500 dark:ring-blue-400 bg-blue-50 dark:bg-gray-700 border-blue-200 dark:border-blue-600",iconBg:"bg-blue-100 dark:bg-blue-900/30",iconColor:"text-blue-600 dark:text-blue-400"},overdue:{icon:T,label:"Due Tasks",activeClasses:"ring-2 ring-red-500 dark:ring-red-400 bg-red-50 dark:bg-gray-700 border-red-200 dark:border-red-600",iconBg:"bg-red-100 dark:bg-red-900/30",iconColor:"text-red-600 dark:text-red-400"},"in-progress":{icon:Y,label:"In Progress",activeClasses:"ring-2 ring-amber-500 dark:ring-amber-400 bg-amber-50 dark:bg-gray-700 border-amber-200 dark:border-amber-600",iconBg:"bg-amber-100 dark:bg-amber-900/30",iconColor:"text-amber-600 dark:text-amber-400"},completed:{icon:A,label:"Completed",activeClasses:"ring-2 ring-green-500 dark:ring-green-400 bg-green-50 dark:bg-gray-700 border-green-200 dark:border-green-600",iconBg:"bg-green-100 dark:bg-green-900/30",iconColor:"text-green-600 dark:text-green-400"}},va=i.memo((({type:e,count:a,isActive:t,onClick:s})=>{const r=ya[e],n=r.icon;return d.jsx("button",{onClick:s,className:`w-full rounded-xl p-4 sm:p-5 transition-all duration-200 border-2 min-h-stat-card flex items-center ${t?r.activeClasses:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 hover:shadow-md hover:scale-105"}`,children:d.jsxs("div",{className:"flex items-center gap-3 w-full",children:[d.jsx("div",{className:`p-2.5 rounded-lg ${r.iconBg} flex-shrink-0`,children:d.jsx(n,{className:`w-5 h-5 sm:w-6 sm:h-6 ${r.iconColor}`})}),d.jsxs("div",{className:"text-left flex-1 min-w-0",children:[d.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-0.5",children:a}),d.jsx("div",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 truncate",children:r.label})]})]})})})),ka=i.memo((({user:e,tasks:a,tasksLoading:t,hasCompletedInitialTasksLoad:s,selectedCategory:r,setSelectedCategory:n,statFilter:l,setStatFilter:o})=>{var c;const[m,u]=i.useState((()=>t||!s)),g=i.useRef(null);i.useEffect((()=>{var e;let a;if(t||!s)return null==g.current&&(g.current=Date.now()),u(!0),()=>{a&&window.clearTimeout(a)};if(!t&&m){const t=null!=(e=g.current)?e:Date.now(),s=Date.now()-t,r=Math.max(500-s,0);a=window.setTimeout((()=>{u(!1),g.current=null}),r)}else g.current=null;return()=>{a&&window.clearTimeout(a)}}),[t,s,m]);const{taskStats:x,categoryCounts:h}=i.useMemo((()=>{if(!(null==a?void 0:a.length))return{taskStats:{total:0,inProgress:0,completed:0,overdue:0},categoryCounts:{}};const e={total:0,inProgress:0,completed:0,overdue:0},t={};return a.forEach((a=>{e.total++,"in-progress"===a.status?e.inProgress++:"completed"===a.status&&e.completed++,"completed"!==a.status&&pe(a.dueDate)&&e.overdue++;const s=a.category||"others";t[s]=(t[s]||0)+1})),{taskStats:e,categoryCounts:t}}),[a]),b=i.useMemo((()=>{if(!(null==a?void 0:a.length))return[];let e=r?a.filter((e=>e.category===r)):a;switch(l){case"overdue":e=e.filter((e=>"completed"!==e.status&&pe(e.dueDate)));break;case"in-progress":e=e.filter((e=>"in-progress"===e.status));break;case"completed":e=e.filter((e=>"completed"===e.status))}return[...e].sort(((e,a)=>{const t="completed"!==e.status&&pe(e.dueDate),s="completed"!==a.status&&pe(a.dueDate);return"completed"===e.status&&"completed"!==a.status?1:"completed"!==e.status&&"completed"===a.status?-1:t&&!s?1:!t&&s?-1:new Date(e.dueDate).getTime()-new Date(a.dueDate).getTime()}))}),[a,r,l]),p=i.useMemo((()=>"all"!==l?ya[l].label:r?`${r.charAt(0).toUpperCase()}${r.slice(1).replace("-"," ")} Tasks`:"All Tasks"),[l,r]),f=i.useCallback((e=>()=>o(e)),[o]),y=i.useCallback((e=>{n(e),o("all")}),[n,o]),v=i.useCallback((()=>o("all")),[o]);return d.jsxs("div",{className:"space-y-5 pb-6 animate-fadeIn",children:[d.jsxs("div",{className:"bg-gradient-to-br from-blue-600 via-blue-600 to-indigo-700 rounded-2xl p-5 sm:p-6 text-white shadow-lg animate-slideUp",children:[d.jsxs("h1",{className:"text-xl sm:text-2xl font-bold mb-1",children:["Welcome back, ",(null==(c=null==e?void 0:e.name)?void 0:c.split(" ")[0])||"User","!"]}),d.jsx("p",{className:"text-blue-100 text-sm sm:text-base",children:0===x.total?"You're all caught up! No tasks yet.":x.overdue>0?`You have ${x.overdue} task${x.overdue>1?"s":""} due`:`You have ${x.total} task${x.total>1?"s":""} to manage`})]}),d.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[d.jsx("div",{className:"animate-scaleIn stagger-1",children:d.jsx(va,{type:"all",count:x.total,isActive:"all"===l,onClick:f("all")})}),d.jsx("div",{className:"animate-scaleIn stagger-2",children:d.jsx(va,{type:"overdue",count:x.overdue,isActive:"overdue"===l,onClick:f("overdue")})}),d.jsx("div",{className:"animate-scaleIn stagger-3",children:d.jsx(va,{type:"in-progress",count:x.inProgress,isActive:"in-progress"===l,onClick:f("in-progress")})}),d.jsx("div",{className:"animate-scaleIn stagger-4",children:d.jsx(va,{type:"completed",count:x.completed,isActive:"completed"===l,onClick:f("completed")})})]}),d.jsx(i.Suspense,{fallback:d.jsxs("div",{className:"space-y-3 animate-pulse",children:[d.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded-lg w-24"}),d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:[1,2,3,4,5,6,7,8].map((e=>d.jsx("div",{className:"bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl p-4 min-h-category-card",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-lg"}),d.jsxs("div",{className:"flex-1 space-y-2",children:[d.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-20"}),d.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-12"})]})]})},e)))})]}),children:d.jsx(fa,{onCategorySelect:y,selectedCategory:r,categoryCounts:h})}),d.jsxs("div",{children:["all"!==l&&d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:p}),d.jsx("button",{onClick:v,className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium",children:"View All"})]}),m?d.jsx("div",{className:"w-full max-w-7xl mx-auto",children:d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3\n                gap-2 xs:gap-3 md:gap-4 lg:gap-6\n                px-1 xs:px-2 md:px-0\n                pb-4 md:pb-0",children:[1,2,3,4,5,6].map((e=>d.jsx("div",{className:"relative bg-white dark:bg-gray-800 md:bg-white md:dark:bg-gray-800\n                    rounded-2xl md:rounded-lg\n                    border border-gray-100 dark:border-gray-700/50\n                    p-3 md:p-4 lg:p-5\n                    min-h-[110px]\n                    animate-pulse",children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-start justify-between gap-3",children:[d.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[d.jsx("div",{className:"h-4 md:h-3.5 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),d.jsx("div",{className:"h-4 md:h-3.5 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]}),d.jsxs("div",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-md border border-gray-200 dark:border-gray-600/50 bg-gray-50 dark:bg-gray-700/50 flex-shrink-0 mt-0.5",children:[d.jsx("div",{className:"w-2.5 h-2.5 bg-gray-200 dark:bg-gray-700 rounded hidden md:inline-block"}),d.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-14"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"h-3.5 bg-gray-200 dark:bg-gray-700 rounded w-full"}),d.jsx("div",{className:"h-3.5 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]}),d.jsxs("div",{className:"flex items-center justify-between pt-1",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-4 h-4 bg-gray-200 dark:bg-gray-700 rounded"}),d.jsx("div",{className:"h-3.5 bg-gray-200 dark:bg-gray-700 rounded w-14"})]}),d.jsx("div",{className:"w-3 h-3 bg-gray-200 dark:bg-gray-700 rounded-full"})]})]})},e)))})}):b.length>0?d.jsx(pa,{tasks:b,showDeleteButton:!1}):d.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700",children:[d.jsx(ne,{className:"mx-auto h-12 w-12 text-gray-300 dark:text-gray-600"}),d.jsx("h3",{className:"mt-3 text-sm font-medium text-gray-900 dark:text-white",children:"No tasks"}),d.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:r||"all"!==l?"No tasks match your filters":"Get started by adding a task"})]})]})]})}));function wa(){return d.jsxs("div",{className:"w-full max-w-7xl mx-auto px-3 sm:px-4 py-3 sm:py-4",children:[d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl mb-4 p-4 shadow-sm border border-gray-200 dark:border-gray-700",children:[d.jsxs("div",{className:"flex flex-col space-y-3 sm:hidden",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"h-6 w-32 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),d.jsx("div",{className:"h-9 w-9 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse"})]}),d.jsx("div",{className:"h-4 w-48 bg-gray-200 dark:bg-gray-700 rounded animate-pulse",style:{animationDelay:"100ms"}}),d.jsx("div",{className:"h-10 w-full bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse",style:{animationDelay:"200ms"}})]}),d.jsxs("div",{className:"hidden sm:flex sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"h-7 w-40 bg-gray-200 dark:bg-gray-700 rounded mb-2 animate-pulse"}),d.jsx("div",{className:"h-4 w-56 bg-gray-200 dark:bg-gray-700 rounded animate-pulse",style:{animationDelay:"100ms"}})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"h-10 w-32 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse",style:{animationDelay:"200ms"}}),d.jsx("div",{className:"h-10 w-64 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse",style:{animationDelay:"300ms"}})]})]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsx("div",{className:"h-9 w-9 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse"}),d.jsx("div",{className:"h-6 w-64 bg-gray-200 dark:bg-gray-700 rounded animate-pulse",style:{animationDelay:"100ms"}}),d.jsx("div",{className:"h-9 w-9 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse"})]}),d.jsx("div",{className:"grid grid-cols-6 gap-2",children:[...Array(6)].map(((e,a)=>d.jsxs("div",{className:`\n                flex flex-col items-center py-3 rounded-lg\n                ${1===a?"bg-blue-100 dark:bg-blue-900/30":"bg-gray-100 dark:bg-gray-700/50"}\n                border border-gray-200 dark:border-gray-700\n              `,children:[d.jsx("div",{className:`h-3 w-8 ${1===a?"bg-blue-300 dark:bg-blue-600":"bg-gray-300 dark:bg-gray-600"} rounded mb-1 animate-pulse`,style:{animationDelay:50*a+"ms"}}),d.jsx("div",{className:`h-5 w-5 ${1===a?"bg-blue-400 dark:bg-blue-500":"bg-gray-400 dark:bg-gray-500"} rounded animate-pulse`,style:{animationDelay:50*a+25+"ms"}})]},a)))})]}),d.jsx("div",{className:"space-y-3",children:[...Array(3)].map(((e,a)=>d.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700",children:d.jsxs("div",{className:"flex",children:[d.jsxs("div",{className:"w-20 sm:w-24 bg-blue-50 dark:bg-blue-900/20 flex flex-col justify-center items-center py-4 border-r-2 border-blue-200 dark:border-blue-700 flex-shrink-0",children:[d.jsx("div",{className:"h-5 w-12 bg-blue-200 dark:bg-blue-700 rounded mb-2 animate-pulse",style:{animationDelay:150*a+"ms"}}),d.jsx("div",{className:"my-2 w-px h-4 bg-blue-300 dark:bg-blue-600"}),d.jsx("div",{className:"h-5 w-12 bg-blue-200 dark:bg-blue-700 rounded mt-2 animate-pulse",style:{animationDelay:150*a+50+"ms"}})]}),d.jsxs("div",{className:"flex-1 p-3 sm:p-4 min-w-0",children:[d.jsx("div",{className:"h-5 w-3/4 sm:h-6 sm:w-2/3 bg-gray-200 dark:bg-gray-700 rounded mb-3 animate-pulse",style:{animationDelay:150*a+100+"ms"}}),d.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-2 text-xs sm:text-sm",children:[d.jsx("div",{className:"h-4 w-12 bg-gray-200 dark:bg-gray-700 rounded animate-pulse",style:{animationDelay:150*a+150+"ms"}}),d.jsx("div",{className:"h-4 w-16 bg-gray-200 dark:bg-gray-700 rounded ml-auto animate-pulse",style:{animationDelay:150*a+175+"ms"}}),d.jsx("div",{className:"h-4 w-14 bg-gray-200 dark:bg-gray-700 rounded animate-pulse",style:{animationDelay:150*a+200+"ms"}}),d.jsx("div",{className:"h-4 w-12 bg-gray-200 dark:bg-gray-700 rounded ml-auto animate-pulse",style:{animationDelay:150*a+225+"ms"}}),d.jsx("div",{className:"h-4 w-14 bg-gray-200 dark:bg-gray-700 rounded animate-pulse",style:{animationDelay:150*a+250+"ms"}}),d.jsx("div",{className:"h-4 w-20 bg-gray-200 dark:bg-gray-700 rounded ml-auto animate-pulse",style:{animationDelay:150*a+275+"ms"}}),d.jsx("div",{className:"h-4 w-10 bg-gray-200 dark:bg-gray-700 rounded animate-pulse",style:{animationDelay:150*a+300+"ms"}}),d.jsx("div",{className:"h-4 w-16 bg-gray-200 dark:bg-gray-700 rounded ml-auto animate-pulse",style:{animationDelay:150*a+325+"ms"}})]})]})]})},a)))})]})}_e({mode:"md",animated:!1});const ja=i.lazy((()=>r((()=>import("./UpcomingPage.BY6_2PoS.js")),__vite__mapDeps([5,6,1,2,3,7,8,9,10,11,12,13,14,15,16,17,18,0])).then((e=>({default:e.UpcomingPage}))))),Na=i.lazy((()=>r((()=>import("./SearchPage.DuHEAlrQ.js")),__vite__mapDeps([19,1,2,3,0,6,15,8,9,10,11,12,16,17,7,13,14,20,21,22,23,18,24,25,26])).then((e=>({default:e.SearchPage}))))),Ca=i.lazy((()=>r((()=>import("./LectureSlidesPage.DvstsGtx.js")),__vite__mapDeps([27,1,2,3,28,8,6,9,10,11,12,0,29,15,16,17])).then((e=>({default:e.LectureSlidesPage}))))),Sa=i.lazy((()=>r((()=>import("./RoutinePage.CQC1g8UV.js")),__vite__mapDeps([30,1,2,3,15,8,6,9,10,11,12,16,17,18,0])).then((e=>({default:e.RoutinePage}))))),Da=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const a=m();i.useEffect((()=>{(async()=>{if(e.isNativePlatform())try{await n.setOverlaysWebView({overlay:!1}),await n.setStyle({style:l.Dark}),await n.setBackgroundColor({color:"#ffffff"}),await n.show()}catch(a){}})();const a=new MutationObserver((a=>{a.forEach((a=>{"class"===a.attributeName&&(async()=>{if(e.isNativePlatform())try{const e=document.documentElement.classList.contains("dark");await n.setBackgroundColor({color:e?"#111827":"#ffffff"}),await n.setStyle({style:e?l.Dark:l.Light})}catch(a){}})()}))}));return a.observe(document.documentElement,{attributes:!0}),()=>a.disconnect()}),[]);const{user:t,loading:s,error:r,login:o,signup:c,logout:f,forgotPassword:y}=u();!function(e={}){const{enabled:a=!0,onSessionExpired:t,onSessionRefreshed:s,onAuthError:r}=e,n=i.useRef(!1),l=i.useRef(Date.now()),d=i.useRef(e),o=i.useRef(!1);i.useEffect((()=>{d.current=e}),[e]);const c=i.useCallback((async(e=!1)=>{var t,s,r,i,o,c,m,u,g,x,b,p,f,y;if(!a)return!0;if(n.current&&!e)return!0;const v=Date.now(),k=v-l.current;if(!e&&k<5e3)return!0;n.current=!0,l.current=v;try{const{data:{session:e},error:a}=await h.auth.getSession();if(a)return null==(s=(t=d.current).onAuthError)||s.call(t,a),!1;if(!e)return!0;const n=e.expires_at;if(n){const e=1e3*n-v,a=3e5;if(e<=0){const{data:e,error:a}=await h.auth.refreshSession();return a?(null==(i=(r=d.current).onSessionExpired)||i.call(r),null==(c=(o=d.current).onAuthError)||c.call(o,a),!1):e.session?(null==(u=(m=d.current).onSessionRefreshed)||u.call(m),"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("supabase-session-refreshed")),!0):(null==(x=(g=d.current).onSessionExpired)||x.call(g),!1)}if(!(e<a))return!0;{const{data:e,error:a}=await h.auth.refreshSession();if(a)return!0;if(e.session)return null==(p=(b=d.current).onSessionRefreshed)||p.call(b),"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("supabase-session-refreshed")),!0}}return!0}catch(w){return null==(y=(f=d.current).onAuthError)||y.call(f,w),!1}finally{n.current=!1}}),[a]);Ae({onResume:i.useCallback((async()=>{try{await h.auth.startAutoRefresh(),o.current=!0}catch(e){}await c(!0),"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("supabase-resume"))}),[c]),onVisibilityChange:e=>{e&&c(!1)},onNetworkChange:e=>{e&&c(!1)},onAppStateChange:async e=>{if(a&&!e)try{await h.auth.stopAutoRefresh(),o.current=!1}catch(t){}}}),i.useEffect((()=>{a&&c(!0)}),[a,c])}({enabled:!0});const{users:v,loading:k,deleteUser:w,refreshUsers:j}=g(),{isRegistered:N,register:C}=We();i.useEffect((()=>{t&&e.isNativePlatform()&&!N&&C()}),[t,N,C]),i.useEffect((()=>{if(!t)return;const e=()=>{const e=b();return!!e&&(te("upcoming"),B(e),!0)};if(!e()){const a=setInterval((()=>{e()&&clearInterval(a)}),100);setTimeout((()=>clearInterval(a)),2e3)}const a=e=>{var a;const t=null==(a=null==e?void 0:e.detail)?void 0:a.taskId;"string"==typeof t&&t.length>0&&(te("upcoming"),B(t))};return window.addEventListener("open-task-from-notification",a),()=>window.removeEventListener("open-task-from-notification",a)}),[t]);const{tasks:S,loading:D,createTask:E,updateTask:_,deleteTask:A,refreshTasks:T}=x(null==t?void 0:t.id);i.useEffect((()=>{(null==t?void 0:t.id)?D||q(!0):q(!1)}),[null==t?void 0:t.id,D]),i.useCallback((e=>w(e)),[w]),i.useCallback(((e,a)=>E(e,a)),[E]),i.useCallback((e=>A(e)),[A]),i.useCallback(((e,a)=>_(e,a)),[_]);const L=i.useCallback((async e=>{try{const e=[];(null==t?void 0:t.id)&&e.push(T(!0)),("admin"===(null==t?void 0:t.role)||"super-admin"===(null==t?void 0:t.role)||"section_admin"===(null==t?void 0:t.role))&&e.push(j()),await Promise.allSettled(e)}finally{e.detail.complete()}}),[null==t?void 0:t.id,null==t?void 0:t.role,T,j]),{notifications:P,unreadCount:M,markAsRead:R,markAllAsRead:I,clearNotification:$}=function(e){const[a,t]=i.useState([]),[s,r]=i.useState(0),n=i.useRef({}),l=i.useRef(!1),d=e=>[...e].sort(((e,a)=>e.read!==a.read?e.read?1:-1:a.timestamp.getTime()-e.timestamp.getTime())),o=i.useCallback((async()=>{if(!e)return;const[{data:a},{data:s}]=await Promise.all([h.from("tasks").select("*").or(`user_id.eq.${e},is_admin_task.eq.true`).order("created_at",{ascending:!1}),h.from("announcements").select("*").order("created_at",{ascending:!1})]),n=[];a&&a.forEach((e=>{n.push({id:crypto.randomUUID(),title:e.is_admin_task?"New Admin Task":"New Task",message:`Task "${e.name}" has been created`,timestamp:new Date(e.created_at),read:!1,taskId:e.id,isAdminTask:e.is_admin_task,isAnnouncement:!1})})),s&&s.forEach((e=>{n.push({id:crypto.randomUUID(),title:e.title,message:e.content,timestamp:new Date(e.created_at),read:!1,announcementId:e.id,isAdminTask:!1,isAnnouncement:!0})}));const l=d(n);t(l),r(n.filter((e=>!e.read)).length)}),[e]),c=i.useCallback((()=>{if(!e||l.current)return;l.current=!0,n.current.tasks&&n.current.tasks.unsubscribe(),n.current.announcements&&n.current.announcements.unsubscribe();const a=h.channel("tasks").on("postgres_changes",{event:"INSERT",schema:"public",table:"tasks",filter:`user_id=eq.${e}`},(e=>{u(e.new)})).on("postgres_changes",{event:"INSERT",schema:"public",table:"tasks",filter:"is_admin_task=eq.true"},(e=>{u(e.new)})).subscribe(),t=h.channel("announcements").on("postgres_changes",{event:"INSERT",schema:"public",table:"announcements"},(e=>{g(e.new)})).subscribe();n.current={tasks:a,announcements:t}}),[e]),m=i.useCallback((()=>{l.current=!1,n.current.tasks&&(n.current.tasks.unsubscribe(),n.current.tasks=void 0),n.current.announcements&&(n.current.announcements.unsubscribe(),n.current.announcements=void 0)}),[]);Ae({onResume:i.useCallback((()=>{m(),o(),c()}),[m,o,c])}),i.useEffect((()=>{if(e)return o(),c(),()=>{m()};m()}),[e,o,c,m]);const u=a=>{if(a.is_admin_task||a.user_id===e){const e={id:crypto.randomUUID(),title:a.is_admin_task?"New Admin Task":"New Task",message:`Task "${a.name}" has been created`,timestamp:new Date,read:!1,taskId:a.id,isAdminTask:a.is_admin_task,isAnnouncement:!1};t((a=>d([e,...a]))),r((e=>e+1))}},g=e=>{const a={id:crypto.randomUUID(),title:e.title,message:e.content,timestamp:new Date,read:!1,announcementId:e.id,isAdminTask:!1,isAnnouncement:!0};t((e=>d([a,...e]))),r((e=>e+1))};return{notifications:a,unreadCount:s,markAsRead:e=>{t((a=>d(a.map((a=>a.id===e?{...a,read:!0}:a))))),r((e=>Math.max(0,e-1)))},markAllAsRead:()=>{t((e=>d(e.map((e=>({...e,read:!0})))))),r(0)},clearNotification:e=>{t((a=>{const t=a.find((a=>a.id===e));return t&&!t.read&&r((e=>Math.max(0,e-1))),d(a.filter((a=>a.id!==e)))}))}}}(null==t?void 0:t.id),[O,U]=i.useState((()=>{const e=window.location.pathname.slice(1);return["home","upcoming","search","routine","lecture-slides"].includes(e)?e:"home"})()),[z,F]=i.useState(!1),[V,B]=i.useState(null),[W,Y]=i.useState(null),[X,q]=i.useState(!1),[G,H]=i.useState(!1),[K,J]=i.useState("all"),[Q,Z]=i.useState(!0),[ee,ae]=i.useState(!1),te=i.useCallback((e=>{if(e===O)return;i.startTransition((()=>{U(e)}));const a="home"===e?"/":`/${e}`;window.history.pushState({page:e},"",a)}),[O]),se=i.useCallback((()=>{B(null)}),[]);i.useEffect((()=>{const e=e=>{const a=window.location.pathname.slice(1);H(!1);const t=["home","upcoming","search","routine","lecture-slides"].includes(a)?a:"home";U(t)};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)}),[]),i.useEffect((()=>{if(!(null==t?void 0:t.id))return H(!1),void q(!1);D?H(!0):G&&!D&&q(!0)}),[null==t?void 0:t.id,D,G]);const[re,ne]=i.useState(!1);i.useEffect((()=>{const e=window.location.pathname;e.startsWith("/admin")||e.startsWith("/superadmin")||!t||"admin"!==t.role&&"super-admin"!==t.role&&"section_admin"!==t.role||("super-admin"===t.role?a("/superadmin/dashboard",{replace:!0}):a("/admin/dashboard",{replace:!0}))}),[t,a]),i.useEffect((()=>{let e=!1;const a=()=>{"hidden"===document.visibilityState?e=!0:"visible"===document.visibilityState&&e&&(ne(!0),setTimeout((()=>ne(!1)),500),e=!1)};return document.addEventListener("visibilitychange",a),()=>document.removeEventListener("visibilitychange",a)}),[]);const le=i.useMemo((()=>{if(!S||0===S.length)return 0;const e=new Date;return e.setHours(0,0,0,0),S.filter((a=>{if(!a.dueDate)return!1;try{const t=new Date(a.dueDate);return t.setHours(0,0,0,0),fe(t,e)&&"completed"!==a.status}catch(t){return!1}})).length}),[S]),ie=i.useMemo((()=>{const e=S&&Array.isArray(S)?S:[];return{total:e.length,inProgress:e.filter((e=>"in-progress"===e.status)).length,completed:e.filter((e=>"completed"===e.status)).length,overdue:0}}),[S]),de=i.useMemo((()=>M>0),[M]),oe=i.useCallback((()=>{window.location.hash.includes("#auth/recovery")&&ae(!0)}),[]);return i.useEffect((()=>{const e=setTimeout((()=>{Z(!1)}),300);oe();const a=()=>{oe()};let s=Date.now();const r=()=>{if("hidden"===document.visibilityState)return s=Date.now(),void localStorage.setItem("lastActiveTimestamp",s.toString());if("visible"===document.visibilityState){const e=Date.now(),a=e-s>3e5;localStorage.setItem("lastActiveTimestamp",e.toString()),(null==t?void 0:t.id)&&a?setTimeout((()=>{T(!0)}),100):null==t||t.id}};window.addEventListener("hashchange",a),document.addEventListener("visibilitychange",r);const{data:{subscription:n}}=h.auth.onAuthStateChange((e=>{"PASSWORD_RECOVERY"===e&&ae(!0)}));return()=>{clearTimeout(e),n.unsubscribe(),window.removeEventListener("hashchange",a),document.removeEventListener("visibilitychange",r)}}),[oe,T,null==t?void 0:t.id]),s&&!t?d.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center animate-fadeIn p-4",children:d.jsxs("div",{className:"w-full max-w-7xl mx-auto space-y-5",children:[d.jsxs("div",{className:"text-center mb-6 sm:mb-8 animate-slideUp",children:[d.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-2xl mx-auto mb-3 sm:mb-4 flex items-center justify-center shadow-lg",children:d.jsx("svg",{className:"w-8 h-8 sm:w-10 sm:h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),d.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:"NestTask"}),d.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Loading your workspace..."})]}),d.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-2xl p-5 sm:p-6 shadow-lg animate-pulse",children:[d.jsx("div",{className:"h-6 sm:h-7 bg-blue-500/50 rounded-lg w-36 sm:w-48 mb-2"}),d.jsx("div",{className:"h-4 sm:h-5 bg-blue-500/30 rounded-lg w-48 sm:w-64"})]}),d.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[1,2,3,4].map((e=>d.jsx("div",{className:"bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl p-4 sm:p-5 min-h-stat-card animate-pulse",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-gray-200 dark:bg-gray-700 rounded-lg flex-shrink-0"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"h-7 sm:h-8 bg-gray-200 dark:bg-gray-700 rounded w-12 sm:w-14 mb-1.5"}),d.jsx("div",{className:"h-3 sm:h-4 bg-gray-200 dark:bg-gray-700 rounded w-16 sm:w-20"})]})]})},e)))}),d.jsxs("div",{className:"space-y-3 animate-pulse",children:[d.jsx("div",{className:"h-5 sm:h-6 bg-gray-200 dark:bg-gray-700 rounded-lg w-20 sm:w-24"}),d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:[1,2,3,4].map((e=>d.jsx("div",{className:"bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl p-3 sm:p-4 min-h-category-card",children:d.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[d.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gray-200 dark:bg-gray-700 rounded-lg"}),d.jsxs("div",{className:"flex-1 space-y-1.5 sm:space-y-2",children:[d.jsx("div",{className:"h-3 sm:h-4 bg-gray-200 dark:bg-gray-700 rounded w-16 sm:w-20"}),d.jsx("div",{className:"h-2.5 sm:h-3 bg-gray-200 dark:bg-gray-700 rounded w-10 sm:w-12"})]})]})},e)))})]}),d.jsx("div",{className:"w-full max-w-7xl mx-auto",children:d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3\n                gap-2 xs:gap-3 md:gap-4 lg:gap-6\n                px-1 xs:px-2 md:px-0\n                pb-4 md:pb-0",children:[1,2,3,4,5,6].map((e=>d.jsx("div",{className:"relative bg-white dark:bg-gray-800 md:bg-white md:dark:bg-gray-800\n                    rounded-2xl md:rounded-lg\n                    border border-gray-100 dark:border-gray-700/50\n                    p-3 md:p-4 lg:p-5\n                    min-h-[110px]\n                    animate-pulse",children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-start justify-between gap-3",children:[d.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[d.jsx("div",{className:"h-4 md:h-3.5 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),d.jsx("div",{className:"h-4 md:h-3.5 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]}),d.jsxs("div",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-md border border-gray-200 dark:border-gray-600/50 bg-gray-50 dark:bg-gray-700/50 flex-shrink-0 mt-0.5",children:[d.jsx("div",{className:"w-2.5 h-2.5 bg-gray-200 dark:bg-gray-700 rounded hidden md:inline-block"}),d.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-14"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"h-3.5 bg-gray-200 dark:bg-gray-700 rounded w-full"}),d.jsx("div",{className:"h-3.5 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]}),d.jsxs("div",{className:"flex items-center justify-between pt-1",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-4 h-4 bg-gray-200 dark:bg-gray-700 rounded"}),d.jsx("div",{className:"h-3.5 bg-gray-200 dark:bg-gray-700 rounded w-14"})]}),d.jsx("div",{className:"w-3 h-3 bg-gray-200 dark:bg-gray-700 rounded-full"})]})]})},e)))})})]})}):ee?d.jsx(ye,{}):t?d.jsx(Ce,{children:d.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 app-container safe-area-container flex flex-col",children:[d.jsx(na,{onLogout:f,hasUnreadNotifications:de,onNotificationsClick:()=>F(!0),activePage:O,onPageChange:te,user:{name:t.name,email:t.email,avatar:t.avatar||""},taskStats:ie,tasks:S}),d.jsx("div",{className:"flex-1 relative overflow-hidden",children:d.jsxs(Se,{scrollY:!0,fullscreen:!0,className:"h-full",children:[d.jsx(De,{slot:"fixed",onIonRefresh:L,children:d.jsx(Ee,{})}),d.jsx("main",{className:"max-w-7xl mx-auto px-2 sm:px-4 py-4 sm:py-6 pb-20 sm:pb-24 lg:pb-12",children:(()=>{switch(O){case"upcoming":return d.jsx(i.Suspense,{fallback:null,children:d.jsx(ja,{tasks:D?void 0:S,openTaskId:V,onOpenTaskIdConsumed:se})});case"search":return d.jsx(i.Suspense,{fallback:d.jsxs("div",{className:"p-4 sm:p-6 space-y-3 sm:space-y-4 animate-pulse",children:[d.jsx("div",{className:"h-10 sm:h-12 bg-gray-200 dark:bg-gray-700 rounded-lg"}),[1,2,3].map((e=>d.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4 sm:p-5",children:[d.jsx("div",{className:"h-4 sm:h-5 bg-gray-200 dark:bg-gray-700 rounded w-2/3 mb-2"}),d.jsx("div",{className:"h-3 sm:h-4 bg-gray-200 dark:bg-gray-700 rounded w-full"})]},e)))]}),children:d.jsx(Na,{tasks:S||[]})});case"lecture-slides":return d.jsx(i.Suspense,{fallback:d.jsxs("div",{className:"p-4 sm:p-6 space-y-3 sm:space-y-4 animate-pulse",children:[d.jsx("div",{className:"h-7 sm:h-8 bg-gray-200 dark:bg-gray-700 rounded-lg w-32 sm:w-40"}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[1,2,3,4,5,6].map((e=>d.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl overflow-hidden",children:[d.jsx("div",{className:"h-32 sm:h-40 bg-gray-200 dark:bg-gray-700"}),d.jsxs("div",{className:"p-3 sm:p-4 space-y-2",children:[d.jsx("div",{className:"h-4 sm:h-5 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),d.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]})]},e)))})]}),children:d.jsx(Ca,{})});case"routine":return d.jsx(i.Suspense,{fallback:d.jsx(wa,{}),children:d.jsx(Sa,{})});default:return d.jsx(ka,{user:t,tasks:S||[],tasksLoading:D,hasCompletedInitialTasksLoad:X,selectedCategory:W,setSelectedCategory:Y,statFilter:K,setStatFilter:J})}})()})]})}),d.jsx(ia,{activePage:O,onPageChange:te,hasUnreadNotifications:de,todayTaskCount:le})]})}):d.jsx("div",{className:"animate-fadeIn",children:d.jsx(p,{onLogin:(e,a=!1)=>o(e,a),onSignup:async e=>{await c(e)},onForgotPassword:y,error:r||void 0})})}},Symbol.toStringTag,{value:"Module"}));export{Da as A,ra as M,pa as T,oa as a};
