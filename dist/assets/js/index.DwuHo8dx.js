import{r as e}from"./index.D9Cz7xb0.js";var t={};function r(e,t){if(!e||!t)return e;let r=e;try{const e=Object.entries(t);for(const[t,s]of e)if(!Array.isArray(s)){const e=n(s);e.test(r)&&(r=r.replace(e,`/[${t}]`))}for(const[t,s]of e)if(Array.isArray(s)){const e=n(s.join("/"));e.test(r)&&(r=r.replace(e,`/[...${t}]`))}return r}catch(s){return e}}function n(e){return new RegExp(`/${t=e,t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(?=[/?#]|$)`);var t}function s(){if("undefined"!=typeof process)return t.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function o(t){e.useEffect((()=>{var e;t.beforeSend&&(null==(e=window.si)||e.call(window,"beforeSend",t.beforeSend))}),[t.beforeSend]);const r=e.useRef(null);return e.useEffect((()=>{var e,n;if(r.current)t.route&&r.current(t.route);else{const o=function(e={}){var t;if("undefined"==typeof window||null===e.route)return null;window.si||(window.si=function(...e){(window.siq=window.siq||[]).push(e)});const r=function(e){return e.scriptSrc?e.scriptSrc:e.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":e.basePath?`${e.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js"}(e);if(document.head.querySelector(`script[src*="${r}"]`))return null;e.beforeSend&&(null==(t=window.si)||t.call(window,"beforeSend",e.beforeSend));const n=document.createElement("script");return n.src=r,n.defer=!0,n.dataset.sdkn="@vercel/speed-insights"+(e.framework?`/${e.framework}`:""),n.dataset.sdkv="1.3.1",e.sampleRate&&(n.dataset.sampleRate=e.sampleRate.toString()),e.route&&(n.dataset.route=e.route),e.endpoint?n.dataset.endpoint=e.endpoint:e.basePath&&(n.dataset.endpoint=`${e.basePath}/speed-insights/vitals`),e.dsn&&(n.dataset.dsn=e.dsn),n.onerror=()=>{},document.head.appendChild(n),{setRoute:e=>{n.dataset.route=null!=e?e:void 0}}}({framework:null!=(e=t.framework)?e:"react",basePath:null!=(n=t.basePath)?n:s(),...t});o&&(r.current=o.setRoute)}}),[t.route]),null}export{o as SpeedInsights,r as computeRoute};
