import{e,K as t,k as o,l as i,h as r,g as n,n as s,o as a,q as l,u as d,v as c}from"./App.Ds0FpmzT.js";import"./index.D5HgYyae.js";import"./index.D9fiUMLq.js";import"./index.DtZJBK16.js";import"./useAuth.5IUqOc8a.js";import"./dataCache.jSzv44up.js";import"./authErrors.BDay5vyW.js";import"./useTasks.Bf3cHniu.js";import"./telegram.service.BTr96-Tu.js";import"./dateUtils.8XYiGfWV.js";import"./AuthPage.iwOsQ7cj.js";import"./AuthSubmitButton.BYoah5mm.js";import"./createLucideIcon.CgqYSU6F.js";import"./alert-circle.CQKj6s3K.js";import"./mail.DyYt0WgS.js";import"./lock.BxS6PB1W.js";import"./eye-off.CYtMKpZm.js";import"./eye.CdqVfnmX.js";import"./loader-2.D3eri1qP.js";import"./user.DbKNDHVL.js";import"./book-open.DRcuK__0.js";import"./layers.MUiHaUeA.js";import"./users.28Zp3XK7.js";import"./check-circle-2.FY7KOIHK.js";import"./x.T9mnuWR1.js";import"./bell.C4ePAYHp.js";import"./smartphone.CSSg6Gm3.js";import"./sun.CFYYIamz.js";import"./shield.CSb0c9ko.js";import"./chevron-right.JIwecHqT.js";import"./calendar.DuEmmdvM.js";import"./clock.B25PmJRC.js";import"./search.CIutKDVd.js";import"./ResetPasswordPage.CVpIo_YI.js";import"./shield-check.C02qF5Pg.js";import"./linkParser.CRNpH1Sh.js";import"./googleDriveUtils.Bs4em4N2.js";import"./file-text.DSlNaGRz.js";import"./link.BW2TzQyJ.js";import"./tag.BBEq3Fec.js";import"./copy.rgpm29wr.js";import"./download.RjYYxeRK.js";import"./list-todo.B_jOqh-E.js";const m=new WeakMap,u=(e,t,o,i=0,r=!1)=>{m.has(e)!==o&&(o?p(e,t,i,r):v(e,t))},p=(e,t,o,i=!1)=>{const r=t.parentNode,n=t.cloneNode(!1);n.classList.add("cloned-input"),n.tabIndex=-1,i&&(n.disabled=!0),r.appendChild(n),m.set(e,n);const s="rtl"===e.ownerDocument.dir?9999:-9999;e.style.pointerEvents="none",t.style.transform=`translate3d(${s}px,${o}px,0) scale(0)`},v=(e,t)=>{const o=m.get(e);o&&(m.delete(e),o.remove()),e.style.pointerEvents="",t.style.transform=""},f="input, textarea, [no-blur], [contenteditable]",h="$ionPaddingTimer",j=(e,t,o)=>{const i=e[h];i&&clearTimeout(i),t>0?e.style.setProperty("--keyboard-offset",`${t}px`):e[h]=setTimeout((()=>{e.style.setProperty("--keyboard-offset","0px"),o&&o()}),120)},y=(e,t,o)=>{e.addEventListener("focusout",(()=>{t&&j(t,0,o)}),{once:!0})};let g=0;const w="data-ionic-skip-scroll-assist",b=e=>{var t;if(document.activeElement===e)return;const o=e.getAttribute("id"),i=e.closest(`label[for="${o}"]`),r=null===(t=document.activeElement)||void 0===t?void 0:t.closest(`label[for="${o}"]`);null!==i&&i===r||(e.setAttribute(w,"true"),e.focus())},E=async(e,t,o,i,r,n,s=!1,a=0,m=!0)=>{if(!o&&!i)return;const p=((e,t,o,i)=>{var r;return((e,t,o,i)=>{const r=e.top,n=e.bottom,s=t.top,a=s+15,l=Math.min(t.bottom,i-o)-50-n,d=a-r,c=Math.round(l<0?-l:d>0?-d:0),m=Math.min(c,r-s),u=Math.abs(m)/.3;return{scrollAmount:m,scrollDuration:Math.min(400,Math.max(150,u)),scrollPadding:o,inputSafeY:4-(r-a)}})((null!==(r=e.closest("ion-item,[ion-item]"))&&void 0!==r?r:e).getBoundingClientRect(),t.getBoundingClientRect(),o,i)})(e,o||i,r,a);if(o&&Math.abs(p.scrollAmount)<4)return b(t),void(n&&null!==o&&(j(o,g),y(t,o,(()=>g=0))));if(u(e,t,!0,p.inputSafeY,s),b(t),l((()=>e.click())),n&&o&&(g=p.scrollPadding,j(o,g)),"undefined"!=typeof window){let i;const r=async()=>{void 0!==i&&clearTimeout(i),window.removeEventListener("ionKeyboardDidShow",s),window.removeEventListener("ionKeyboardDidShow",r),o&&await c(o,0,p.scrollAmount,p.scrollDuration),u(e,t,!1,p.inputSafeY),b(t),n&&y(t,o,(()=>g=0))},s=()=>{window.removeEventListener("ionKeyboardDidShow",s),window.addEventListener("ionKeyboardDidShow",r)};if(o){const e=await d(o),n=e.scrollHeight-e.clientHeight;if(m&&p.scrollAmount>n-e.scrollTop)return"password"===t.type?(p.scrollAmount+=50,window.addEventListener("ionKeyboardDidShow",s)):window.addEventListener("ionKeyboardDidShow",r),void(i=setTimeout(r,1e3))}r()}},S=async(l,d)=>{if(void 0===e)return;const c="ios"===d,m="android"===d,p=l.getNumber("keyboardHeight",290),v=l.getBoolean("scrollAssist",!0),h=l.getBoolean("hideCaretOnScroll",c),j=l.getBoolean("inputBlurring",!1),y=l.getBoolean("scrollPadding",!0),g=Array.from(e.querySelectorAll("ion-input, ion-textarea")),b=new WeakMap,S=new WeakMap,L=await t.getResizeMode(),k=async e=>{await new Promise((t=>r(e,t)));const t=e.shadowRoot||e,l=t.querySelector("input")||t.querySelector("textarea"),d=n(e),c=d?null:e.closest("ion-footer");if(l){if(d&&h&&!b.has(e)){const t=((e,t,r)=>{if(!r||!t)return()=>{};const n=o=>{var i;(i=t)===i.getRootNode().activeElement&&u(e,t,o)},s=()=>u(e,t,!1),a=()=>n(!0),l=()=>n(!1);return o(r,"ionScrollStart",a),o(r,"ionScrollEnd",l),t.addEventListener("blur",s),()=>{i(r,"ionScrollStart",a),i(r,"ionScrollEnd",l),t.removeEventListener("blur",s)}})(e,l,d);b.set(e,t)}if("date"!==l.type&&"datetime-local"!==l.type&&(d||c)&&v&&!S.has(e)){const t=((e,t,o,i,r,n,l,d=!1)=>{const c=n&&(void 0===l||l.mode===s.None);let m=!1;const u=void 0!==a?a.innerHeight:0,p=r=>{!1!==m?E(e,t,o,i,r.detail.keyboardHeight,c,d,u,!1):m=!0},v=()=>{m=!1,null==a||a.removeEventListener("ionKeyboardDidShow",p),e.removeEventListener("focusout",v)},f=async()=>{t.hasAttribute(w)?t.removeAttribute(w):(E(e,t,o,i,r,c,d,u),null==a||a.addEventListener("ionKeyboardDidShow",p),e.addEventListener("focusout",v))};return e.addEventListener("focusin",f),()=>{e.removeEventListener("focusin",f),null==a||a.removeEventListener("ionKeyboardDidShow",p),e.removeEventListener("focusout",v)}})(e,l,d,c,p,y,L,m);S.set(e,t)}}};j&&(()=>{let e=!0,t=!1;const i=document;o(i,"ionScrollStart",(()=>{t=!0})),i.addEventListener("focusin",(()=>{e=!0}),!0),i.addEventListener("touchend",(o=>{if(t)return void(t=!1);const r=i.activeElement;if(!r)return;if(r.matches(f))return;const n=o.target;n!==r&&(n.matches(f)||n.closest(f)||(e=!1,setTimeout((()=>{e||r.blur()}),50)))}),!1)})();for(const e of g)k(e);e.addEventListener("ionInputDidLoad",(e=>{k(e.detail)})),e.addEventListener("ionInputDidUnload",(e=>{(e=>{if(h){const t=b.get(e);t&&t(),b.delete(e)}if(v){const t=S.get(e);t&&t(),S.delete(e)}})(e.detail)}))};export{S as startInputShims};
