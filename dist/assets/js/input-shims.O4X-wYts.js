import{e,K as t,k as o,l as i,h as n,g as r,n as s,o as a,q as l,u as d,v as c}from"./App.BQmv7rza.js";import"./index.CztUZvet.js";import"./index.t344meBw.js";import"./useAuth.zELu88ey.js";import"./dataCache.DP4PyhNH.js";import"./authErrors.BDay5vyW.js";import"./useTasks.CdJ6Z0AI.js";import"./telegram.service.BTr96-Tu.js";import"./dateUtils.8XYiGfWV.js";import"./AuthPage.CzHboC40.js";import"./AuthSubmitButton.Dv-E_3LY.js";import"./createLucideIcon.OyGg3fkb.js";import"./alert-circle.C89E6CTq.js";import"./mail.BEeYPXCS.js";import"./eye-off.CVnLjzvT.js";import"./eye.CYQD33N7.js";import"./loader-2.BVNolkBR.js";import"./user.BfX98KvV.js";import"./book-open.DJ3DCgty.js";import"./users.Bv56yzZB.js";import"./check-circle-2.m2g1URpG.js";import"./x.DW8-tXiS.js";import"./briefcase.Bc6LjxZk.js";import"./bell.BhrLaSMf.js";import"./smartphone.DXgMwadf.js";import"./sun.DvcT8O8P.js";import"./shield.CWEtmefU.js";import"./chevron-right.BsL5jnfp.js";import"./calendar.fMTsWayI.js";import"./clock.BzNLykSr.js";import"./search.CsMEhsRR.js";import"./ResetPasswordPage.C1YzECpp.js";import"./shield-check.B9qB7mF2.js";import"./linkParser.CRNpH1Sh.js";import"./googleDriveUtils.BSx4D6Vk.js";import"./file-text.RTqfukYe.js";import"./link.vUsX4L5p.js";import"./tag.3OThXkku.js";import"./copy.DNa3vixz.js";import"./download.Ci8FYhk4.js";import"./list-todo.CSsSuu2U.js";const m=new WeakMap,u=(e,t,o,i=0,n=!1)=>{m.has(e)!==o&&(o?p(e,t,i,n):v(e,t))},p=(e,t,o,i=!1)=>{const n=t.parentNode,r=t.cloneNode(!1);r.classList.add("cloned-input"),r.tabIndex=-1,i&&(r.disabled=!0),n.appendChild(r),m.set(e,r);const s="rtl"===e.ownerDocument.dir?9999:-9999;e.style.pointerEvents="none",t.style.transform=`translate3d(${s}px,${o}px,0) scale(0)`},v=(e,t)=>{const o=m.get(e);o&&(m.delete(e),o.remove()),e.style.pointerEvents="",t.style.transform=""},f="input, textarea, [no-blur], [contenteditable]",h="$ionPaddingTimer",j=(e,t,o)=>{const i=e[h];i&&clearTimeout(i),t>0?e.style.setProperty("--keyboard-offset",`${t}px`):e[h]=setTimeout((()=>{e.style.setProperty("--keyboard-offset","0px"),o&&o()}),120)},y=(e,t,o)=>{e.addEventListener("focusout",(()=>{t&&j(t,0,o)}),{once:!0})};let b=0;const w="data-ionic-skip-scroll-assist",g=e=>{var t;if(document.activeElement===e)return;const o=e.getAttribute("id"),i=e.closest(`label[for="${o}"]`),n=null===(t=document.activeElement)||void 0===t?void 0:t.closest(`label[for="${o}"]`);null!==i&&i===n||(e.setAttribute(w,"true"),e.focus())},E=async(e,t,o,i,n,r,s=!1,a=0,m=!0)=>{if(!o&&!i)return;const p=((e,t,o,i)=>{var n;return((e,t,o,i)=>{const n=e.top,r=e.bottom,s=t.top,a=s+15,l=Math.min(t.bottom,i-o)-50-r,d=a-n,c=Math.round(l<0?-l:d>0?-d:0),m=Math.min(c,n-s),u=Math.abs(m)/.3;return{scrollAmount:m,scrollDuration:Math.min(400,Math.max(150,u)),scrollPadding:o,inputSafeY:4-(n-a)}})((null!==(n=e.closest("ion-item,[ion-item]"))&&void 0!==n?n:e).getBoundingClientRect(),t.getBoundingClientRect(),o,i)})(e,o||i,n,a);if(o&&Math.abs(p.scrollAmount)<4)return g(t),void(r&&null!==o&&(j(o,b),y(t,o,(()=>b=0))));if(u(e,t,!0,p.inputSafeY,s),g(t),l((()=>e.click())),r&&o&&(b=p.scrollPadding,j(o,b)),"undefined"!=typeof window){let i;const n=async()=>{void 0!==i&&clearTimeout(i),window.removeEventListener("ionKeyboardDidShow",s),window.removeEventListener("ionKeyboardDidShow",n),o&&await c(o,0,p.scrollAmount,p.scrollDuration),u(e,t,!1,p.inputSafeY),g(t),r&&y(t,o,(()=>b=0))},s=()=>{window.removeEventListener("ionKeyboardDidShow",s),window.addEventListener("ionKeyboardDidShow",n)};if(o){const e=await d(o),r=e.scrollHeight-e.clientHeight;if(m&&p.scrollAmount>r-e.scrollTop)return"password"===t.type?(p.scrollAmount+=50,window.addEventListener("ionKeyboardDidShow",s)):window.addEventListener("ionKeyboardDidShow",n),void(i=setTimeout(n,1e3))}n()}},S=async(l,d)=>{if(void 0===e)return;const c="ios"===d,m="android"===d,p=l.getNumber("keyboardHeight",290),v=l.getBoolean("scrollAssist",!0),h=l.getBoolean("hideCaretOnScroll",c),j=l.getBoolean("inputBlurring",!1),y=l.getBoolean("scrollPadding",!0),b=Array.from(e.querySelectorAll("ion-input, ion-textarea")),g=new WeakMap,S=new WeakMap,L=await t.getResizeMode(),k=async e=>{await new Promise((t=>n(e,t)));const t=e.shadowRoot||e,l=t.querySelector("input")||t.querySelector("textarea"),d=r(e),c=d?null:e.closest("ion-footer");if(l){if(d&&h&&!g.has(e)){const t=((e,t,n)=>{if(!n||!t)return()=>{};const r=o=>{var i;(i=t)===i.getRootNode().activeElement&&u(e,t,o)},s=()=>u(e,t,!1),a=()=>r(!0),l=()=>r(!1);return o(n,"ionScrollStart",a),o(n,"ionScrollEnd",l),t.addEventListener("blur",s),()=>{i(n,"ionScrollStart",a),i(n,"ionScrollEnd",l),t.removeEventListener("blur",s)}})(e,l,d);g.set(e,t)}if("date"!==l.type&&"datetime-local"!==l.type&&(d||c)&&v&&!S.has(e)){const t=((e,t,o,i,n,r,l,d=!1)=>{const c=r&&(void 0===l||l.mode===s.None);let m=!1;const u=void 0!==a?a.innerHeight:0,p=n=>{!1!==m?E(e,t,o,i,n.detail.keyboardHeight,c,d,u,!1):m=!0},v=()=>{m=!1,null==a||a.removeEventListener("ionKeyboardDidShow",p),e.removeEventListener("focusout",v)},f=async()=>{t.hasAttribute(w)?t.removeAttribute(w):(E(e,t,o,i,n,c,d,u),null==a||a.addEventListener("ionKeyboardDidShow",p),e.addEventListener("focusout",v))};return e.addEventListener("focusin",f),()=>{e.removeEventListener("focusin",f),null==a||a.removeEventListener("ionKeyboardDidShow",p),e.removeEventListener("focusout",v)}})(e,l,d,c,p,y,L,m);S.set(e,t)}}};j&&(()=>{let e=!0,t=!1;const i=document;o(i,"ionScrollStart",(()=>{t=!0})),i.addEventListener("focusin",(()=>{e=!0}),!0),i.addEventListener("touchend",(o=>{if(t)return void(t=!1);const n=i.activeElement;if(!n)return;if(n.matches(f))return;const r=o.target;r!==n&&(r.matches(f)||r.closest(f)||(e=!1,setTimeout((()=>{e||n.blur()}),50)))}),!1)})();for(const e of b)k(e);e.addEventListener("ionInputDidLoad",(e=>{k(e.detail)})),e.addEventListener("ionInputDidUnload",(e=>{(e=>{if(h){const t=g.get(e);t&&t(),g.delete(e)}if(v){const t=S.get(e);t&&t(),S.delete(e)}})(e.detail)}))};export{S as startInputShims};
