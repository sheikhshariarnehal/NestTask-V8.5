import{r as e,j as s}from"./index.CPrYmX88.js";import{i as r,d as a,e as t,a as l,g as i,b as d,c as n,f as c,h as o,u as x,j as m}from"./lectureSlide.service.Ce8Ash72.js";import{F as g}from"./file-text.Cwxi8k2B.js";import{A as h}from"./alert-circle.DTkPMrOk.js";import{T as u}from"./trash-2.D-n9LHa3.js";import{U as b}from"./upload.DJfSDG_L.js";import{X as p}from"./x.2bT9fKb7.js";import{P as j}from"./plus.vSQVng38.js";import{L as y}from"./link.CH7eS0EI.js";import{V as f}from"./video.CpZ97mXw.js";import{S as N}from"./search.s_aYSrnB.js";import{C as v}from"./calendar.DC40JPW_.js";import{U as k}from"./user.BXoysTdG.js";import{E as w}from"./eye.MqIy09s_.js";import{M as L}from"./more-vertical.ID7_cv8T.js";import{S}from"./square-pen.DIbRulXB.js";import{D as F}from"./download.N_rkxUzO.js";import{s as C,a as U}from"./notifications.DvTNppm3.js";import"./createLucideIcon.BWpljLYB.js";function E({onSubmit:l,sectionId:i,initialData:d,isEditing:n=!1}){const[c,o]=e.useState({title:(null==d?void 0:d.title)||"",description:(null==d?void 0:d.description)||"",sectionId:i,fileUrls:(null==d?void 0:d.fileUrls)||[],originalFileNames:(null==d?void 0:d.originalFileNames)||[],slideLinks:(null==d?void 0:d.slideLinks)||[],videoLinks:(null==d?void 0:d.videoLinks)||[]}),[x,m]=e.useState([]),[N,v]=e.useState(""),[k,w]=e.useState(""),[L,S]=e.useState(!1),[F,C]=e.useState({});return e.useEffect((()=>{d&&n?(o({title:d.title||"",description:d.description||"",sectionId:i,fileUrls:d.fileUrls||[],originalFileNames:d.originalFileNames||[],slideLinks:d.slideLinks||[],videoLinks:d.videoLinks||[]}),C({}),m([]),v(""),w("")):n||(o({title:"",description:"",sectionId:i,fileUrls:[],originalFileNames:[],slideLinks:[],videoLinks:[]}),m([]),v(""),w(""),C({}))}),[d,n,i]),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:s.jsx(g,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n?"Edit Lecture Slide":"Create New Lecture Slide"})]}),s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return c.title.trim()||(e.title="Title is required"),c.videoLinks.forEach(((s,r)=>{a(s)||(e[`videoLink_${r}`]="Invalid video URL")})),c.slideLinks.forEach(((s,a)=>{r(s)||(e[`slideLink_${a}`]="Invalid URL")})),x.forEach(((s,r)=>{t(s.name)||(e[`file_${r}`]="Invalid file type")})),C(e),0===Object.keys(e).length})()){S(!0);try{await l(c,x),n||(o({title:"",description:"",sectionId:i,fileUrls:[],originalFileNames:[],slideLinks:[],videoLinks:[]}),m([]),v(""),w(""))}catch(s){console.error("Error submitting lecture slide:",s)}finally{S(!1)}}},className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title *"}),s.jsx("input",{type:"text",value:c.title,onChange:e=>o((s=>({...s,title:e.target.value}))),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Enter lecture slide title",required:!0}),F.title&&s.jsxs("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[s.jsx(h,{className:"w-4 h-4"}),F.title]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),s.jsx("textarea",{value:c.description,onChange:e=>o((s=>({...s,description:e.target.value}))),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white resize-none",placeholder:"Enter description (optional)"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Files"}),s.jsxs("div",{className:"space-y-3",children:[n&&c.fileUrls.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Existing Files:"}),c.fileUrls.map(((e,r)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(g,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:c.originalFileNames[r]||`File ${r+1}`}),s.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"(existing)"})]}),s.jsx("button",{type:"button",onClick:()=>(e=>{o((s=>({...s,fileUrls:s.fileUrls.filter(((s,r)=>r!==e)),originalFileNames:s.originalFileNames.filter(((s,r)=>r!==e))})))})(r),className:"p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded",title:"Remove existing file",children:s.jsx(u,{className:"w-4 h-4"})})]},`existing-${r}`)))]}),s.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded-lg cursor-pointer hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors w-fit",children:[s.jsx(b,{className:"w-5 h-5"}),s.jsx("span",{children:n?"Upload Additional Files":"Upload Files"}),s.jsx("input",{type:"file",multiple:!0,onChange:e=>{const s=Array.from(e.target.files||[]).filter((e=>t(e.name)));m((e=>[...e,...s]))},className:"hidden",accept:".pdf,.doc,.docx,.txt,.rtf,.md,.ppt,.pptx,.xls,.xlsx,.jpg,.jpeg,.png,.gif,.svg"})]}),x.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"New Files to Upload:"}),x.map(((e,r)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(g,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.name}),s.jsxs("span",{className:"text-xs text-gray-500",children:["(",Math.round(e.size/1024)," KB)"]})]}),s.jsx("button",{type:"button",onClick:()=>(e=>{m((s=>s.filter(((s,r)=>r!==e))))})(r),className:"p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded",children:s.jsx(p,{className:"w-4 h-4"})})]},r)))]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Slide Links"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"url",value:N,onChange:e=>v(e.target.value),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Enter slide URL"}),s.jsxs("button",{type:"button",onClick:()=>{N.trim()&&r(N.trim())&&(o((e=>({...e,slideLinks:[...e.slideLinks,N.trim()]}))),v(""))},disabled:!N.trim()||!r(N.trim()),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[s.jsx(j,{className:"w-4 h-4"}),"Add"]})]}),c.slideLinks.length>0&&s.jsx("div",{className:"space-y-2",children:c.slideLinks.map(((e,r)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(y,{className:"w-4 h-4 text-gray-500"}),s.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 dark:text-blue-400 hover:underline truncate",children:e})]}),s.jsx("button",{type:"button",onClick:()=>(e=>{o((s=>({...s,slideLinks:s.slideLinks.filter(((s,r)=>r!==e))})))})(r),className:"p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded",children:s.jsx(p,{className:"w-4 h-4"})})]},r)))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Video Links (YouTube & Google Drive)"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"url",value:k,onChange:e=>w(e.target.value),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Enter YouTube or Google Drive video URL"}),s.jsxs("button",{type:"button",onClick:()=>{k.trim()&&a(k.trim())&&(o((e=>({...e,videoLinks:[...e.videoLinks,k.trim()]}))),w(""))},disabled:!k.trim()||!a(k.trim()),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[s.jsx(j,{className:"w-4 h-4"}),"Add"]})]}),c.videoLinks.length>0&&s.jsx("div",{className:"space-y-2",children:c.videoLinks.map(((e,r)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(f,{className:"w-4 h-4 text-gray-500"}),s.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 dark:text-blue-400 hover:underline truncate",children:e})]}),s.jsx("button",{type:"button",onClick:()=>(e=>{o((s=>({...s,videoLinks:s.videoLinks.filter(((s,r)=>r!==e))})))})(r),className:"p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded",children:s.jsx(p,{className:"w-4 h-4"})})]},r)))})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"submit",disabled:L,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:L?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),n?"Updating...":"Creating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(j,{className:"w-4 h-4"}),n?"Update Lecture Slide":"Create Lecture Slide"]})})})]})]})}function D({lectureSlides:r=[],onEdit:a,onDelete:t,onView:d,loading:n=!1}){const[c,o]=e.useState(""),[x,m]=e.useState(null),[h,b]=e.useState(null),p=r.filter((e=>{var s;return e.title.toLowerCase().includes(c.toLowerCase())||e.description.toLowerCase().includes(c.toLowerCase())||(null==(s=e.section)?void 0:s.name.toLowerCase().includes(c.toLowerCase()))}));return n?s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:s.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(3)].map(((e,r)=>s.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded-lg"},r)))})}):s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Lecture Slides (",p.length,")"]}),s.jsxs("div",{className:"relative",children:[s.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Search lecture slides...",value:c,onChange:e=>o(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white w-full sm:w-64"})]})]})}),s.jsx("div",{className:"p-6",children:0===p.length?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(g,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:c?"No lecture slides found":"No lecture slides yet"}),s.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:c?"Try a different search term":"Create your first lecture slide above"})]}):s.jsx("div",{className:"space-y-4",children:p.map((e=>{return s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg hover:border-gray-300 dark:hover:border-gray-600 transition-all duration-200",children:[s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-grow min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white truncate",children:e.title}),e.section&&s.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300",children:e.section.name})]}),e.description&&s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:e.description}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(v,{className:"w-3 h-3"}),(r=e.createdAt,new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))]}),e.creator&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(k,{className:"w-3 h-3"}),e.creator.name]}),s.jsxs("div",{className:"flex items-center gap-3",children:[e.fileUrls.length>0&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(g,{className:"w-3 h-3"}),e.fileUrls.length," files"]}),e.slideLinks.length>0&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(y,{className:"w-3 h-3"}),e.slideLinks.length," links"]}),e.videoLinks.length>0&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(f,{className:"w-3 h-3"}),e.videoLinks.length," videos"]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>{return s=e.id,void b(h===s?null:s);var s},className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"View details",children:s.jsx(w,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>d(e),className:"p-2 text-gray-500 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Preview",children:s.jsx(L,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>a(e),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"Edit",children:s.jsx(S,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this lecture slide? This action cannot be undone.")){m(e);try{await t(e)}catch(s){console.error("Error deleting lecture slide:",s)}finally{m(null)}}})(e.id),disabled:x===e.id,className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors disabled:opacity-50",title:"Delete",children:x===e.id?s.jsx("div",{className:"w-4 h-4 border-2 border-red-600 border-t-transparent rounded-full animate-spin"}):s.jsx(u,{className:"w-4 h-4"})})]})]})}),h===e.id&&s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-700/50",children:s.jsxs("div",{className:"space-y-4",children:[e.fileUrls.length>0&&s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Files"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:e.fileUrls.map(((r,a)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-gray-800 rounded border",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s.jsx("span",{className:"text-lg",children:l(e.originalFileNames[a]||"")}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:e.originalFileNames[a]||`File ${a+1}`})]}),s.jsx("a",{href:i(r,e.originalFileNames[a]||`file_${a+1}`),download:e.originalFileNames[a],className:"p-1 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",title:"Download",children:s.jsx(F,{className:"w-4 h-4"})})]},a)))})]}),e.slideLinks.length>0&&s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Slide Links"}),s.jsx("div",{className:"space-y-1",children:e.slideLinks.map(((e,r)=>s.jsxs("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded text-sm",children:[s.jsx(y,{className:"w-4 h-4"}),s.jsx("span",{className:"truncate",children:e})]},r)))})]}),e.videoLinks.length>0&&s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Video Links"}),s.jsx("div",{className:"space-y-1",children:e.videoLinks.map(((e,r)=>s.jsxs("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded text-sm",children:[s.jsx(f,{className:"w-4 h-4"}),s.jsx("span",{className:"truncate",children:e})]},r)))})]})]})})]},e.id);var r}))})})]})}function A({lectureSlide:e,onClose:r}){const a=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:s.jsx(g,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e.title}),e.section&&s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.section.name})]})]}),s.jsx("button",{onClick:r,className:"p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(p,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:s.jsxs("div",{className:"space-y-6",children:[e.description&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Description"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 whitespace-pre-wrap",children:e.description})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(v,{className:"w-4 h-4"}),"Created ",a(e.createdAt)]}),e.creator&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(k,{className:"w-4 h-4"}),e.creator.name]}),e.updatedAt!==e.createdAt&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(v,{className:"w-4 h-4"}),"Updated ",a(e.updatedAt)]})]}),e.fileUrls.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:["Files (",e.fileUrls.length,")"]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:e.fileUrls.map(((r,a)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[s.jsx("span",{className:"text-2xl",children:l(e.originalFileNames[a]||"")}),s.jsx("div",{className:"min-w-0",children:s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:e.originalFileNames[a]||`File ${a+1}`})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"View file",children:s.jsx(g,{className:"w-4 h-4"})}),s.jsx("a",{href:i(r,e.originalFileNames[a]||`file_${a+1}`),download:e.originalFileNames[a],className:"p-2 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Download file",children:s.jsx(F,{className:"w-4 h-4"})})]})]},a)))})]}),e.slideLinks.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:["Slide Links (",e.slideLinks.length,")"]}),s.jsx("div",{className:"space-y-2",children:e.slideLinks.map(((e,r)=>s.jsxs("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[s.jsx(y,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),s.jsx("span",{className:"text-blue-600 dark:text-blue-400 hover:underline truncate",children:e})]},r)))})]}),e.videoLinks.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:["Videos (",e.videoLinks.length,")"]}),s.jsx("div",{className:"space-y-4",children:e.videoLinks.map(((e,r)=>{const a=d(e),t=n(e);return s.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden",children:a?s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"aspect-video",children:s.jsx("iframe",{src:a,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:`Video ${r+1}`})}),s.jsx("div",{className:"p-3",children:s.jsxs("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 hover:underline text-sm",children:[s.jsx(f,{className:"w-4 h-4"}),s.jsx("span",{className:"capitalize",children:t})," - Open in new tab"]})})]}):s.jsx("div",{className:"p-3",children:s.jsxs("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 text-blue-600 dark:text-blue-400 hover:underline",children:[s.jsx(f,{className:"w-5 h-5"}),s.jsx("span",{className:"truncate",children:e})]})})},r)}))})]}),0===e.fileUrls.length&&0===e.slideLinks.length&&0===e.videoLinks.length&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx(g,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No files, links, or videos attached to this lecture slide."})]})]})})]})})}function _({sectionId:r}){const[a,t]=e.useState([]),[l,i]=e.useState(!0),[d,n]=e.useState(null),[g,h]=e.useState(null);e.useEffect((()=>{u()}),[r]);const u=async()=>{try{i(!0);const e=await c({sectionId:r});t(e)}catch(e){console.error("Error loading lecture slides:",e),e.message&&e.message.includes("table does not exist")?C("Lecture slides feature is not set up yet. Please contact your administrator to run the database migration."):C("Failed to load lecture slides")}finally{i(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx(E,{onSubmit:d?async(e,s)=>{if(d)try{const r=await x(d.id,e,s);t((e=>e.map((e=>e.id===d.id?r:e)))),n(null),U("Lecture slide updated successfully")}catch(r){throw console.error("Error updating lecture slide:",r),C(r.message||"Failed to update lecture slide"),r}}:async(e,s)=>{try{const r=await o(e,s);t((e=>[r,...e])),U("Lecture slide created successfully")}catch(r){throw console.error("Error creating lecture slide:",r),C(r.message||"Failed to create lecture slide"),r}},sectionId:r,initialData:d||void 0,isEditing:!!d}),d&&s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:()=>{n(null)},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel Edit"})}),s.jsx(D,{lectureSlides:a,onEdit:e=>{n(e),h(null)},onDelete:async e=>{try{await m(e),t((s=>s.filter((s=>s.id!==e)))),U("Lecture slide deleted successfully")}catch(s){throw console.error("Error deleting lecture slide:",s),C(s.message||"Failed to delete lecture slide"),s}},onView:e=>{h(e),n(null)},loading:l}),g&&s.jsx(A,{lectureSlide:g,onClose:()=>{h(null)}})]})}export{_ as LectureSlidesManager};
