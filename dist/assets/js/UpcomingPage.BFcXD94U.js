const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/App.BbYfXFvD.js","assets/js/capacitor-vendor.WkpnXCg6.js","assets/js/react-vendor.2V4evweb.js","assets/js/charts.ixvsjPR7.js","assets/js/vendor.BFZKXrfJ.js","assets/js/useAuth.Bb42EurS.js","assets/js/index.lt7-dZRp.js","assets/js/ionic-vendor.DB8jv2bB.js","assets/css/ionic-vendor.5aKpPXL6.css","assets/js/supabase-vendor.GZbxw4Q7.js","assets/css/index.U9a9p-Kp.css","assets/js/dataCache.DP4PyhNH.js","assets/js/authErrors.BDay5vyW.js","assets/js/useUsers.CEWjooTn.js","assets/js/telegram.service.CKSqE0Xu.js","assets/js/dateUtils.8XYiGfWV.js","assets/js/AuthPage.CwAwnKLh.js","assets/js/AuthSubmitButton.DTqz8c2u.js","assets/js/icons.DID50SbB.js","assets/js/useTheme.C_vj2EEw.js","assets/js/date-utils.CA8GdWm1.js","assets/js/ResetPasswordPage.BOD0sPMv.js","assets/js/linkParser.CRNpH1Sh.js","assets/js/googleDriveUtils.DgFtRDYK.js"])))=>i.map(i=>d[i]);
import{_ as e}from"./capacitor-vendor.WkpnXCg6.js";import{r as a,R as r,j as t}from"./react-vendor.2V4evweb.js";import{a as s}from"./useUsers.CEWjooTn.js";import{u as d}from"./useAuth.Bb42EurS.js";import{p as l,c as n,d as o,h as i,f as c,j as m}from"./date-utils.CA8GdWm1.js";import{LucidePaperclip as g,Calendar as x,CheckCircle2 as u,AlertCircle as b,Clock as h,BookOpen as p,LucidePenTool as y,Folder as k,FileText as f,FlaskConical as w,GraduationCap as j,Activity as v,Building as N,LucideUsers as S,LucideTag as D}from"./icons.DID50SbB.js";import"./charts.ixvsjPR7.js";import"./vendor.BFZKXrfJ.js";import"./index.lt7-dZRp.js";import"./ionic-vendor.DB8jv2bB.js";import"./supabase-vendor.GZbxw4Q7.js";import"./telegram.service.CKSqE0Xu.js";import"./dateUtils.8XYiGfWV.js";import"./dataCache.DP4PyhNH.js";import"./authErrors.BDay5vyW.js";const T=new Map,$=(e,a)=>{const r=`${e.getTime()}_${a}`;if(!T.has(r)&&(T.set(r,c(e,a)),T.size>100)){const e=T.keys().next().value;e&&T.delete(e)}return T.get(r)},M=a.lazy((()=>e((()=>import("./App.BbYfXFvD.js").then((e=>e.a))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])).then((e=>({default:e.TaskDetailsPopup}))))),C=a.lazy((()=>e((()=>import("./App.BbYfXFvD.js").then((e=>e.M))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])).then((e=>({default:e.MonthlyCalendar}))))),A=r.memo((()=>t.jsx("div",{className:"px-3 xs:px-4 md:max-w-4xl lg:max-w-5xl md:mx-auto pb-8",children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:Array.from({length:6}).map(((e,a)=>t.jsxs("div",{className:"relative overflow-hidden bg-white dark:bg-gray-800/90 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700/50 border-l-[3px] border-l-blue-300 dark:border-l-blue-600",style:{animationDelay:100*a+"ms"},children:[t.jsxs("div",{className:"p-4 h-full flex flex-col",children:[t.jsx("div",{className:"mb-2",children:t.jsx("div",{className:"h-5 bg-gray-200 dark:bg-gray-700 rounded w-1/3 animate-pulse"})}),t.jsx("div",{className:"mb-4",children:t.jsx("div",{className:"h-3.5 bg-gray-200 dark:bg-gray-700 rounded w-full animate-pulse",style:{animationDelay:"100ms"}})}),t.jsxs("div",{className:"flex items-center justify-between pt-2 mt-auto",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("div",{className:"w-3.5 h-3.5 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),t.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-16 animate-pulse",style:{animationDelay:"150ms"}})]}),t.jsx("div",{className:"h-5 bg-blue-100 dark:bg-blue-900/30 rounded-md px-2.5 py-0.5 w-24 animate-pulse",style:{animationDelay:"250ms"}})]})]}),t.jsx("div",{className:"absolute inset-0 -translate-x-full animate-shimmer bg-gradient-to-r from-transparent via-white/10 dark:via-gray-400/5 to-transparent"})]},a)))})}))),E=r.memo((()=>t.jsxs("div",{className:"max-w-full md:max-w-5xl mx-auto px-2 md:px-6 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:"w-9 h-9 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),t.jsx("div",{className:"h-5 w-28 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}),t.jsx("div",{className:"w-9 h-9 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse"})]}),t.jsx("div",{className:"pb-4",children:t.jsx("div",{className:"grid grid-cols-7 gap-2 md:gap-3 px-2 md:px-4",children:Array.from({length:7}).map(((e,a)=>t.jsxs("div",{className:"flex flex-col items-center justify-center h-16 sm:h-20 md:h-24 w-full p-2 md:p-3 rounded-lg animate-pulse "+(3===a?"bg-blue-500/80":"bg-gray-200 dark:bg-gray-700"),style:{animationDelay:50*a+"ms"},children:[t.jsx("div",{className:"w-6 h-2.5 rounded mb-1 "+(3===a?"bg-blue-200":"bg-gray-300 dark:bg-gray-600")}),t.jsx("div",{className:"w-7 h-7 rounded "+(3===a?"bg-blue-200":"bg-gray-300 dark:bg-gray-600")})]},a)))})})]})));a.memo((({day:e,onClick:a})=>t.jsxs("button",{onClick:a,className:`\n        relative group\n        flex flex-col items-center justify-center\n        w-full aspect-square\n        p-1 sm:p-1.5 md:p-3 lg:p-4 rounded-lg sm:rounded-xl \n        border transition-all duration-200\n        ${e.isSelected?"bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-600 border-blue-400/50 shadow-md shadow-blue-500/20 dark:shadow-blue-600/20 scale-[1.02] -translate-y-0.5 md:scale-105":e.isToday?"bg-gradient-to-br from-blue-100 via-indigo-50 to-purple-50 border-blue-200/70 dark:from-blue-900/50 dark:via-indigo-900/40 dark:to-purple-900/50 dark:border-blue-700/50":"bg-white/90 dark:bg-gray-800/90 border-gray-200/50 dark:border-gray-700/50"}\n        hover:shadow-md hover:-translate-y-0.5\n        hover:border-blue-300/70 dark:hover:border-blue-600/70\n        active:scale-95 touch-manipulation\n        md:hover:shadow-lg md:hover:-translate-y-1\n      `,children:[t.jsx("span",{className:`\n        text-[10px] sm:text-xs md:text-sm font-semibold tracking-wide\n        transition-colors duration-200\n        ${e.isSelected?"text-blue-100":e.isToday?"text-blue-600/90 dark:text-blue-400":"text-gray-500 group-hover:text-blue-500 dark:text-gray-400 dark:group-hover:text-blue-400"}\n        mb-0.5 sm:mb-1 md:mb-2\n      `,children:e.weekDay}),t.jsx("span",{className:`\n        text-base sm:text-lg md:text-3xl lg:text-4xl font-bold \n        transition-colors duration-200\n        ${e.isSelected?"text-white":e.isToday?"text-blue-600/90 dark:text-blue-400":"text-gray-700 group-hover:text-blue-600 dark:text-gray-300 dark:group-hover:text-blue-400"}\n      `,children:e.day}),e.isToday&&!e.isSelected&&t.jsx("div",{className:"absolute -bottom-0.5 left-1/2 transform -translate-x-1/2",children:t.jsx("div",{className:"w-1 h-1 sm:w-1.5 sm:h-1.5 md:w-2 md:h-2 rounded-full bg-gradient-to-r from-blue-500 to-indigo-500 dark:from-blue-400 dark:to-indigo-400 animate-pulse shadow-lg shadow-blue-500/50"})}),e.isSelected&&t.jsx("div",{className:"absolute inset-0 rounded-lg sm:rounded-xl ring-2 ring-blue-400/40 dark:ring-blue-500/40 animate-pulse"})]})));const L=a.memo((({task:e,status:a,categoryInfo:r,hasAttachments:s,cleanTaskDescription:d,onClick:m,preventTaskSelection:u})=>{const b=l(e.dueDate),h=new Date,p=n(i(b),o(h));return t.jsx("div",{onClick:m,className:`\n        group h-full bg-white dark:bg-gray-800/90 rounded-lg\n        shadow-sm hover:shadow-md\n        border border-gray-100 dark:border-gray-700/50\n        relative overflow-hidden ${u?"":"cursor-pointer"}\n        transition-all duration-200\n        transform ${u?"":"hover:-translate-y-0.5"}\n        flex flex-col\n        border-l-[3px] ${"completed"===e.status?"border-l-green-500/80":p?"border-l-red-500/80":{presentation:"border-l-purple-500/80",project:"border-l-blue-500/80",assignment:"border-l-indigo-500/80",quiz:"border-l-emerald-500/80","lab-report":"border-l-red-500/80","lab-final":"border-l-yellow-500/80","lab-perf":"border-l-amber-500/80",documents:"border-l-sky-500/80"}[e.category.toLowerCase()]||"border-l-gray-300 dark:border-l-gray-600"}\n        ${"completed"===e.status?"opacity-80":""}\n      `,children:t.jsxs("div",{className:"p-4 flex-grow flex flex-col",children:[t.jsx("div",{className:"flex items-start mb-2 sm:mb-3",children:t.jsxs("div",{className:"flex items-start gap-2 min-w-0 flex-1",children:[t.jsx("h3",{className:`\n              text-sm sm:text-base font-semibold leading-tight flex-1\n              ${"completed"===e.status?"text-gray-500 dark:text-gray-400 line-through":p?"text-red-800 dark:text-red-300":"text-gray-800 dark:text-gray-100"}\n            `,children:e.name}),s&&t.jsx("div",{className:"flex-shrink-0 p-0.5 mt-0.5",children:t.jsx(g,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5 text-gray-500 dark:text-gray-400"})})]})}),t.jsx("p",{className:`\n          text-[11px] xs:text-xs sm:text-sm leading-relaxed line-clamp-2 xs:line-clamp-3 sm:line-clamp-2 mb-3 sm:mb-4 flex-grow\n          ${"completed"===e.status?"text-gray-500 dark:text-gray-400":p?"text-gray-700 dark:text-gray-300":"text-gray-600 dark:text-gray-300"}\n        `,children:d(e.description)}),t.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100 dark:border-gray-700/50",children:[t.jsxs("div",{className:"flex items-center gap-1 sm:gap-1.5",children:[t.jsx(x,{className:"\n              w-3 h-3 sm:w-3.5 sm:h-3.5\n              "+(p&&!e.status?"text-red-500 dark:text-red-400":"text-gray-500 dark:text-gray-400")}),t.jsxs("span",{className:"\n              text-[10px] sm:text-xs font-medium\n              "+(p&&!e.status?"text-red-500 dark:text-red-400":"text-gray-500 dark:text-gray-400"),children:["Due: ",c(b,"MMM d")]})]}),t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[("completed"===e.status||p)&&t.jsxs("span",{className:`\n                inline-flex items-center gap-1\n                px-1.5 sm:px-2 py-0.5\n                text-[9px] sm:text-[10px] font-medium\n                rounded-full\n                ${"completed"===e.status?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400"}\n                ${p&&"completed"!==e.status?"animate-pulse":""}\n              `,children:[a.icon,t.jsx("span",{children:a.label})]}),t.jsxs("span",{className:`\n              inline-flex items-center gap-1 sm:gap-1.5\n              px-2 sm:px-2.5 py-0.5\n              text-[9px] sm:text-[10px] font-medium tracking-wide\n              rounded-md border\n              ${r.color.replace("bg-","bg-opacity-75 bg-").replace("text-","text-opacity-90 text-")}\n              transition-all duration-200\n              shadow-sm backdrop-blur-sm\n              border-opacity-30\n              ${r.color.includes("blue")?"border-blue-200 dark:border-blue-700":r.color.includes("purple")?"border-purple-200 dark:border-purple-700":r.color.includes("emerald")?"border-emerald-200 dark:border-emerald-700":r.color.includes("indigo")?"border-indigo-200 dark:border-indigo-700":r.color.includes("green")?"border-green-200 dark:border-green-700":r.color.includes("red")?"border-red-200 dark:border-red-700":r.color.includes("yellow")?"border-yellow-200 dark:border-yellow-700":r.color.includes("amber")?"border-amber-200 dark:border-amber-700":r.color.includes("sky")?"border-sky-200 dark:border-sky-700":"border-gray-200 dark:border-gray-700"}\n              hover:shadow-md group-hover:shadow-md\n            `,children:[t.jsx("div",{className:"flex-shrink-0",children:r.icon}),t.jsx("span",{className:"capitalize whitespace-nowrap",children:e.category.replace("-"," ")})]})]})]})]})})}));function _({tasks:e,openTaskId:r,onOpenTaskIdConsumed:g}){const{user:T}=d(),{tasks:_,loading:z,error:P,updateTask:R,refreshTasks:I}=s(e||null==T?void 0:T.id),[U,F]=a.useState([]),[O,q]=a.useState(new Date),[Y,B]=a.useState(null),[V,W]=a.useState(!1),[G,H]=a.useState(null),[J,K]=a.useState(!1),[Q,X]=a.useState(!1),[Z,ee]=a.useState(!0),[ae,re]=a.useState(!0),[te,se]=a.useState(0),de=a.useRef(!0),le=a.useRef(Date.now()),ne=a.useRef(),oe=a.useRef();a.useEffect((()=>{F(e||_||[])}),[e,_]),a.useEffect((()=>{if(!r)return;const a=e||_||[];if(0===a.length&&z)return;const t=a.find((e=>e.id===r));if(t){if(B(t),t.dueDate)try{const e="string"==typeof t.dueDate?l(t.dueDate):new Date(t.dueDate);Number.isNaN(e.getTime())||q(e)}catch(s){}null==g||g()}else z||null==g||g()}),[r,e,_,z]),a.useEffect((()=>(z&&(oe.current=setTimeout((()=>{z&&I()}),1e4)),()=>{oe.current&&clearTimeout(oe.current)})),[z,I]);const ie=a.useCallback((()=>{te<3?(se((e=>e+1)),ne.current=setTimeout((()=>{I()}),2e3*(te+1))):H("Failed to load tasks after multiple attempts. Please try again later.")}),[te,I]);a.useEffect((()=>()=>{ne.current&&clearTimeout(ne.current)}),[]),a.useEffect((()=>{P&&(H(P),ie())}),[P,ie]),a.useEffect((()=>{const e=()=>{const e="visible"===document.visibilityState;if(re(e),e){const e=Date.now();e-le.current>3e4&&I(),le.current=e}};return document.addEventListener("visibilitychange",e),de.current&&(de.current=!1,z||_&&0!==_.length||I()),()=>{document.removeEventListener("visibilitychange",e)}}),[I,z,_]),a.useCallback((()=>{I()}),[I]);const ce=a.useCallback((e=>e?e.replace(/\*This task is assigned to section ID: [0-9a-f-]+\*/g,"").replace(/\[([^\]]+)\]\(attachment:[^)]+\)/g,"").replace(/\*\*Attachments:\*\*.*?\)/g,"").replace(/AS \*\*Attachments:\*\*.*?$/gm,"").replace(/Attachments:.*?$/gm,"").trim():""),[]),me=a.useCallback((e=>[/\[([^\]]+)\]\(attachment:[^)]+\)/,/\*\*Attachments:\*\*/,/AS \*\*Attachments:\*\*/,/Attachments:/].some((a=>a.test(e)))),[]),ge=a.useCallback((e=>$(e,"yyyy-MM-dd")),[]),xe=a.useCallback(((e,a)=>!(!e||!a)&&e.getFullYear()===a.getFullYear()&&e.getMonth()===a.getMonth()&&e.getDate()===a.getDate()),[]),ue=a.useMemo((()=>{const e=m(O,-3),a=new Date;return Array.from({length:7},((r,t)=>{const s=m(e,t);return{date:s,day:$(s,"dd"),weekDay:$(s,"EEE"),isSelected:xe(s,O),isToday:xe(s,a)}}))}),[O,xe,$]),be=a.useMemo((()=>{if(!U||0===U.length)return new Map;const e=new Map;return U.forEach((a=>{if(a.dueDate)try{const r=l(a.dueDate),t=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`;e.has(t)||e.set(t,[]),e.get(t).push(a)}catch(r){}})),e}),[U]),he=a.useMemo((()=>{const e=`${O.getFullYear()}-${String(O.getMonth()+1).padStart(2,"0")}-${String(O.getDate()).padStart(2,"0")}`;return be.get(e)||[]}),[be,O]),pe=a.useCallback((e=>{const a=l(e.dueDate),r=new Date,s=n(i(a),o(r));return"completed"===e.status?{label:"Completed",color:"bg-green-50 text-green-600 dark:bg-green-900/20 dark:text-green-400 ring-green-500/20",icon:t.jsx(u,{className:"w-3.5 h-3.5"})}:s?{label:"Overdue",color:"bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400 ring-red-500/20",icon:t.jsx(b,{className:"w-3.5 h-3.5"}),cardStyle:"border-l-[3px] border-l-red-500 bg-red-50/30 dark:bg-red-900/10"}:{label:"In Progress",color:"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400 ring-blue-500/20",icon:t.jsx(h,{className:"w-3.5 h-3.5"})}}),[]),ye=a.useMemo((()=>({task:t.jsx(p,{className:"w-3 h-3 md:w-4 md:h-4"}),presentation:t.jsx(y,{className:"w-3 h-3 md:w-4 md:h-4"}),project:t.jsx(k,{className:"w-3 h-3 md:w-4 md:h-4"}),assignment:t.jsx(f,{className:"w-3 h-3 md:w-4 md:h-4"}),quiz:t.jsx(p,{className:"w-3 h-3 md:w-4 md:h-4"}),"lab-report":t.jsx(w,{className:"w-3 h-3 md:w-4 md:h-4"}),"lab-final":t.jsx(j,{className:"w-3 h-3 md:w-4 md:h-4"}),"lab-performance":t.jsx(v,{className:"w-3 h-3 md:w-4 md:h-4"}),documents:t.jsx(f,{className:"w-3 h-3 md:w-4 md:h-4"}),blc:t.jsx(N,{className:"w-3 h-3 md:w-4 md:h-4"}),groups:t.jsx(S,{className:"w-3 h-3 md:w-4 md:h-4"}),default:t.jsx(D,{className:"w-3 h-3 md:w-4 md:h-4"})})),[]),ke=a.useMemo((()=>({task:"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300",presentation:"bg-purple-100 text-purple-700 dark:bg-purple-900/20 dark:text-purple-300",project:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-300",assignment:"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300",quiz:"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/20 dark:text-indigo-300","lab-report":"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-300","lab-final":"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-300","lab-performance":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-300",documents:"bg-gray-100 text-gray-700 dark:bg-gray-900/20 dark:text-gray-300",blc:"bg-amber-100 text-amber-700 dark:bg-amber-900/20 dark:text-amber-300",groups:"bg-sky-100 text-sky-700 dark:bg-sky-900/20 dark:text-sky-300",default:"bg-gray-100 text-gray-700 dark:bg-gray-900/20 dark:text-gray-300"})),[]),fe=a.useCallback((e=>{const a=e||"default";return{icon:ye[a]||ye.default,color:ke[a]||ke.default}}),[ye,ke]);return a.useCallback((e=>{q(e),B(null)}),[]),a.useEffect((()=>{const e=setTimeout((()=>{try{const e=new URLSearchParams(window.location.search),a=e.get("selectedDate"),r=ge(O);if(a!==r){e.set("selectedDate",r);const a=`${window.location.pathname}?${e.toString()}`;window.history.replaceState({path:a},"",a)}}catch(e){}}),300);return()=>clearTimeout(e)}),[O,ge]),Z&&z||z&&!Z?t.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pt-4",children:[t.jsx(E,{}),t.jsx(A,{})]}):z||U&&0!==U.length?t.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(P||G)&&t.jsx("div",{className:"fixed top-4 right-4 z-50 bg-red-100 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg shadow-lg animate-fade-in",children:t.jsx("p",{className:"text-sm font-medium",children:P||G})}),(V||z&&!Z)&&t.jsx("div",{className:"fixed inset-0 bg-black/10 backdrop-blur-sm z-40 flex items-center justify-center",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-xl animate-scale-in",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:V?"Updating task...":"Loading tasks..."})]})}),t.jsxs("div",{className:"max-w-full md:max-w-5xl mx-auto px-2 md:px-6 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("button",{onClick:()=>q(m(O,-7)),className:"p-2.5 text-gray-600 hover:text-blue-600 hover:bg-blue-50/80 dark:text-gray-400 dark:hover:text-blue-400 dark:hover:bg-blue-900/30 rounded-lg transition-colors duration-150 active:scale-95","aria-label":"Previous week",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),t.jsxs("button",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 dark:text-gray-200 cursor-pointer hover:text-blue-600 dark:hover:text-blue-400 transition-colors px-4 py-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800/50 active:scale-98",onClick:()=>K(!0),"aria-label":"Open calendar",children:[t.jsx(x,{className:"w-4 h-4"}),t.jsx("span",{className:"whitespace-nowrap",children:$(O,"MMMM yyyy")})]}),t.jsx("button",{onClick:()=>q(m(O,7)),className:"p-2.5 text-gray-600 hover:text-blue-600 hover:bg-blue-50/80 dark:text-gray-400 dark:hover:text-blue-400 dark:hover:bg-blue-900/30 rounded-lg transition-colors duration-150 active:scale-95","aria-label":"Next week",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})})]}),t.jsx("div",{className:"pb-4",children:t.jsx("div",{className:"grid grid-cols-7 gap-2 md:gap-3 px-2 md:px-4",children:ue.map((e=>t.jsxs("button",{onClick:()=>q(e.date),className:`\n                flex flex-col items-center justify-center\n                h-16 sm:h-20 md:h-24 w-full\n                p-2 md:p-3 rounded-lg\n                border transition-all duration-200\n                ${e.isSelected?"bg-blue-600 border-blue-500 shadow-lg shadow-blue-500/20 text-white scale-105":e.isToday?"bg-blue-50/50 border-blue-200/60 dark:bg-blue-900/20 dark:border-blue-700/50":"bg-white dark:bg-gray-800/50 border-gray-200 dark:border-gray-700/50"}\n                hover:border-blue-400 dark:hover:border-blue-600 hover:shadow-md\n                active:scale-95\n              `,children:[t.jsx("span",{className:`\n                text-[10px] sm:text-xs font-semibold tracking-wider uppercase\n                ${e.isSelected?"text-blue-100":e.isToday?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400"}\n              `,children:e.weekDay}),t.jsx("span",{className:`\n                text-xl sm:text-2xl md:text-3xl font-bold mt-1\n                ${e.isSelected?"text-white":e.isToday?"text-blue-600 dark:text-blue-400":"text-gray-800 dark:text-gray-200"}\n              `,children:e.day})]},e.day+e.weekDay)))})})]}),t.jsx("div",{className:"px-3 xs:px-4 md:max-w-4xl lg:max-w-5xl md:mx-auto pb-8",children:he.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 xs:gap-3 md:gap-4",children:he.map((e=>t.jsx(L,{task:e,status:pe(e),categoryInfo:fe(e.category),hasAttachments:me(e.description),cleanTaskDescription:ce,onClick:()=>{Q||B(e)},preventTaskSelection:Q},e.id)))}):t.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200/80 dark:border-gray-700/80 mt-4",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-50 dark:bg-gray-700 rounded-full flex items-center justify-center",children:t.jsx(x,{className:"w-8 h-8 text-gray-400 dark:text-gray-500"})}),t.jsxs("p",{className:"text-lg text-gray-900 dark:text-gray-100 font-medium",children:["No tasks for ",c(O,"MMMM d")]}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:xe(O,new Date)?"You're all caught up for today!":"Nothing scheduled for this day"})]})}),t.jsx(a.Suspense,{fallback:t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-white"})}),children:Y&&t.jsx(M,{task:Y,onClose:()=>B(null),onStatusUpdate:async(e,a)=>{try{W(!0),H(null);const t=U.find((a=>a.id===e));if(!t)throw new Error("Task not found in current list");const s=t.status;try{const r=await R(e,{status:a});F((a=>a.map((a=>a.id===e?r:a)))),(null==Y?void 0:Y.id)===e&&B(r)}catch(r){throw F((a=>a.map((a=>a.id===e?{...a,status:s}:a)))),r}}catch(r){H("Failed to update task status. Please try again.")}finally{W(!1)}},isUpdating:V})}),t.jsx(a.Suspense,{fallback:t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-white"})}),children:J&&t.jsx(C,{isOpen:J,onClose:()=>K(!1),selectedDate:O,onSelectDate:e=>{B(null),X(!0),setTimeout((()=>{X(!1)}),1e3),q(e),K(!1);try{const a=new URLSearchParams(window.location.search);a.set("selectedDate",ge(e));const r=`${window.location.pathname}?${a.toString()}`;window.history.pushState({path:r},"",r)}catch(a){}},tasks:U})})]}):t.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pt-4",children:t.jsx("div",{className:"max-w-full md:max-w-5xl mx-auto px-2 md:px-6",children:t.jsxs("div",{className:"text-center py-16 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200/80 dark:border-gray-700/80 mt-4",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-50 dark:bg-gray-700 rounded-full flex items-center justify-center",children:t.jsx(x,{className:"w-8 h-8 text-gray-400 dark:text-gray-500"})}),t.jsx("p",{className:"text-lg text-gray-900 dark:text-gray-100 font-medium",children:"No tasks available"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Try refreshing the page or check back later"})]})})})}export{_ as UpcomingPage};
